:- module profile.
:- interface.
:- import_module array.
:- import_module bool.
:- import_module list.
:- import_module map.
:- import_module maybe.
:- import_module mdbcomp.
:- import_module measurements.
:- import_module (mdbcomp.program_representation).
:- type call_site_array_slot
	--->	slot_normal((profile.call_site_dynamic_ptr))
	;	slot_multi((profile.is_zeroed), (array.array((profile.call_site_dynamic_ptr)))).
:- type call_site_callees
	--->	call_site_callees((list.list((profile.proc_dynamic_ptr)))).
:- type call_site_caller
	--->	call_site_caller((profile.call_site_static_ptr)).
:- type call_site_dynamic
	--->	call_site_dynamic((profile.csd_caller) :: (profile.proc_dynamic_ptr), (profile.csd_callee) :: (profile.proc_dynamic_ptr), (profile.csd_own_prof) :: (measurements.own_prof_info)).
:- type call_site_dynamic_ptr
	--->	call_site_dynamic_ptr(int).
:- type call_site_dynamics == (array.array((profile.call_site_dynamic))).
:- type call_site_kind
	--->	normal_call 
	;	special_call 
	;	higher_order_call 
	;	method_call 
	;	callback .
:- type call_site_kind_and_callee
	--->	normal_call_and_callee((profile.proc_static_ptr), string)
	;	special_call_and_no_callee 
	;	higher_order_call_and_no_callee 
	;	method_call_and_no_callee 
	;	callback_and_no_callee .
:- type call_site_static
	--->	call_site_static((profile.css_container) :: (profile.proc_static_ptr), (profile.css_slot_num) :: int, (profile.css_kind) :: (profile.call_site_kind_and_callee), (profile.css_line_num) :: int, (profile.css_goal_path) :: string).
:- type call_site_static_map == (array.array((profile.call_site_static_ptr))).
:- type call_site_static_ptr
	--->	call_site_static_ptr(int).
:- type call_site_statics == (array.array((profile.call_site_static))).
:- type clique_ptr
	--->	clique_ptr(int).
:- type compensation_table == (map.map((profile.proc_static_ptr), (measurements.inherit_prof_info))).
:- type deep
	--->	deep((profile.profile_stats) :: (profile.profile_stats), (profile.server_name_port) :: string, (profile.script_name) :: string, (profile.data_file_name) :: string, (profile.root) :: (profile.proc_dynamic_ptr), (profile.call_site_dynamics) :: (profile.call_site_dynamics), (profile.proc_dynamics) :: (profile.proc_dynamics), (profile.call_site_statics) :: (profile.call_site_statics), (profile.proc_statics) :: (profile.proc_statics), (profile.clique_index) :: (array.array((profile.clique_ptr))), (profile.clique_members) :: (array.array((list.list((profile.proc_dynamic_ptr))))), (profile.clique_parents) :: (array.array((profile.call_site_dynamic_ptr))), (profile.clique_maybe_child) :: (array.array((maybe.maybe((profile.clique_ptr))))), (profile.proc_callers) :: (array.array((list.list((profile.call_site_dynamic_ptr))))), (profile.call_site_static_map) :: (profile.call_site_static_map), (profile.call_site_calls) :: (array.array((map.map((profile.proc_static_ptr), (list.list((profile.call_site_dynamic_ptr))))))), (profile.pd_own) :: (array.array((measurements.own_prof_info))), (profile.pd_desc) :: (array.array((measurements.inherit_prof_info))), (profile.csd_desc) :: (array.array((measurements.inherit_prof_info))), (profile.ps_own) :: (array.array((measurements.own_prof_info))), (profile.ps_desc) :: (array.array((measurements.inherit_prof_info))), (profile.css_own) :: (array.array((measurements.own_prof_info))), (profile.css_desc) :: (array.array((measurements.inherit_prof_info))), (profile.pd_comp_table) :: (array.array((profile.compensation_table))), (profile.csd_comp_table) :: (array.array((profile.compensation_table))), (profile.module_data) :: (map.map(string, (profile.module_data)))).
:- type initial_deep
	--->	initial_deep((profile.init_profile_stats) :: (profile.profile_stats), (profile.init_root) :: (profile.proc_dynamic_ptr), (profile.init_call_site_dynamics) :: (profile.call_site_dynamics), (profile.init_proc_dynamics) :: (profile.proc_dynamics), (profile.init_call_site_statics) :: (profile.call_site_statics), (profile.init_proc_statics) :: (profile.proc_statics)).
:- type is_zeroed
	--->	zeroed 
	;	not_zeroed .
:- type module_data
	--->	module_data((profile.module_own) :: (measurements.own_prof_info), (profile.module_desc) :: (measurements.inherit_prof_info), (profile.module_procs) :: (list.list((profile.proc_static_ptr)))).
:- type proc_dynamic
	--->	proc_dynamic((profile.pd_proc_static) :: (profile.proc_static_ptr), (profile.pd_sites) :: (array.array((profile.call_site_array_slot)))).
:- type proc_dynamic_ptr
	--->	proc_dynamic_ptr(int).
:- type proc_dynamics == (array.array((profile.proc_dynamic))).
:- type proc_static
	--->	proc_static((profile.ps_id) :: ((mdbcomp.program_representation).string_proc_label), (profile.ps_decl_module) :: string, (profile.ps_refined_id) :: string, (profile.ps_raw_id) :: string, (profile.ps_file_name) :: string, (profile.ps_line_number) :: int, (profile.ps_in_interface) :: (bool.bool), (profile.ps_sites) :: (array.array((profile.call_site_static_ptr))), (profile.ps_is_zeroed) :: (profile.is_zeroed)).
:- type proc_static_ptr
	--->	proc_static_ptr(int).
:- type proc_statics == (array.array((profile.proc_static))).
:- type profile_stats
	--->	profile_stats((profile.max_csd) :: int, (profile.max_css) :: int, (profile.max_pd) :: int, (profile.max_ps) :: int, (profile.ticks_per_sec) :: int, (profile.instrument_quanta) :: int, (profile.user_quanta) :: int, (profile.num_callseqs) :: int, (profile.word_size) :: int, (profile.canonical) :: (bool.bool)).
