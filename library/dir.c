/*
** Automatically generated from `dir.m'
** by the Mercury compiler,
** version rotd-2015-10-06
** configured for x86_64-apple-darwin13.4.0.
** Do not edit.
**
** The autoconfigured grade settings governing
** the generation of this C file were
**
** TAG_BITS=2
** UNBOXED_FLOAT=no
** PREGENERATED_DIST=yes
** HIGHLEVEL_CODE=yes
**
** END_OF_C_GRADE_INFO
*/


/* :- module dir. */
/* :- implementation. */

/*
INIT mercury__dir__init
ENDINIT
*/

#include "dir.mih"
#include "dir.mh"


#include "array.mih"
#include "assoc_list.mih"
#include "benchmarking.mih"
#include "bitmap.mih"
#include "bool.mih"
#include "builtin.mih"
#include "calendar.mih"
#include "char.mih"
#include "construct.mih"
#include "cord.mih"
#include "deconstruct.mih"
#include "enum.mih"
#include "erlang_rtti_implementation.mih"
#include "exception.mih"
#include "float.mih"
#include "int.mih"
#include "integer.mih"
#include "io.mih"
#include "lexer.mih"
#include "list.mih"
#include "map.mih"
#include "math.mih"
#include "maybe.mih"
#include "mutvar.mih"
#include "ops.mih"
#include "pair.mih"
#include "parser.mih"
#include "pretty_printer.mih"
#include "private_builtin.mih"
#include "random.mih"
#include "require.mih"
#include "rtti_implementation.mih"
#include "set.mih"
#include "set_ordlist.mih"
#include "set_tree234.mih"
#include "solutions.mih"
#include "std_util.mih"
#include "stm_builtin.mih"
#include "store.mih"
#include "stream.mih"
#include "string.mih"
#include "table_builtin.mih"
#include "term.mih"
#include "term_conversion.mih"
#include "term_io.mih"
#include "time.mih"
#include "tree234.mih"
#include "type_desc.mih"
#include "unit.mih"
#include "univ.mih"
#include "varset.mih"
#include "version_array.mih"
#include "stream.string_writer.mih"
#include "string.format.mih"
#include "string.parse_runtime.mih"
#include "string.parse_util.mih"
#include "string.to_string.mih"




#line 94 "dir.c"
static const MR_VA_PseudoTypeInfo_Struct8 mercury__dir____vpti_pred_8__plain_builtin__type_ctor_info_string_0__plain_builtin__type_ctor_info_string_0__plain_io__type_ctor_info_file_type_0__plain_bool__type_ctor_info_bool_0__pseudo_1__pseudo_1__plain_io__type_ctor_info_state_0__plain_io__type_ctor_info_state_0;

#line 97 "dir.c"
static const MR_FA_PseudoTypeInfo_Struct1 mercury__dir__list__pti_list_1__plain_io__type_ctor_info_file_id_0;

#line 100 "dir.c"
static const MR_FA_PseudoTypeInfo_Struct1 mercury__dir__io__pti_maybe_partial_res_1__pseudo_1;

#line 103 "dir.c"
static const MR_VA_PseudoTypeInfo_Struct3 mercury__dir____vpti_tuple_3__pseudo_io__pti_maybe_partial_res_1__pseudo_1__plain_bool__type_ctor_info_bool_0__plain_dir__type_ctor_info_stream_0;

#line 106 "dir.c"
static const MR_VA_PseudoTypeInfo_Struct3 mercury__dir____vpti_pred_3__pseudo_1__plain_io__type_ctor_info_state_0__plain_io__type_ctor_info_state_0;

#line 109 "dir.c"
static const MR_VA_PseudoTypeInfo_Struct2 mercury__dir____vpti_tuple_2__pseudo_1__plain_io__type_ctor_info_state_0;

#line 112 "dir.c"
static MR_bool MR_CALL 
mercury__dir____Unify____foldl_pred_1_0_10001(
#line 115 "dir.c"
  MR_Box mercury__dir__wrapper_arg_1,
#line 117 "dir.c"
  MR_Box mercury__dir__wrapper_arg_2,
#line 119 "dir.c"
  MR_Box mercury__dir__wrapper_arg_3);

#line 122 "dir.c"
static void MR_CALL 
mercury__dir____Compare____foldl_pred_1_0_10001(
#line 125 "dir.c"
  MR_Box mercury__dir__wrapper_arg_1,
#line 127 "dir.c"
  MR_Box * mercury__dir__wrapper_arg_2,
#line 129 "dir.c"
  MR_Box mercury__dir__wrapper_arg_3,
#line 131 "dir.c"
  MR_Box mercury__dir__wrapper_arg_4);

#line 134 "dir.c"
static MR_bool MR_CALL 
mercury__dir____Unify____stream_0_0_10001(
#line 137 "dir.c"
  MR_Box mercury__dir__wrapper_arg_1,
#line 139 "dir.c"
  MR_Box mercury__dir__wrapper_arg_2);

#line 142 "dir.c"
static void MR_CALL 
mercury__dir____Compare____stream_0_0_10001(
#line 145 "dir.c"
  MR_Box * mercury__dir__wrapper_arg_1,
#line 147 "dir.c"
  MR_Box mercury__dir__wrapper_arg_2,
#line 149 "dir.c"
  MR_Box mercury__dir__wrapper_arg_3);

#line 102 "exception.opt"
static void MR_CALL 
mercury__dir__f_85_110_117_115_101_100_65_114_103_115_95_95_112_114_101_100_95_95_116_114_121_95_105_111_95_95_104_111_53_95_95_91_49_44_32_50_44_32_51_44_32_52_44_32_53_44_32_54_44_32_55_44_32_56_44_32_57_44_32_49_48_44_32_49_49_44_32_49_50_44_32_49_51_93_95_48_4_p_in__exception_0_1(
#line 102 "exception.opt"
  MR_Box mercury__dir__closure_arg,
#line 102 "exception.opt"
  MR_Box * mercury__dir__wrapper_arg_1);

#line 52 "exception.int"
static void MR_CALL 
mercury__dir__f_85_110_117_115_101_100_65_114_103_115_95_95_112_114_101_100_95_95_116_114_121_95_105_111_95_95_104_111_53_95_95_91_49_44_32_50_44_32_51_44_32_52_44_32_53_44_32_54_44_32_55_44_32_56_44_32_57_44_32_49_48_44_32_49_49_44_32_49_50_44_32_49_51_93_95_48_4_p_in__exception_0(
#line 52 "exception.int"
  MR_Word mercury__dir__TypeInfo_for_T_16,
#line 52 "exception.int"
  MR_Word mercury__dir__V_5_5,
#line 52 "exception.int"
  MR_Word * mercury__dir__V_6_6);

#line 311 "list.int"
static MR_Word MR_CALL 
mercury__dir__f_85_110_117_115_101_100_65_114_103_115_95_95_102_117_110_99_95_95_109_97_112_95_95_104_111_51_95_95_91_50_93_95_48_2_f_in__list_0(
#line 311 "list.int"
  MR_Word mercury__dir__V_12_12,
#line 311 "list.int"
  MR_Word mercury__dir__HeadVar__2_2);

#line 311 "list.int"
static MR_Word MR_CALL 
mercury__dir__f_85_110_117_115_101_100_65_114_103_115_95_95_102_117_110_99_95_95_109_97_112_95_95_104_111_50_95_95_91_50_93_95_48_2_f_in__list_0(
#line 311 "list.int"
  MR_Char mercury__dir__V_12_12,
#line 311 "list.int"
  MR_Word mercury__dir__HeadVar__2_2);

#line 311 "list.int"
static MR_Word MR_CALL 
mercury__dir__f_85_110_117_115_101_100_65_114_103_115_95_95_102_117_110_99_95_95_109_97_112_95_95_104_111_49_95_95_91_50_93_95_48_2_f_in__list_0(
#line 311 "list.int"
  MR_Word mercury__dir__V_12_12,
#line 311 "list.int"
  MR_Word mercury__dir__HeadVar__2_2);

#line 18 "ops.opt"
static MR_Integer MR_CALL 
mercury__dir__f_85_110_117_115_101_100_65_114_103_115_95_95_102_117_110_99_95_95_67_108_97_115_115_77_101_116_104_111_100_95_102_111_114_95_111_112_115_95_95_111_112_95_116_97_98_108_101_95_95_95_95_111_112_115_95_95_109_101_114_99_117_114_121_95_111_112_95_116_97_98_108_101_95_95_97_114_105_116_121_48_95_95_95_95_95_95_111_112_115_95_95_109_97_120_95_112_114_105_111_114_105_116_121_95_49_95_95_91_49_93_95_48_1_f_in__ops_0(void);

#line 311 "list.int"
static MR_Word MR_CALL 
mercury__dir__map__ho9_2_f_in__list_0(
#line 311 "list.int"
  MR_Word mercury__dir__HeadVar__2_2);

#line 612 "list.int"
static void MR_CALL 
mercury__dir__takewhile__ho8_4_p_in__list_0(
#line 612 "list.int"
  MR_Word mercury__dir__HeadVar__2_2,
#line 612 "list.int"
  MR_Word * mercury__dir__HeadVar__3_3,
#line 612 "list.int"
  MR_Word * mercury__dir__HeadVar__4_4);

#line 612 "list.int"
static void MR_CALL 
mercury__dir__takewhile__ho7_4_p_in__list_0(
#line 612 "list.int"
  MR_Word mercury__dir__HeadVar__2_2,
#line 612 "list.int"
  MR_Word * mercury__dir__HeadVar__3_3,
#line 612 "list.int"
  MR_Word * mercury__dir__HeadVar__4_4);

#line 612 "list.int"
static void MR_CALL 
mercury__dir__takewhile__ho6_4_p_in__list_0(
#line 612 "list.int"
  MR_Word mercury__dir__HeadVar__2_2,
#line 612 "list.int"
  MR_Word * mercury__dir__HeadVar__3_3,
#line 612 "list.int"
  MR_Word * mercury__dir__HeadVar__4_4);

#line 311 "list.int"
static MR_Word MR_CALL 
mercury__dir__map__ho4_2_f_in__list_0(
#line 311 "list.int"
  MR_Word mercury__dir__HeadVar__2_2);

#line 1346 "dir.m"
static void MR_CALL 
mercury__dir__IntroducedFrom__pred__foldl2_process_dir__1346__1_13_p_0(
#line 1346 "dir.m"
  MR_Word mercury__dir__TypeInfo_for_T_69,
#line 1346 "dir.m"
  MR_Word mercury__dir__SymLinkParent_12,
#line 1346 "dir.m"
  MR_Word mercury__dir__P_13,
#line 1346 "dir.m"
  MR_String mercury__dir__DirName_14,
#line 1346 "dir.m"
  MR_Word mercury__dir__Recursive_16,
#line 1346 "dir.m"
  MR_Word mercury__dir__FollowLinks_17,
#line 1346 "dir.m"
  MR_Box mercury__dir__T0_19,
#line 1346 "dir.m"
  MR_Word mercury__dir__ParentIds_23,
#line 1346 "dir.m"
  MR_Box mercury__dir__Dir0_25,
#line 1346 "dir.m"
  MR_String mercury__dir__FirstEntry_26,
#line 1346 "dir.m"
  MR_Tuple * mercury__dir__HeadVar__11_50);

#line 2063 "dir.m"
static void MR_CALL 
mercury__dir__find_matching_brace_or_comma_6_p_0(
#line 2063 "dir.m"
  MR_Word mercury__dir__HeadVar__1_1,
#line 2063 "dir.m"
  MR_Word mercury__dir__Alternatives0_2,
#line 2063 "dir.m"
  MR_Word mercury__dir__CurAlternative_3,
#line 2063 "dir.m"
  MR_Integer mercury__dir__BraceLevel_4,
#line 2063 "dir.m"
  MR_Word * mercury__dir__Alternatives_5,
#line 2063 "dir.m"
  MR_Word * mercury__dir__Left_6);

#line 1920 "dir.m"
static void MR_CALL 
mercury__dir__read_entry_2_7_p_0(
#line 1920 "dir.m"
  MR_Box mercury__dir__Dir0_1,
#line 1920 "dir.m"
  MR_Box * mercury__dir__Dir_2,
#line 1920 "dir.m"
  MR_Integer * mercury__dir__Status_3,
#line 1920 "dir.m"
  MR_Box * mercury__dir__Error_4,
#line 1920 "dir.m"
  MR_String * mercury__dir__FileName_5);

#line 1892 "dir.m"
static void MR_CALL 
mercury__dir__read_entry_4_p_0(
#line 1892 "dir.m"
  MR_Box mercury__dir__Dir0_5,
#line 1892 "dir.m"
  MR_Word * mercury__dir__Res_6);

#line 1846 "dir.m"
static void MR_CALL 
mercury__dir__close_2_5_p_0(
#line 1846 "dir.m"
  MR_Box mercury__dir__Dir_1,
#line 1846 "dir.m"
  MR_Integer * mercury__dir__Status_2,
#line 1846 "dir.m"
  MR_Box * mercury__dir__Error_3);

#line 1834 "dir.m"
static void MR_CALL 
mercury__dir__close_4_p_0(
#line 1834 "dir.m"
  MR_Box mercury__dir__Dir_5,
#line 1834 "dir.m"
  MR_Word * mercury__dir__Res_6);

#line 1820 "dir.m"
static void MR_CALL 
mercury__dir__make_dir_open_result_error_4_p_0(
#line 1820 "dir.m"
  MR_Box mercury__dir__Error_5,
#line 1820 "dir.m"
  MR_Word * mercury__dir__HeadVar__2_2);

#line 1810 "dir.m"
static MR_Word MR_CALL 
mercury__dir__make_dir_open_result_eof_0_f_0(void);

#line 1779 "dir.m"
static void MR_CALL 
mercury__dir__make_win32_dir_open_result_ok_5_p_0(
#line 1779 "dir.m"
  MR_Box mercury__dir__Dir_6,
#line 1779 "dir.m"
  MR_String mercury__dir__FirstFile0_7,
#line 1779 "dir.m"
  MR_Word * mercury__dir__Result_8);

#line 1756 "dir.m"
static void MR_CALL 
mercury__dir__read_first_entry_4_p_0(
#line 1756 "dir.m"
  MR_Box mercury__dir__Dir_5,
#line 1756 "dir.m"
  MR_Word * mercury__dir__Result_6);

#line 1711 "dir.m"
static void MR_CALL 
mercury__dir__check_dir_readable_5_p_0(
#line 1711 "dir.m"
  MR_String mercury__dir__DirName_6,
#line 1711 "dir.m"
  MR_Integer * mercury__dir__IsReadable_7,
#line 1711 "dir.m"
  MR_Word * mercury__dir__Result_8);

#line 1621 "dir.m"
static void MR_CALL 
mercury__dir__open_2_4_p_0(
#line 1621 "dir.m"
  MR_String mercury__dir__DirName_1,
#line 1621 "dir.m"
  MR_Word * mercury__dir__Result_2);

#line 1571 "dir.m"
static MR_bool MR_CALL 
mercury__dir__can_implement_dir_foldl_0_p_0(void);

#line 1504 "dir.m"
static void MR_CALL 
mercury__dir__check_for_symlink_loop_7_p_0(
#line 1504 "dir.m"
  MR_Word mercury__dir__SymLinkParent_8,
#line 1504 "dir.m"
  MR_String mercury__dir__DirName_9,
#line 1504 "dir.m"
  MR_Word * mercury__dir__LoopRes_10,
#line 1504 "dir.m"
  MR_Word mercury__dir__STATE_VARIABLE_ParentIds_0_17,
#line 1504 "dir.m"
  MR_Word * mercury__dir__STATE_VARIABLE_ParentIds_18);

#line 1406 "dir.m"
static void MR_CALL 
mercury__dir__foldl2_process_entries_14_p_0(
#line 1406 "dir.m"
  MR_Word mercury__dir__TypeInfo_for_T_87,
#line 1406 "dir.m"
  MR_Box mercury__dir__STATE_VARIABLE_Dir_0_1,
#line 1406 "dir.m"
  MR_Box * mercury__dir__STATE_VARIABLE_Dir_2,
#line 1406 "dir.m"
  MR_Word mercury__dir__SymLinkParent_3,
#line 1406 "dir.m"
  MR_Word mercury__dir__P_4,
#line 1406 "dir.m"
  MR_String mercury__dir__DirName_5,
#line 1406 "dir.m"
  MR_Word mercury__dir__HeadVar__6_6,
#line 1406 "dir.m"
  MR_Word mercury__dir__ParentIds_7,
#line 1406 "dir.m"
  MR_Word mercury__dir__Recursive_8,
#line 1406 "dir.m"
  MR_Word mercury__dir__FollowLinks_9,
#line 1406 "dir.m"
  MR_Word * mercury__dir__HeadVar__10_10,
#line 1406 "dir.m"
  MR_Box mercury__dir__T0_11,
#line 1406 "dir.m"
  MR_Word * mercury__dir__HeadVar__12_12);

#line 1314 "dir.m"
static void MR_CALL 
mercury__dir__foldl2_process_dir2_13_p_0(
#line 1314 "dir.m"
  MR_Word mercury__dir__TypeInfo_for_T_33,
#line 1314 "dir.m"
  MR_Box mercury__dir__STATE_VARIABLE_Dir_0_26,
#line 1314 "dir.m"
  MR_Box * mercury__dir__STATE_VARIABLE_Dir_27,
#line 1314 "dir.m"
  MR_Word mercury__dir__SymLinkParent_15,
#line 1314 "dir.m"
  MR_Word mercury__dir__P_16,
#line 1314 "dir.m"
  MR_String mercury__dir__DirName_17,
#line 1314 "dir.m"
  MR_Word mercury__dir__ParentIds_18,
#line 1314 "dir.m"
  MR_String mercury__dir__FirstEntry_19,
#line 1314 "dir.m"
  MR_Word mercury__dir__Recursive_20,
#line 1314 "dir.m"
  MR_Word mercury__dir__FollowLinks_21,
#line 1314 "dir.m"
  MR_Box mercury__dir__T0_22,
#line 1314 "dir.m"
  MR_Tuple * mercury__dir__HeadVar__11_11);

#line 1346 "dir.m"
static void MR_CALL 
mercury__dir__foldl2_process_dir_11_p_0_1(
#line 1346 "dir.m"
  MR_Box mercury__dir__closure_arg,
#line 1346 "dir.m"
  MR_Box * mercury__dir__wrapper_arg_1,
#line 1346 "dir.m"
  MR_Box mercury__dir__wrapper_arg_2,
#line 1346 "dir.m"
  MR_Box * mercury__dir__wrapper_arg_3);

#line 1266 "dir.m"
static void MR_CALL 
mercury__dir__check_dir_accessibility_4_p_0(
#line 1266 "dir.m"
  MR_String mercury__dir__DirName_5,
#line 1266 "dir.m"
  MR_Word * mercury__dir__Res_6);

#line 1243 "dir.m"
static void MR_CALL 
mercury__dir__make_mkdir_res_exists_5_p_0(
#line 1243 "dir.m"
  MR_Box mercury__dir__Error_6,
#line 1243 "dir.m"
  MR_String mercury__dir__DirName_7,
#line 1243 "dir.m"
  MR_Word * mercury__dir__Res_8);

#line 1228 "dir.m"
static void MR_CALL 
mercury__dir__make_mkdir_res_error_4_p_0(
#line 1228 "dir.m"
  MR_Box mercury__dir__Error_5,
#line 1228 "dir.m"
  MR_Word * mercury__dir__HeadVar__2_2);

#line 1216 "dir.m"
static MR_Word MR_CALL 
mercury__dir__make_mkdir_res_ok_0_f_0(void);

#line 1049 "dir.m"
static MR_bool MR_CALL 
mercury__dir__can_implement_make_directory_0_p_0(void);

#line 545 "dir.m"
static MR_Word MR_CALL 
mercury__dir__canonicalize_path_chars_2_2_f_0(
#line 545 "dir.m"
  MR_Word mercury__dir__HeadVar__1_1,
#line 545 "dir.m"
  MR_Word mercury__dir__HeadVar__2_2);


static /* final */ const MR_Box mercury__dir_scalar_common_1[8][2];

static /* final */ const MR_Box mercury__dir_scalar_common_2[1][3];

static /* final */ const MR_Box mercury__dir_scalar_common_3[1][4];

static /* final */ const MR_Box mercury__dir_scalar_common_4[2][5];

static /* final */ const MR_Box mercury__dir_scalar_common_5[5][1];

static /* final */ const MR_Integer mercury__dir_scalar_common_6[1][2];

static /* final */ const MR_Box mercury__dir_scalar_common_7[1][16];

static /* final */ const MR_Box mercury__dir_scalar_common_8[1][7];




static /* final */ const MR_Box mercury__dir_scalar_common_1[8][2] = {
  /* row 0 */
  {
    ((MR_Box) (&mercury__list__list__type_ctor_info_list_1)),
    ((MR_Box) (&mercury__builtin__builtin__type_ctor_info_character_0))
  },
  /* row 1 */
  {
    ((MR_Box) ((MR_Integer) 2)),
    ((MR_Box) (MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0))))
  },
  /* row 2 */
  {
    ((MR_Box) ((MR_Integer) 1)),
    ((MR_Box) (MR_mkword(MR_mktag(1), &mercury__dir_scalar_common_1[1])))
  },
  /* row 3 */
  {
    ((MR_Box) ((MR_Integer) 0)),
    ((MR_Box) (MR_mkword(MR_mktag(1), &mercury__dir_scalar_common_1[2])))
  },
  /* row 4 */
  {
    ((MR_Box) ((MR_Integer) 0)),
    ((MR_Box) (MR_mkword(MR_mktag(1), &mercury__dir_scalar_common_1[1])))
  },
  /* row 5 */
  {
    ((MR_Box) (MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0)))),
    ((MR_Box) (MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0))))
  },
  /* row 6 */
  {
    ((MR_Box) (MR_Word) ((MR_Char) 58)),
    ((MR_Box) (MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0))))
  },
  /* row 7 */
  {
    ((MR_Box) (&mercury__list__list__type_ctor_info_list_1)),
    ((MR_Box) (&mercury__dir_scalar_common_1[0]))
  },
};

static /* final */ const MR_Box mercury__dir_scalar_common_2[1][3] = {
  /* row 0 */
  {
    ((MR_Box) (base_typeclass_info_stream__stream__arity2__io__output_stream__arity0__io__state__arity0__)),
    ((MR_Box) (&mercury__io__io__type_ctor_info_output_stream_0)),
    ((MR_Box) (&mercury__io__io__type_ctor_info_state_0))
  },
};

static /* final */ const MR_Box mercury__dir_scalar_common_3[1][4] = {
  /* row 0 */
  {
    ((MR_Box) (base_typeclass_info_stream__output__arity2__io__output_stream__arity0__io__state__arity0__)),
    ((MR_Box) (&mercury__dir_scalar_common_2[0])),
    ((MR_Box) (&mercury__io__io__type_ctor_info_output_stream_0)),
    ((MR_Box) (&mercury__io__io__type_ctor_info_state_0))
  },
};

static /* final */ const MR_Box mercury__dir_scalar_common_4[2][5] = {
  /* row 0 */
  {
    ((MR_Box) (base_typeclass_info_stream__writer__arity3__io__output_stream__arity0__string__arity0__io__state__arity0__)),
    ((MR_Box) (&mercury__dir_scalar_common_3[0])),
    ((MR_Box) (&mercury__io__io__type_ctor_info_output_stream_0)),
    ((MR_Box) (&mercury__builtin__builtin__type_ctor_info_string_0)),
    ((MR_Box) (&mercury__io__io__type_ctor_info_state_0))
  },
  /* row 1 */
  {
    ((MR_Box) (base_typeclass_info_stream__writer__arity3__io__output_stream__arity0__character__arity0__io__state__arity0__)),
    ((MR_Box) (&mercury__dir_scalar_common_3[0])),
    ((MR_Box) (&mercury__io__io__type_ctor_info_output_stream_0)),
    ((MR_Box) (&mercury__builtin__builtin__type_ctor_info_character_0)),
    ((MR_Box) (&mercury__io__io__type_ctor_info_state_0))
  },
};

static /* final */ const MR_Box mercury__dir_scalar_common_5[5][1] = {
  /* row 0 */
  {
    ((MR_Box) (((MR_Box) ((MR_String) "dir.make_directory not implemented on this platform"))))
  },
  /* row 1 */
  {
    ((MR_Box) ((MR_Integer) 0))
  },
  /* row 2 */
  {
    ((MR_Box) (((MR_Box) ((MR_String) "dir.foldl2 not implemented on this platform"))))
  },
  /* row 3 */
  {
    ((MR_Box) (((MR_Box) ((MR_String) "dir.foldl2: pathname is not a directory"))))
  },
  /* row 4 */
  {
    ((MR_Box) (((MR_Box) ((MR_String) "no error"))))
  },
};

static /* final */ const MR_Integer mercury__dir_scalar_common_6[1][2] = {
  /* row 0 */
  {
    (MR_Integer) 1,
    (MR_Integer) 33
  },
};

static /* final */ const MR_Box mercury__dir_scalar_common_7[1][16] = {
  /* row 0 */
  {
    NULL,
    ((MR_Box) (&mercury__dir_scalar_common_6[0])),
    ((MR_Box) (MR_Word) ((MR_Integer) 13)),
    ((MR_Box) (&mercury__private_builtin__private_builtin__type_ctor_info_type_info_0)),
    ((MR_Box) (&mercury__bool__bool__type_ctor_info_bool_0)),
    ((MR_Box) (&mercury__dir____vpti_pred_8__plain_builtin__type_ctor_info_string_0__plain_builtin__type_ctor_info_string_0__plain_io__type_ctor_info_file_type_0__plain_bool__type_ctor_info_bool_0__pseudo_1__pseudo_1__plain_io__type_ctor_info_state_0__plain_io__type_ctor_info_state_0)),
    ((MR_Box) (&mercury__builtin__builtin__type_ctor_info_string_0)),
    ((MR_Box) (&mercury__bool__bool__type_ctor_info_bool_0)),
    ((MR_Box) (&mercury__bool__bool__type_ctor_info_bool_0)),
    ((MR_Box) (MR_Word) ((MR_Integer) 1)),
    ((MR_Box) (&mercury__dir__list__pti_list_1__plain_io__type_ctor_info_file_id_0)),
    ((MR_Box) (&mercury__dir__dir__type_ctor_info_stream_0)),
    ((MR_Box) (&mercury__builtin__builtin__type_ctor_info_string_0)),
    ((MR_Box) (&mercury__dir____vpti_tuple_3__pseudo_io__pti_maybe_partial_res_1__pseudo_1__plain_bool__type_ctor_info_bool_0__plain_dir__type_ctor_info_stream_0)),
    ((MR_Box) (&mercury__io__io__type_ctor_info_state_0)),
    ((MR_Box) (&mercury__io__io__type_ctor_info_state_0))
  },
};

static /* final */ const MR_Box mercury__dir_scalar_common_8[1][7] = {
  /* row 0 */
  {
    NULL,
    ((MR_Box) (&mercury__dir_scalar_common_6[0])),
    ((MR_Box) (MR_Word) ((MR_Integer) 4)),
    ((MR_Box) (&mercury__private_builtin__private_builtin__type_ctor_info_type_info_0)),
    ((MR_Box) (&mercury__dir____vpti_pred_3__pseudo_1__plain_io__type_ctor_info_state_0__plain_io__type_ctor_info_state_0)),
    ((MR_Box) (&mercury__io__io__type_ctor_info_state_0)),
    ((MR_Box) (&mercury__dir____vpti_tuple_2__pseudo_1__plain_io__type_ctor_info_state_0))
  },
};



#include "array.mh"
#include "benchmarking.mh"
#include "bitmap.mh"
#include "builtin.mh"
#include "char.mh"
#include "construct.mh"
#include "dir.mh"
#include "exception.mh"
#include "float.mh"
#include "int.mh"
#include "io.mh"
#include "math.mh"
#include "pretty_printer.mh"
#include "private_builtin.mh"
#include "rtti_implementation.mh"
#include "stm_builtin.mh"
#include "store.mh"
#include "string.mh"
#include "table_builtin.mh"
#include "time.mh"
#include "type_desc.mh"
#include "version_array.mh"

#line 327 "dir.m"
MR_String 
ML_dir_this_directory(void)
#line 327 "dir.m"
{
#line 327 "dir.m"
	MR_String ret_value;
	ret_value = (MR_String)mercury__dir__this_directory_0_f_0();
	return ret_value;
}

#line 782 "dir.m"
MR_String 
ML_make_path_name(
#line 782 "dir.m"
  MR_String mercury__dir__DirName_4,
#line 782 "dir.m"
  MR_String mercury__dir__FileName_5)
#line 782 "dir.m"
{
#line 782 "dir.m"
	MR_String ret_value;
	ret_value = (MR_String)mercury__dir__make_path_name_2_f_0((MR_String) mercury__dir__DirName_4, (MR_String) mercury__dir__FileName_5);
	return ret_value;
}

#line 1217 "dir.m"
MR_Word 
ML_make_mkdir_res_ok(void)
#line 1217 "dir.m"
{
#line 1217 "dir.m"
	MR_Word ret_value;
	ret_value = (MR_Word)mercury__dir__make_mkdir_res_ok_0_f_0();
	return ret_value;
}

#line 1230 "dir.m"
void 
ML_make_mkdir_res_error(
#line 1230 "dir.m"
  MR_Integer mercury__dir__Error_5,
#line 1230 "dir.m"
  MR_Word * mercury__dir__HeadVar__2_2)
#line 1230 "dir.m"
{
#line 1230 "dir.m"
	MR_Box mercury__dir__boxed_Error_5;
	MR_MAYBE_BOX_FOREIGN_TYPE(MR_Integer, mercury__dir__Error_5, mercury__dir__boxed_Error_5);
	mercury__dir__make_mkdir_res_error_4_p_0(mercury__dir__boxed_Error_5, (MR_Word *) mercury__dir__HeadVar__2_2);
}

#line 1245 "dir.m"
void 
ML_make_mkdir_res_exists(
#line 1245 "dir.m"
  MR_Integer mercury__dir__Error_6,
#line 1245 "dir.m"
  MR_String mercury__dir__DirName_7,
#line 1245 "dir.m"
  MR_Word * mercury__dir__Res_8)
#line 1245 "dir.m"
{
#line 1245 "dir.m"
	MR_Box mercury__dir__boxed_Error_6;
	MR_MAYBE_BOX_FOREIGN_TYPE(MR_Integer, mercury__dir__Error_6, mercury__dir__boxed_Error_6);
	mercury__dir__make_mkdir_res_exists_5_p_0(mercury__dir__boxed_Error_6, (MR_String) mercury__dir__DirName_7, (MR_Word *) mercury__dir__Res_8);
}

#line 1268 "dir.m"
void 
ML_check_dir_accessibility(
#line 1268 "dir.m"
  MR_String mercury__dir__DirName_5,
#line 1268 "dir.m"
  MR_Word * mercury__dir__Res_6)
#line 1268 "dir.m"
{
#line 1268 "dir.m"
	mercury__dir__check_dir_accessibility_4_p_0((MR_String) mercury__dir__DirName_5, (MR_Word *) mercury__dir__Res_6);
}

#line 1713 "dir.m"
void 
ML_check_dir_readable(
#line 1713 "dir.m"
  MR_String mercury__dir__DirName_6,
#line 1713 "dir.m"
  MR_Integer * mercury__dir__IsReadable_7,
#line 1713 "dir.m"
  MR_Word * mercury__dir__Result_8)
#line 1713 "dir.m"
{
#line 1713 "dir.m"
	mercury__dir__check_dir_readable_5_p_0((MR_String) mercury__dir__DirName_6, (MR_Integer *) mercury__dir__IsReadable_7, (MR_Word *) mercury__dir__Result_8);
}

#line 1758 "dir.m"
void 
ML_dir_read_first_entry(
#line 1758 "dir.m"
  ML_DIR_STREAM mercury__dir__Dir_5,
#line 1758 "dir.m"
  MR_Word * mercury__dir__Result_6)
#line 1758 "dir.m"
{
#line 1758 "dir.m"
	MR_Box mercury__dir__boxed_Dir_5;
	MR_MAYBE_BOX_FOREIGN_TYPE(ML_DIR_STREAM, mercury__dir__Dir_5, mercury__dir__boxed_Dir_5);
	mercury__dir__read_first_entry_4_p_0(mercury__dir__boxed_Dir_5, (MR_Word *) mercury__dir__Result_6);
}

#line 1781 "dir.m"
void 
ML_make_win32_dir_open_result_ok(
#line 1781 "dir.m"
  ML_DIR_STREAM mercury__dir__Dir_6,
#line 1781 "dir.m"
  MR_String mercury__dir__FirstFile0_7,
#line 1781 "dir.m"
  MR_Word * mercury__dir__Result_8)
#line 1781 "dir.m"
{
#line 1781 "dir.m"
	MR_Box mercury__dir__boxed_Dir_6;
	MR_MAYBE_BOX_FOREIGN_TYPE(ML_DIR_STREAM, mercury__dir__Dir_6, mercury__dir__boxed_Dir_6);
	mercury__dir__make_win32_dir_open_result_ok_5_p_0(mercury__dir__boxed_Dir_6, (MR_String) mercury__dir__FirstFile0_7, (MR_Word *) mercury__dir__Result_8);
}

#line 1811 "dir.m"
MR_Word 
ML_make_dir_open_result_eof(void)
#line 1811 "dir.m"
{
#line 1811 "dir.m"
	MR_Word ret_value;
	ret_value = (MR_Word)mercury__dir__make_dir_open_result_eof_0_f_0();
	return ret_value;
}

#line 1822 "dir.m"
void 
ML_make_dir_open_result_error(
#line 1822 "dir.m"
  MR_Integer mercury__dir__Error_5,
#line 1822 "dir.m"
  MR_Word * mercury__dir__HeadVar__2_2)
#line 1822 "dir.m"
{
#line 1822 "dir.m"
	MR_Box mercury__dir__boxed_Error_5;
	MR_MAYBE_BOX_FOREIGN_TYPE(MR_Integer, mercury__dir__Error_5, mercury__dir__boxed_Error_5);
	mercury__dir__make_dir_open_result_error_4_p_0(mercury__dir__boxed_Error_5, (MR_Word *) mercury__dir__HeadVar__2_2);
}


#line 848 "dir.c"
static const MR_VA_PseudoTypeInfo_Struct8 mercury__dir____vpti_pred_8__plain_builtin__type_ctor_info_string_0__plain_builtin__type_ctor_info_string_0__plain_io__type_ctor_info_file_type_0__plain_bool__type_ctor_info_bool_0__pseudo_1__pseudo_1__plain_io__type_ctor_info_state_0__plain_io__type_ctor_info_state_0 = {
  &mercury__builtin__builtin__type_ctor_info_pred_0,
  (MR_Integer) 8,
  {
    (MR_PseudoTypeInfo) &mercury__builtin__builtin__type_ctor_info_string_0,
    (MR_PseudoTypeInfo) &mercury__builtin__builtin__type_ctor_info_string_0,
    (MR_PseudoTypeInfo) &mercury__io__io__type_ctor_info_file_type_0,
    (MR_PseudoTypeInfo) &mercury__bool__bool__type_ctor_info_bool_0,
    (MR_PseudoTypeInfo) (MR_Integer) 1,
    (MR_PseudoTypeInfo) (MR_Integer) 1,
    (MR_PseudoTypeInfo) &mercury__io__io__type_ctor_info_state_0,
    (MR_PseudoTypeInfo) &mercury__io__io__type_ctor_info_state_0
  }
};

#line 864 "dir.c"
static const MR_FA_PseudoTypeInfo_Struct1 mercury__dir__list__pti_list_1__plain_io__type_ctor_info_file_id_0 = {
  &mercury__list__list__type_ctor_info_list_1,
  {
    (MR_PseudoTypeInfo) &mercury__io__io__type_ctor_info_file_id_0
  }
};

#line 872 "dir.c"
static const MR_FA_PseudoTypeInfo_Struct1 mercury__dir__io__pti_maybe_partial_res_1__pseudo_1 = {
  &mercury__io__io__type_ctor_info_maybe_partial_res_1,
  {
    (MR_PseudoTypeInfo) (MR_Integer) 1
  }
};

#line 880 "dir.c"
static const MR_VA_PseudoTypeInfo_Struct3 mercury__dir____vpti_tuple_3__pseudo_io__pti_maybe_partial_res_1__pseudo_1__plain_bool__type_ctor_info_bool_0__plain_dir__type_ctor_info_stream_0 = {
  &mercury__builtin__builtin__type_ctor_info_tuple_0,
  (MR_Integer) 3,
  {
    (MR_PseudoTypeInfo) &mercury__dir__io__pti_maybe_partial_res_1__pseudo_1,
    (MR_PseudoTypeInfo) &mercury__bool__bool__type_ctor_info_bool_0,
    (MR_PseudoTypeInfo) &mercury__dir__dir__type_ctor_info_stream_0
  }
};

#line 891 "dir.c"
static const MR_VA_PseudoTypeInfo_Struct3 mercury__dir____vpti_pred_3__pseudo_1__plain_io__type_ctor_info_state_0__plain_io__type_ctor_info_state_0 = {
  &mercury__builtin__builtin__type_ctor_info_pred_0,
  (MR_Integer) 3,
  {
    (MR_PseudoTypeInfo) (MR_Integer) 1,
    (MR_PseudoTypeInfo) &mercury__io__io__type_ctor_info_state_0,
    (MR_PseudoTypeInfo) &mercury__io__io__type_ctor_info_state_0
  }
};

#line 902 "dir.c"
static const MR_VA_PseudoTypeInfo_Struct2 mercury__dir____vpti_tuple_2__pseudo_1__plain_io__type_ctor_info_state_0 = {
  &mercury__builtin__builtin__type_ctor_info_tuple_0,
  (MR_Integer) 2,
  {
    (MR_PseudoTypeInfo) (MR_Integer) 1,
    (MR_PseudoTypeInfo) &mercury__io__io__type_ctor_info_state_0
  }
};

#line 912 "dir.c"
const MR_TypeCtorInfo_Struct mercury__dir__dir__type_ctor_info_foldl_pred_1 = {
  (MR_Integer) 1,
  (MR_Integer) 15,
  (MR_Integer) -1,
  mercury__private_builtin__MR_TYPECTOR_REP_EQUIV,
  ((MR_Box) (mercury__dir____Unify____foldl_pred_1_0_10001)),
  ((MR_Box) (mercury__dir____Compare____foldl_pred_1_0_10001)),
  (MR_String) "dir",
  (MR_String) "foldl_pred",
  {     NULL },
  {     (MR_PseudoTypeInfo) &mercury__dir____vpti_pred_8__plain_builtin__type_ctor_info_string_0__plain_builtin__type_ctor_info_string_0__plain_io__type_ctor_info_file_type_0__plain_bool__type_ctor_info_bool_0__pseudo_1__pseudo_1__plain_io__type_ctor_info_state_0__plain_io__type_ctor_info_state_0 },
  (MR_Integer) -1,
  (MR_Integer) 0,
  NULL
};

#line 929 "dir.c"
const MR_TypeCtorInfo_Struct mercury__dir__dir__type_ctor_info_stream_0 = {
  (MR_Integer) 0,
  (MR_Integer) 15,
  (MR_Integer) -1,
  mercury__private_builtin__MR_TYPECTOR_REP_FOREIGN,
  ((MR_Box) (mercury__dir____Unify____stream_0_0_10001)),
  ((MR_Box) (mercury__dir____Compare____stream_0_0_10001)),
  (MR_String) "dir",
  (MR_String) "stream",
  {     NULL },
  {     NULL },
  (MR_Integer) -1,
  (MR_Integer) 0,
  NULL
};

#line 946 "dir.c"
static MR_bool MR_CALL 
mercury__dir____Unify____foldl_pred_1_0_10001(
#line 949 "dir.c"
  MR_Box mercury__dir__wrapper_arg_1,
#line 951 "dir.c"
  MR_Box mercury__dir__wrapper_arg_2,
#line 953 "dir.c"
  MR_Box mercury__dir__wrapper_arg_3)
#line 955 "dir.c"
{
#line 957 "dir.c"
  {
#line 959 "dir.c"
    MR_bool mercury__dir__succeeded;

#line 962 "dir.c"
    {
#line 964 "dir.c"
      mercury__dir__succeeded = mercury__dir____Unify____foldl_pred_1_0(((MR_Word) mercury__dir__wrapper_arg_1), ((MR_Word) mercury__dir__wrapper_arg_2), ((MR_Word) mercury__dir__wrapper_arg_3));
    }
#line 967 "dir.c"
    return mercury__dir__succeeded;
#line 969 "dir.c"
  }
#line 971 "dir.c"
}

#line 974 "dir.c"
static void MR_CALL 
mercury__dir____Compare____foldl_pred_1_0_10001(
#line 977 "dir.c"
  MR_Box mercury__dir__wrapper_arg_1,
#line 979 "dir.c"
  MR_Box * mercury__dir__wrapper_arg_2,
#line 981 "dir.c"
  MR_Box mercury__dir__wrapper_arg_3,
#line 983 "dir.c"
  MR_Box mercury__dir__wrapper_arg_4)
#line 985 "dir.c"
{
#line 987 "dir.c"
  {
#line 989 "dir.c"
    MR_Word mercury__dir__conv0_HeadVar__1_1;

#line 992 "dir.c"
    {
#line 994 "dir.c"
      mercury__dir____Compare____foldl_pred_1_0(((MR_Word) mercury__dir__wrapper_arg_1), &mercury__dir__conv0_HeadVar__1_1, ((MR_Word) mercury__dir__wrapper_arg_3), ((MR_Word) mercury__dir__wrapper_arg_4));
    }
#line 997 "dir.c"
    *mercury__dir__wrapper_arg_2 = ((MR_Box) (mercury__dir__conv0_HeadVar__1_1));
#line 999 "dir.c"
  }
#line 1001 "dir.c"
}

#line 1004 "dir.c"
static MR_bool MR_CALL 
mercury__dir____Unify____stream_0_0_10001(
#line 1007 "dir.c"
  MR_Box mercury__dir__wrapper_arg_1,
#line 1009 "dir.c"
  MR_Box mercury__dir__wrapper_arg_2)
#line 1011 "dir.c"
{
#line 1013 "dir.c"
  {
#line 1015 "dir.c"
    MR_bool mercury__dir__succeeded;

#line 1018 "dir.c"
    {
#line 1020 "dir.c"
      mercury__dir__succeeded = mercury__dir____Unify____stream_0_0(((MR_Box) mercury__dir__wrapper_arg_1), ((MR_Box) mercury__dir__wrapper_arg_2));
    }
#line 1023 "dir.c"
    return mercury__dir__succeeded;
#line 1025 "dir.c"
  }
#line 1027 "dir.c"
}

#line 1030 "dir.c"
static void MR_CALL 
mercury__dir____Compare____stream_0_0_10001(
#line 1033 "dir.c"
  MR_Box * mercury__dir__wrapper_arg_1,
#line 1035 "dir.c"
  MR_Box mercury__dir__wrapper_arg_2,
#line 1037 "dir.c"
  MR_Box mercury__dir__wrapper_arg_3)
#line 1039 "dir.c"
{
#line 1041 "dir.c"
  {
#line 1043 "dir.c"
    MR_Word mercury__dir__conv0_HeadVar__1_1;

#line 1046 "dir.c"
    {
#line 1048 "dir.c"
      mercury__dir____Compare____stream_0_0(&mercury__dir__conv0_HeadVar__1_1, ((MR_Box) mercury__dir__wrapper_arg_2), ((MR_Box) mercury__dir__wrapper_arg_3));
    }
#line 1051 "dir.c"
    *mercury__dir__wrapper_arg_1 = ((MR_Box) (mercury__dir__conv0_HeadVar__1_1));
#line 1053 "dir.c"
  }
#line 1055 "dir.c"
}

#line 102 "exception.opt"
static void MR_CALL 
mercury__dir__f_85_110_117_115_101_100_65_114_103_115_95_95_112_114_101_100_95_95_116_114_121_95_105_111_95_95_104_111_53_95_95_91_49_44_32_50_44_32_51_44_32_52_44_32_53_44_32_54_44_32_55_44_32_56_44_32_57_44_32_49_48_44_32_49_49_44_32_49_50_44_32_49_51_93_95_48_4_p_in__exception_0_1(
#line 102 "exception.opt"
  MR_Box mercury__dir__closure_arg,
#line 102 "exception.opt"
  MR_Box * mercury__dir__wrapper_arg_1)
#line 102 "exception.opt"
{
#line 102 "exception.opt"
  {
#line 102 "exception.opt"
    MR_Box mercury__dir__closure = mercury__dir__closure_arg;
#line 102 "exception.opt"
    MR_Tuple mercury__dir__conv0_V_3_6;

#line 102 "exception.opt"
    {
#line 102 "exception.opt"
      mercury__exception__unsafe_call_io_goal_3_p_0(((MR_Word) (MR_hl_field(MR_mktag(0), mercury__dir__closure, (MR_Integer) 3))), ((MR_Word) (MR_hl_field(MR_mktag(0), mercury__dir__closure, (MR_Integer) 4))), &mercury__dir__conv0_V_3_6);
    }
#line 102 "exception.opt"
    *mercury__dir__wrapper_arg_1 = ((MR_Box) (mercury__dir__conv0_V_3_6));
#line 102 "exception.opt"
  }
#line 102 "exception.opt"
}

#line 52 "exception.int"
static void MR_CALL 
mercury__dir__f_85_110_117_115_101_100_65_114_103_115_95_95_112_114_101_100_95_95_116_114_121_95_105_111_95_95_104_111_53_95_95_91_49_44_32_50_44_32_51_44_32_52_44_32_53_44_32_54_44_32_55_44_32_56_44_32_57_44_32_49_48_44_32_49_49_44_32_49_50_44_32_49_51_93_95_48_4_p_in__exception_0(
#line 52 "exception.int"
  MR_Word mercury__dir__TypeInfo_for_T_16,
#line 52 "exception.int"
  MR_Word mercury__dir__V_5_5,
#line 52 "exception.int"
  MR_Word * mercury__dir__V_6_6)
#line 52 "exception.int"
{
#line 101 "exception.opt"
  {
#line 101 "exception.opt"
    MR_bool mercury__dir__succeeded;
#line 101 "exception.opt"
    MR_Word mercury__dir__TypeCtorInfo_18_18;
#line 101 "exception.opt"
    MR_Word mercury__dir__TypeCtorInfo_19_19;
#line 101 "exception.opt"
    MR_Word mercury__dir__TypeInfo_21_21;
#line 101 "exception.opt"
    MR_Word mercury__dir__V_13_9;
#line 101 "exception.opt"
    MR_Word mercury__dir__V_9_11;
#line 103 "exception.opt"
    MR_Word mercury__dir__conv1_V_9_11;

#line 102 "exception.opt"
    {
#line 102 "exception.opt"
      mercury__dir__V_13_9 = (MR_Word) MR_new_object(MR_Word, ((MR_Integer) 6 * sizeof(MR_Word)), NULL, NULL);
#line 102 "exception.opt"
      MR_hl_field(MR_mktag(0), mercury__dir__V_13_9, 0) = ((MR_Box) (&mercury__dir_scalar_common_8[0]));
#line 102 "exception.opt"
      MR_hl_field(MR_mktag(0), mercury__dir__V_13_9, 1) = ((MR_Box) (mercury__dir__f_85_110_117_115_101_100_65_114_103_115_95_95_112_114_101_100_95_95_116_114_121_95_105_111_95_95_104_111_53_95_95_91_49_44_32_50_44_32_51_44_32_52_44_32_53_44_32_54_44_32_55_44_32_56_44_32_57_44_32_49_48_44_32_49_49_44_32_49_50_44_32_49_51_93_95_48_4_p_in__exception_0_1));
#line 102 "exception.opt"
      MR_hl_field(MR_mktag(0), mercury__dir__V_13_9, 2) = ((MR_Box) (MR_Word) ((MR_Integer) 3));
#line 102 "exception.opt"
      MR_hl_field(MR_mktag(0), mercury__dir__V_13_9, 3) = ((MR_Box) (mercury__dir__TypeInfo_for_T_16));
#line 102 "exception.opt"
      MR_hl_field(MR_mktag(0), mercury__dir__V_13_9, 4) = ((MR_Box) (mercury__dir__V_5_5));
#line 102 "exception.opt"
      MR_hl_field(MR_mktag(0), mercury__dir__V_13_9, 5) = NULL;
#line 102 "exception.opt"
    }
#line 1132 "dir.c"
    mercury__dir__TypeCtorInfo_19_19 = (MR_Word) &mercury__builtin__builtin__type_ctor_info_tuple_0;
#line 1134 "dir.c"
    mercury__dir__TypeCtorInfo_18_18 = (MR_Word) &mercury__io__io__type_ctor_info_state_0;
#line 1136 "dir.c"
    {
#line 1138 "dir.c"
      mercury__dir__TypeInfo_21_21 = (MR_Word) MR_new_object(MR_Word, ((MR_Integer) 4 * sizeof(MR_Word)), NULL, NULL);
#line 1140 "dir.c"
      MR_hl_field(MR_mktag(0), mercury__dir__TypeInfo_21_21, 0) = ((MR_Box) (mercury__dir__TypeCtorInfo_19_19));
#line 1142 "dir.c"
      MR_hl_field(MR_mktag(0), mercury__dir__TypeInfo_21_21, 1) = ((MR_Box) ((MR_Integer) 2));
#line 1144 "dir.c"
      MR_hl_field(MR_mktag(0), mercury__dir__TypeInfo_21_21, 2) = ((MR_Box) (mercury__dir__TypeInfo_for_T_16));
#line 1146 "dir.c"
      MR_hl_field(MR_mktag(0), mercury__dir__TypeInfo_21_21, 3) = ((MR_Box) (mercury__dir__TypeCtorInfo_18_18));
#line 1148 "dir.c"
    }
#line 103 "exception.opt"
    {
#line 103 "exception.opt"
      mercury__exception__try_2_p_0(mercury__dir__TypeInfo_21_21, (MR_Word) mercury__dir__V_13_9, &mercury__dir__conv1_V_9_11);
    }
#line 103 "exception.opt"
    mercury__dir__V_9_11 = (MR_Word) mercury__dir__conv1_V_9_11;
#line 109 "exception.opt"
    if (((MR_tag((MR_Word) mercury__dir__V_9_11)) == (MR_mktag((MR_Integer) 2))))
#line 110 "exception.opt"
      {
#line 111 "exception.opt"
        *mercury__dir__V_6_6 = (MR_Word) mercury__dir__V_9_11;
#line 112 "exception.opt"
        mercury__private_builtin__dummy_var = mercury__private_builtin__dummy_var;
#line 110 "exception.opt"
      }
#line 109 "exception.opt"
    else
#line 105 "exception.opt"
      {
#line 105 "exception.opt"
        MR_Tuple mercury__dir__V_14_12 = ((MR_Tuple) (MR_hl_field(MR_mktag(1), mercury__dir__V_9_11, (MR_Integer) 0)));
#line 105 "exception.opt"
        MR_Tuple mercury__dir__V_10_13 = ((MR_Tuple) (MR_hl_field(MR_mktag(0), mercury__dir__V_14_12, (MR_Integer) 0)));

#line 107 "exception.opt"
        {
#line 107 "exception.opt"
          MR_Word base;
#line 107 "exception.opt"
          base = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 1 * sizeof(MR_Word)), NULL, NULL));
#line 107 "exception.opt"
          *mercury__dir__V_6_6 = base;
#line 107 "exception.opt"
          MR_hl_field(MR_mktag(1), base, 0) = ((MR_Box) (mercury__dir__V_10_13));
#line 107 "exception.opt"
        }
#line 108 "exception.opt"
        mercury__private_builtin__dummy_var = mercury__private_builtin__dummy_var;
#line 105 "exception.opt"
      }
#line 101 "exception.opt"
  }
#line 52 "exception.int"
}

#line 311 "list.int"
static MR_Word MR_CALL 
mercury__dir__f_85_110_117_115_101_100_65_114_103_115_95_95_102_117_110_99_95_95_109_97_112_95_95_104_111_51_95_95_91_50_93_95_48_2_f_in__list_0(
#line 311 "list.int"
  MR_Word mercury__dir__V_12_12,
#line 311 "list.int"
  MR_Word mercury__dir__HeadVar__2_2)
#line 311 "list.int"
{
#line 610 "list.opt"
  {
#line 610 "list.opt"
    MR_bool mercury__dir__succeeded;
#line 610 "list.opt"
    MR_Word mercury__dir__HeadVar__3_3;

#line 610 "list.opt"
    if ((mercury__dir__HeadVar__2_2 == ((MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0)))))
#line 610 "list.opt"
      mercury__dir__HeadVar__3_3 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 610 "list.opt"
    else
#line 611 "list.opt"
      {
#line 611 "list.opt"
        MR_Word mercury__dir__V_6_6 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__HeadVar__2_2, (MR_Integer) 0)));
#line 611 "list.opt"
        MR_Word mercury__dir__V_7_7 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__HeadVar__2_2, (MR_Integer) 1)));
#line 611 "list.opt"
        MR_Word mercury__dir__V_8_8;
#line 611 "list.opt"
        MR_Word mercury__dir__V_9_9;

#line 2051 "dir.m"
        {
#line 2051 "dir.m"
          mercury__dir__V_8_8 = mercury__dir__f_85_110_117_115_101_100_65_114_103_115_95_95_102_117_110_99_95_95_109_97_112_95_95_104_111_49_95_95_91_50_93_95_48_2_f_in__list_0(mercury__dir__V_6_6, mercury__dir__V_12_12);
        }
#line 613 "list.opt"
        {
#line 613 "list.opt"
          mercury__dir__V_9_9 = mercury__dir__f_85_110_117_115_101_100_65_114_103_115_95_95_102_117_110_99_95_95_109_97_112_95_95_104_111_51_95_95_91_50_93_95_48_2_f_in__list_0(mercury__dir__V_12_12, mercury__dir__V_7_7);
        }
#line 611 "list.opt"
        {
#line 611 "list.opt"
          mercury__dir__HeadVar__3_3 = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL));
#line 611 "list.opt"
          MR_hl_field(MR_mktag(1), mercury__dir__HeadVar__3_3, 0) = ((MR_Box) (mercury__dir__V_8_8));
#line 611 "list.opt"
          MR_hl_field(MR_mktag(1), mercury__dir__HeadVar__3_3, 1) = ((MR_Box) (mercury__dir__V_9_9));
#line 611 "list.opt"
        }
#line 611 "list.opt"
      }
#line 610 "list.opt"
    return mercury__dir__HeadVar__3_3;
#line 610 "list.opt"
  }
#line 311 "list.int"
}

#line 311 "list.int"
static MR_Word MR_CALL 
mercury__dir__f_85_110_117_115_101_100_65_114_103_115_95_95_102_117_110_99_95_95_109_97_112_95_95_104_111_50_95_95_91_50_93_95_48_2_f_in__list_0(
#line 311 "list.int"
  MR_Char mercury__dir__V_12_12,
#line 311 "list.int"
  MR_Word mercury__dir__HeadVar__2_2)
#line 311 "list.int"
{
#line 610 "list.opt"
  {
#line 610 "list.opt"
    MR_bool mercury__dir__succeeded;
#line 610 "list.opt"
    MR_Word mercury__dir__HeadVar__3_3;

#line 610 "list.opt"
    if ((mercury__dir__HeadVar__2_2 == ((MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0)))))
#line 610 "list.opt"
      mercury__dir__HeadVar__3_3 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 610 "list.opt"
    else
#line 611 "list.opt"
      {
#line 611 "list.opt"
        MR_Word mercury__dir__TypeCtorInfo_8_17 = (MR_Word) &mercury__builtin__builtin__type_ctor_info_character_0;
#line 611 "list.opt"
        MR_Word mercury__dir__V_6_6 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__HeadVar__2_2, (MR_Integer) 0)));
#line 611 "list.opt"
        MR_Word mercury__dir__V_7_7 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__HeadVar__2_2, (MR_Integer) 1)));
#line 611 "list.opt"
        MR_Word mercury__dir__V_8_8;
#line 611 "list.opt"
        MR_Word mercury__dir__V_9_9;
#line 611 "list.opt"
        MR_Word mercury__dir__V_15_15;
#line 611 "list.opt"
        MR_Word mercury__dir__V_16_16 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));

#line 2055 "dir.m"
        {
#line 2055 "dir.m"
          mercury__dir__V_15_15 = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL));
#line 2055 "dir.m"
          MR_hl_field(MR_mktag(1), mercury__dir__V_15_15, 0) = ((MR_Box) (MR_Word) (mercury__dir__V_12_12));
#line 2055 "dir.m"
          MR_hl_field(MR_mktag(1), mercury__dir__V_15_15, 1) = ((MR_Box) (mercury__dir__V_16_16));
#line 2055 "dir.m"
        }
#line 113 "list.opt"
        {
#line 113 "list.opt"
          mercury__list__append_3_p_1(mercury__dir__TypeCtorInfo_8_17, mercury__dir__V_6_6, mercury__dir__V_15_15, &mercury__dir__V_8_8);
        }
#line 613 "list.opt"
        {
#line 613 "list.opt"
          mercury__dir__V_9_9 = mercury__dir__f_85_110_117_115_101_100_65_114_103_115_95_95_102_117_110_99_95_95_109_97_112_95_95_104_111_50_95_95_91_50_93_95_48_2_f_in__list_0(mercury__dir__V_12_12, mercury__dir__V_7_7);
        }
#line 611 "list.opt"
        {
#line 611 "list.opt"
          mercury__dir__HeadVar__3_3 = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL));
#line 611 "list.opt"
          MR_hl_field(MR_mktag(1), mercury__dir__HeadVar__3_3, 0) = ((MR_Box) (mercury__dir__V_8_8));
#line 611 "list.opt"
          MR_hl_field(MR_mktag(1), mercury__dir__HeadVar__3_3, 1) = ((MR_Box) (mercury__dir__V_9_9));
#line 611 "list.opt"
        }
#line 611 "list.opt"
      }
#line 610 "list.opt"
    return mercury__dir__HeadVar__3_3;
#line 610 "list.opt"
  }
#line 311 "list.int"
}

#line 311 "list.int"
static MR_Word MR_CALL 
mercury__dir__f_85_110_117_115_101_100_65_114_103_115_95_95_102_117_110_99_95_95_109_97_112_95_95_104_111_49_95_95_91_50_93_95_48_2_f_in__list_0(
#line 311 "list.int"
  MR_Word mercury__dir__V_12_12,
#line 311 "list.int"
  MR_Word mercury__dir__HeadVar__2_2)
#line 311 "list.int"
{
#line 610 "list.opt"
  {
#line 610 "list.opt"
    MR_bool mercury__dir__succeeded;
#line 610 "list.opt"
    MR_Word mercury__dir__HeadVar__3_3;

#line 610 "list.opt"
    if ((mercury__dir__HeadVar__2_2 == ((MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0)))))
#line 610 "list.opt"
      mercury__dir__HeadVar__3_3 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 610 "list.opt"
    else
#line 611 "list.opt"
      {
#line 611 "list.opt"
        MR_Word mercury__dir__TypeCtorInfo_10_19 = (MR_Word) &mercury__builtin__builtin__type_ctor_info_character_0;
#line 611 "list.opt"
        MR_Word mercury__dir__V_6_6 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__HeadVar__2_2, (MR_Integer) 0)));
#line 611 "list.opt"
        MR_Word mercury__dir__V_7_7 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__HeadVar__2_2, (MR_Integer) 1)));
#line 611 "list.opt"
        MR_Word mercury__dir__V_8_8;
#line 611 "list.opt"
        MR_Word mercury__dir__V_9_9;

#line 113 "list.opt"
        {
#line 113 "list.opt"
          mercury__list__append_3_p_1(mercury__dir__TypeCtorInfo_10_19, mercury__dir__V_12_12, mercury__dir__V_6_6, &mercury__dir__V_8_8);
        }
#line 613 "list.opt"
        {
#line 613 "list.opt"
          mercury__dir__V_9_9 = mercury__dir__f_85_110_117_115_101_100_65_114_103_115_95_95_102_117_110_99_95_95_109_97_112_95_95_104_111_49_95_95_91_50_93_95_48_2_f_in__list_0(mercury__dir__V_12_12, mercury__dir__V_7_7);
        }
#line 611 "list.opt"
        {
#line 611 "list.opt"
          mercury__dir__HeadVar__3_3 = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL));
#line 611 "list.opt"
          MR_hl_field(MR_mktag(1), mercury__dir__HeadVar__3_3, 0) = ((MR_Box) (mercury__dir__V_8_8));
#line 611 "list.opt"
          MR_hl_field(MR_mktag(1), mercury__dir__HeadVar__3_3, 1) = ((MR_Box) (mercury__dir__V_9_9));
#line 611 "list.opt"
        }
#line 611 "list.opt"
      }
#line 610 "list.opt"
    return mercury__dir__HeadVar__3_3;
#line 610 "list.opt"
  }
#line 311 "list.int"
}

#line 18 "ops.opt"
static MR_Integer MR_CALL 
mercury__dir__f_85_110_117_115_101_100_65_114_103_115_95_95_102_117_110_99_95_95_67_108_97_115_115_77_101_116_104_111_100_95_102_111_114_95_111_112_115_95_95_111_112_95_116_97_98_108_101_95_95_95_95_111_112_115_95_95_109_101_114_99_117_114_121_95_111_112_95_116_97_98_108_101_95_95_97_114_105_116_121_48_95_95_95_95_95_95_111_112_115_95_95_109_97_120_95_112_114_105_111_114_105_116_121_95_49_95_95_91_49_93_95_48_1_f_in__ops_0(void)
#line 18 "ops.opt"
{
#line 47 "ops.opt"
  {
#line 47 "ops.opt"
    MR_bool mercury__dir__succeeded;

#line 47 "ops.opt"
    return (MR_Integer) 1200;
#line 47 "ops.opt"
  }
#line 18 "ops.opt"
}

#line 311 "list.int"
static MR_Word MR_CALL 
mercury__dir__map__ho9_2_f_in__list_0(
#line 311 "list.int"
  MR_Word mercury__dir__HeadVar__2_2)
#line 311 "list.int"
{
#line 610 "list.opt"
  {
#line 610 "list.opt"
    MR_bool mercury__dir__succeeded;
#line 610 "list.opt"
    MR_Word mercury__dir__HeadVar__3_3;

#line 610 "list.opt"
    if ((mercury__dir__HeadVar__2_2 == ((MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0)))))
#line 610 "list.opt"
      mercury__dir__HeadVar__3_3 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 610 "list.opt"
    else
#line 611 "list.opt"
      {
#line 611 "list.opt"
        MR_Word mercury__dir__V_6_6 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__HeadVar__2_2, (MR_Integer) 0)));
#line 611 "list.opt"
        MR_Word mercury__dir__V_7_7 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__HeadVar__2_2, (MR_Integer) 1)));
#line 611 "list.opt"
        MR_String mercury__dir__V_8_8;
#line 611 "list.opt"
        MR_Word mercury__dir__V_9_9;

#line 500 "string.opt"
        {
#line 500 "string.opt"
          mercury__string__from_char_list_2_p_0(mercury__dir__V_6_6, &mercury__dir__V_8_8);
        }
#line 613 "list.opt"
        {
#line 613 "list.opt"
          mercury__dir__V_9_9 = mercury__dir__map__ho9_2_f_in__list_0(mercury__dir__V_7_7);
        }
#line 611 "list.opt"
        {
#line 611 "list.opt"
          mercury__dir__HeadVar__3_3 = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL));
#line 611 "list.opt"
          MR_hl_field(MR_mktag(1), mercury__dir__HeadVar__3_3, 0) = ((MR_Box) (mercury__dir__V_8_8));
#line 611 "list.opt"
          MR_hl_field(MR_mktag(1), mercury__dir__HeadVar__3_3, 1) = ((MR_Box) (mercury__dir__V_9_9));
#line 611 "list.opt"
        }
#line 611 "list.opt"
      }
#line 610 "list.opt"
    return mercury__dir__HeadVar__3_3;
#line 610 "list.opt"
  }
#line 311 "list.int"
}

#line 612 "list.int"
static void MR_CALL 
mercury__dir__takewhile__ho8_4_p_in__list_0(
#line 612 "list.int"
  MR_Word mercury__dir__HeadVar__2_2,
#line 612 "list.int"
  MR_Word * mercury__dir__HeadVar__3_3,
#line 612 "list.int"
  MR_Word * mercury__dir__HeadVar__4_4)
#line 612 "list.int"
{
#line 1125 "list.opt"
  {
#line 1125 "list.opt"
    MR_bool mercury__dir__succeeded;

#line 1125 "list.opt"
    if ((mercury__dir__HeadVar__2_2 == ((MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0)))))
#line 1125 "list.opt"
      {
#line 1125 "list.opt"
        *mercury__dir__HeadVar__3_3 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 1125 "list.opt"
        *mercury__dir__HeadVar__4_4 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 1125 "list.opt"
      }
#line 1125 "list.opt"
    else
#line 1126 "list.opt"
      {
#line 1126 "list.opt"
        MR_Char mercury__dir__V_7_7 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__HeadVar__2_2, (MR_Integer) 0)));
#line 1126 "list.opt"
        MR_Word mercury__dir__V_8_8 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__HeadVar__2_2, (MR_Integer) 1)));

#line 316 "dir.m"
        {
#line 316 "dir.m"
          mercury__dir__succeeded = mercury__dir__is_directory_separator_1_p_0(mercury__dir__V_7_7);
        }
#line 17 "std_util.opt"
        mercury__dir__succeeded = !(mercury__dir__succeeded);
#line 1132 "list.opt"
        if (mercury__dir__succeeded)
#line 1130 "list.opt"
          {
#line 1130 "list.opt"
            MR_Word mercury__dir__V_11_11;

#line 1131 "list.opt"
            {
#line 1131 "list.opt"
              mercury__dir__takewhile__ho8_4_p_in__list_0(mercury__dir__V_8_8, &mercury__dir__V_11_11, mercury__dir__HeadVar__4_4);
            }
#line 1130 "list.opt"
            {
#line 1130 "list.opt"
              MR_Word base;
#line 1130 "list.opt"
              base = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL));
#line 1130 "list.opt"
              *mercury__dir__HeadVar__3_3 = base;
#line 1130 "list.opt"
              MR_hl_field(MR_mktag(1), base, 0) = ((MR_Box) (MR_Word) (mercury__dir__V_7_7));
#line 1130 "list.opt"
              MR_hl_field(MR_mktag(1), base, 1) = ((MR_Box) (mercury__dir__V_11_11));
#line 1130 "list.opt"
            }
#line 1130 "list.opt"
          }
#line 1132 "list.opt"
        else
#line 1133 "list.opt"
          {
#line 1133 "list.opt"
            *mercury__dir__HeadVar__3_3 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 1134 "list.opt"
            *mercury__dir__HeadVar__4_4 = mercury__dir__HeadVar__2_2;
#line 1133 "list.opt"
          }
#line 1126 "list.opt"
      }
#line 1125 "list.opt"
  }
#line 612 "list.int"
}

#line 612 "list.int"
static void MR_CALL 
mercury__dir__takewhile__ho7_4_p_in__list_0(
#line 612 "list.int"
  MR_Word mercury__dir__HeadVar__2_2,
#line 612 "list.int"
  MR_Word * mercury__dir__HeadVar__3_3,
#line 612 "list.int"
  MR_Word * mercury__dir__HeadVar__4_4)
#line 612 "list.int"
{
#line 1125 "list.opt"
  {
#line 1125 "list.opt"
    MR_bool mercury__dir__succeeded;

#line 1125 "list.opt"
    if ((mercury__dir__HeadVar__2_2 == ((MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0)))))
#line 1125 "list.opt"
      {
#line 1125 "list.opt"
        *mercury__dir__HeadVar__3_3 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 1125 "list.opt"
        *mercury__dir__HeadVar__4_4 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 1125 "list.opt"
      }
#line 1125 "list.opt"
    else
#line 1126 "list.opt"
      {
#line 1126 "list.opt"
        MR_Char mercury__dir__V_7_7 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__HeadVar__2_2, (MR_Integer) 0)));
#line 1126 "list.opt"
        MR_Word mercury__dir__V_8_8 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__HeadVar__2_2, (MR_Integer) 1)));

#line 316 "dir.m"
        {
#line 316 "dir.m"
          mercury__dir__succeeded = mercury__dir__is_directory_separator_1_p_0(mercury__dir__V_7_7);
        }
#line 17 "std_util.opt"
        mercury__dir__succeeded = !(mercury__dir__succeeded);
#line 1132 "list.opt"
        if (mercury__dir__succeeded)
#line 1130 "list.opt"
          {
#line 1130 "list.opt"
            MR_Word mercury__dir__V_11_11;

#line 1131 "list.opt"
            {
#line 1131 "list.opt"
              mercury__dir__takewhile__ho7_4_p_in__list_0(mercury__dir__V_8_8, &mercury__dir__V_11_11, mercury__dir__HeadVar__4_4);
            }
#line 1130 "list.opt"
            {
#line 1130 "list.opt"
              MR_Word base;
#line 1130 "list.opt"
              base = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL));
#line 1130 "list.opt"
              *mercury__dir__HeadVar__3_3 = base;
#line 1130 "list.opt"
              MR_hl_field(MR_mktag(1), base, 0) = ((MR_Box) (MR_Word) (mercury__dir__V_7_7));
#line 1130 "list.opt"
              MR_hl_field(MR_mktag(1), base, 1) = ((MR_Box) (mercury__dir__V_11_11));
#line 1130 "list.opt"
            }
#line 1130 "list.opt"
          }
#line 1132 "list.opt"
        else
#line 1133 "list.opt"
          {
#line 1133 "list.opt"
            *mercury__dir__HeadVar__3_3 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 1134 "list.opt"
            *mercury__dir__HeadVar__4_4 = mercury__dir__HeadVar__2_2;
#line 1133 "list.opt"
          }
#line 1126 "list.opt"
      }
#line 1125 "list.opt"
  }
#line 612 "list.int"
}

#line 612 "list.int"
static void MR_CALL 
mercury__dir__takewhile__ho6_4_p_in__list_0(
#line 612 "list.int"
  MR_Word mercury__dir__HeadVar__2_2,
#line 612 "list.int"
  MR_Word * mercury__dir__HeadVar__3_3,
#line 612 "list.int"
  MR_Word * mercury__dir__HeadVar__4_4)
#line 612 "list.int"
{
#line 1125 "list.opt"
  {
#line 1125 "list.opt"
    MR_bool mercury__dir__succeeded;

#line 1125 "list.opt"
    if ((mercury__dir__HeadVar__2_2 == ((MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0)))))
#line 1125 "list.opt"
      {
#line 1125 "list.opt"
        *mercury__dir__HeadVar__3_3 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 1125 "list.opt"
        *mercury__dir__HeadVar__4_4 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 1125 "list.opt"
      }
#line 1125 "list.opt"
    else
#line 1126 "list.opt"
      {
#line 1126 "list.opt"
        MR_Char mercury__dir__V_7_7 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__HeadVar__2_2, (MR_Integer) 0)));
#line 1126 "list.opt"
        MR_Word mercury__dir__V_8_8 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__HeadVar__2_2, (MR_Integer) 1)));

#line 316 "dir.m"
        {
#line 316 "dir.m"
          mercury__dir__succeeded = mercury__dir__is_directory_separator_1_p_0(mercury__dir__V_7_7);
        }
#line 17 "std_util.opt"
        mercury__dir__succeeded = !(mercury__dir__succeeded);
#line 1132 "list.opt"
        if (mercury__dir__succeeded)
#line 1130 "list.opt"
          {
#line 1130 "list.opt"
            MR_Word mercury__dir__V_11_11;

#line 1131 "list.opt"
            {
#line 1131 "list.opt"
              mercury__dir__takewhile__ho6_4_p_in__list_0(mercury__dir__V_8_8, &mercury__dir__V_11_11, mercury__dir__HeadVar__4_4);
            }
#line 1130 "list.opt"
            {
#line 1130 "list.opt"
              MR_Word base;
#line 1130 "list.opt"
              base = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL));
#line 1130 "list.opt"
              *mercury__dir__HeadVar__3_3 = base;
#line 1130 "list.opt"
              MR_hl_field(MR_mktag(1), base, 0) = ((MR_Box) (MR_Word) (mercury__dir__V_7_7));
#line 1130 "list.opt"
              MR_hl_field(MR_mktag(1), base, 1) = ((MR_Box) (mercury__dir__V_11_11));
#line 1130 "list.opt"
            }
#line 1130 "list.opt"
          }
#line 1132 "list.opt"
        else
#line 1133 "list.opt"
          {
#line 1133 "list.opt"
            *mercury__dir__HeadVar__3_3 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 1134 "list.opt"
            *mercury__dir__HeadVar__4_4 = mercury__dir__HeadVar__2_2;
#line 1133 "list.opt"
          }
#line 1126 "list.opt"
      }
#line 1125 "list.opt"
  }
#line 612 "list.int"
}

#line 311 "list.int"
static MR_Word MR_CALL 
mercury__dir__map__ho4_2_f_in__list_0(
#line 311 "list.int"
  MR_Word mercury__dir__HeadVar__2_2)
#line 311 "list.int"
{
#line 610 "list.opt"
  {
#line 610 "list.opt"
    MR_bool mercury__dir__succeeded;
#line 610 "list.opt"
    MR_Word mercury__dir__HeadVar__3_3;

#line 610 "list.opt"
    if ((mercury__dir__HeadVar__2_2 == ((MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0)))))
#line 610 "list.opt"
      mercury__dir__HeadVar__3_3 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 610 "list.opt"
    else
#line 611 "list.opt"
      {
#line 611 "list.opt"
        MR_Word mercury__dir__V_6_6 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__HeadVar__2_2, (MR_Integer) 0)));
#line 611 "list.opt"
        MR_Word mercury__dir__V_7_7 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__HeadVar__2_2, (MR_Integer) 1)));
#line 611 "list.opt"
        MR_Word mercury__dir__V_8_8;
#line 611 "list.opt"
        MR_Word mercury__dir__V_9_9;
#line 611 "list.opt"
        MR_Word mercury__dir__V_13_13 = (MR_Word) MR_mkword(MR_mktag(1), &mercury__dir_scalar_common_1[5]);
#line 611 "list.opt"
        MR_Word mercury__dir__V_14_14 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 611 "list.opt"
        MR_Word mercury__dir__V_15_15 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));

#line 2030 "dir.m"
        {
#line 2030 "dir.m"
          mercury__dir__V_8_8 = mercury__dir__expand_acc_2_f_0(mercury__dir__V_6_6, mercury__dir__V_13_13);
        }
#line 613 "list.opt"
        {
#line 613 "list.opt"
          mercury__dir__V_9_9 = mercury__dir__map__ho4_2_f_in__list_0(mercury__dir__V_7_7);
        }
#line 611 "list.opt"
        {
#line 611 "list.opt"
          mercury__dir__HeadVar__3_3 = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL));
#line 611 "list.opt"
          MR_hl_field(MR_mktag(1), mercury__dir__HeadVar__3_3, 0) = ((MR_Box) (mercury__dir__V_8_8));
#line 611 "list.opt"
          MR_hl_field(MR_mktag(1), mercury__dir__HeadVar__3_3, 1) = ((MR_Box) (mercury__dir__V_9_9));
#line 611 "list.opt"
        }
#line 611 "list.opt"
      }
#line 610 "list.opt"
    return mercury__dir__HeadVar__3_3;
#line 610 "list.opt"
  }
#line 311 "list.int"
}

#line 1346 "dir.m"
static void MR_CALL 
mercury__dir__IntroducedFrom__pred__foldl2_process_dir__1346__1_13_p_0(
#line 1346 "dir.m"
  MR_Word mercury__dir__TypeInfo_for_T_69,
#line 1346 "dir.m"
  MR_Word mercury__dir__SymLinkParent_12,
#line 1346 "dir.m"
  MR_Word mercury__dir__P_13,
#line 1346 "dir.m"
  MR_String mercury__dir__DirName_14,
#line 1346 "dir.m"
  MR_Word mercury__dir__Recursive_16,
#line 1346 "dir.m"
  MR_Word mercury__dir__FollowLinks_17,
#line 1346 "dir.m"
  MR_Box mercury__dir__T0_19,
#line 1346 "dir.m"
  MR_Word mercury__dir__ParentIds_23,
#line 1346 "dir.m"
  MR_Box mercury__dir__Dir0_25,
#line 1346 "dir.m"
  MR_String mercury__dir__FirstEntry_26,
#line 1346 "dir.m"
  MR_Tuple * mercury__dir__HeadVar__11_50)
#line 1346 "dir.m"
{
#line 1346 "dir.m"
  {
#line 1346 "dir.m"
    MR_bool mercury__dir__succeeded;
#line 1346 "dir.m"
    MR_Tuple mercury__dir__V_53_53;
#line 1346 "dir.m"
    MR_Word mercury__dir__DirRes1_63;
#line 1346 "dir.m"
    MR_Word mercury__dir__Continue1_64;
#line 1346 "dir.m"
    MR_Box mercury__dir__Dir1_65;

#line 1349 "dir.m"
    {
#line 1349 "dir.m"
      mercury__dir__foldl2_process_dir2_13_p_0(mercury__dir__TypeInfo_for_T_69, mercury__dir__Dir0_25, &mercury__dir__Dir1_65, mercury__dir__SymLinkParent_12, mercury__dir__P_13, mercury__dir__DirName_14, mercury__dir__ParentIds_23, mercury__dir__FirstEntry_26, mercury__dir__Recursive_16, mercury__dir__FollowLinks_17, mercury__dir__T0_19, &mercury__dir__V_53_53);
    }
#line 1351 "dir.m"
    mercury__dir__DirRes1_63 = ((MR_Word) (MR_hl_field(MR_mktag(0), mercury__dir__V_53_53, (MR_Integer) 0)));
#line 1351 "dir.m"
    mercury__dir__Continue1_64 = ((MR_Word) (MR_hl_field(MR_mktag(0), mercury__dir__V_53_53, (MR_Integer) 1)));
#line 1347 "dir.m"
    {
#line 1347 "dir.m"
      MR_Tuple base;
#line 1347 "dir.m"
      base = (MR_Tuple) MR_new_object(MR_Tuple, ((MR_Integer) 3 * sizeof(MR_Word)), NULL, NULL);
#line 1347 "dir.m"
      *mercury__dir__HeadVar__11_50 = base;
#line 1347 "dir.m"
      MR_hl_field(MR_mktag(0), base, 0) = ((MR_Box) (mercury__dir__DirRes1_63));
#line 1347 "dir.m"
      MR_hl_field(MR_mktag(0), base, 1) = ((MR_Box) (mercury__dir__Continue1_64));
#line 1347 "dir.m"
      MR_hl_field(MR_mktag(0), base, 2) = ((MR_Box) (mercury__dir__Dir1_65));
#line 1347 "dir.m"
    }
#line 1346 "dir.m"
  }
#line 1346 "dir.m"
}

#line 1569 "dir.m"
void MR_CALL 
mercury__dir____Compare____stream_0_0(
#line 1569 "dir.m"
  MR_Word * mercury__dir__HeadVar__1_1,
#line 1569 "dir.m"
  MR_Box mercury__dir__HeadVar__2_2,
#line 1569 "dir.m"
  MR_Box mercury__dir__HeadVar__3_3)
#line 1569 "dir.m"
{
#line 1569 "dir.m"
  {
#line 1569 "dir.m"
    MR_bool mercury__dir__succeeded;
#line 1569 "dir.m"
    MR_Word mercury__dir__Cast_HeadVar1_4 = (MR_Word) mercury__dir__HeadVar__2_2;
#line 1569 "dir.m"
    MR_Word mercury__dir__Cast_HeadVar2_5 = (MR_Word) mercury__dir__HeadVar__3_3;

#line 1569 "dir.m"
    {
#line 1569 "dir.m"
      mercury__builtin____Compare____c_pointer_0_0(mercury__dir__HeadVar__1_1, mercury__dir__Cast_HeadVar1_4, mercury__dir__Cast_HeadVar2_5);
#line 1569 "dir.m"
      return;
    }
#line 1569 "dir.m"
  }
#line 1569 "dir.m"
}

#line 1569 "dir.m"
MR_bool MR_CALL 
mercury__dir____Unify____stream_0_0(
#line 1569 "dir.m"
  MR_Box mercury__dir__HeadVar__1_1,
#line 1569 "dir.m"
  MR_Box mercury__dir__HeadVar__2_2)
#line 1569 "dir.m"
{
#line 1569 "dir.m"
  {
#line 1569 "dir.m"
    MR_bool mercury__dir__succeeded;
#line 1569 "dir.m"
    MR_Word mercury__dir__Cast_HeadVar1_3 = (MR_Word) mercury__dir__HeadVar__1_1;
#line 1569 "dir.m"
    MR_Word mercury__dir__Cast_HeadVar2_4 = (MR_Word) mercury__dir__HeadVar__2_2;

#line 1569 "dir.m"
    {
#line 1569 "dir.m"
      return mercury__dir__succeeded = mercury__builtin____Unify____c_pointer_0_0(mercury__dir__Cast_HeadVar1_3, mercury__dir__Cast_HeadVar2_4);
    }
#line 1569 "dir.m"
    return mercury__dir__succeeded;
#line 1569 "dir.m"
  }
#line 1569 "dir.m"
}

#line 196 "dir.m"
void MR_CALL 
mercury__dir____Compare____foldl_pred_1_0(
#line 196 "dir.m"
  MR_Word mercury__dir__TypeInfo_for_T_6,
#line 196 "dir.m"
  MR_Word * mercury__dir__HeadVar__1_1,
#line 196 "dir.m"
  MR_Word mercury__dir__HeadVar__2_2,
#line 196 "dir.m"
  MR_Word mercury__dir__HeadVar__3_3)
#line 196 "dir.m"
{
#line 196 "dir.m"
  {
#line 196 "dir.m"
    MR_bool mercury__dir__succeeded;
#line 196 "dir.m"
    MR_Word mercury__dir__Cast_HeadVar1_4 = mercury__dir__HeadVar__2_2;
#line 196 "dir.m"
    MR_Word mercury__dir__Cast_HeadVar2_5 = mercury__dir__HeadVar__3_3;

#line 196 "dir.m"
    {
#line 196 "dir.m"
      mercury__private_builtin__builtin_compare_pred_3_p_0(mercury__dir__HeadVar__1_1, (MR_Word) mercury__dir__Cast_HeadVar1_4, (MR_Word) mercury__dir__Cast_HeadVar2_5);
#line 196 "dir.m"
      return;
    }
#line 196 "dir.m"
  }
#line 196 "dir.m"
}

#line 196 "dir.m"
MR_bool MR_CALL 
mercury__dir____Unify____foldl_pred_1_0(
#line 196 "dir.m"
  MR_Word mercury__dir__TypeInfo_for_T_5,
#line 196 "dir.m"
  MR_Word mercury__dir__HeadVar__1_1,
#line 196 "dir.m"
  MR_Word mercury__dir__HeadVar__2_2)
#line 196 "dir.m"
{
#line 196 "dir.m"
  {
#line 196 "dir.m"
    MR_bool mercury__dir__succeeded;
#line 196 "dir.m"
    MR_Word mercury__dir__Cast_HeadVar1_3 = mercury__dir__HeadVar__1_1;
#line 196 "dir.m"
    MR_Word mercury__dir__Cast_HeadVar2_4 = mercury__dir__HeadVar__2_2;

#line 196 "dir.m"
    {
#line 196 "dir.m"
      return mercury__dir__succeeded = mercury__private_builtin__builtin_unify_pred_2_p_0((MR_Word) mercury__dir__Cast_HeadVar1_3, (MR_Word) mercury__dir__Cast_HeadVar2_4);
    }
#line 196 "dir.m"
    return mercury__dir__succeeded;
#line 196 "dir.m"
  }
#line 196 "dir.m"
}

#line 2063 "dir.m"
static void MR_CALL 
mercury__dir__find_matching_brace_or_comma_6_p_0(
#line 2063 "dir.m"
  MR_Word mercury__dir__HeadVar__1_1,
#line 2063 "dir.m"
  MR_Word mercury__dir__Alternatives0_2,
#line 2063 "dir.m"
  MR_Word mercury__dir__CurAlternative_3,
#line 2063 "dir.m"
  MR_Integer mercury__dir__BraceLevel_4,
#line 2063 "dir.m"
  MR_Word * mercury__dir__Alternatives_5,
#line 2063 "dir.m"
  MR_Word * mercury__dir__Left_6)
#line 2063 "dir.m"
{
#line 2066 "dir.m"
  while (MR_TRUE)
#line 2066 "dir.m"
    {
#line 2066 "dir.m"
      /* tailcall optimized into a loop */
#line 2066 "dir.m"
      {
#line 2066 "dir.m"
        MR_bool mercury__dir__succeeded;

#line 2066 "dir.m"
        if ((mercury__dir__HeadVar__1_1 == ((MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0)))))
#line 2066 "dir.m"
          {
#line 2066 "dir.m"
            MR_Word mercury__dir__TypeCtorInfo_42_42 = (MR_Word) &mercury__builtin__builtin__type_ctor_info_string_0;

#line 2067 "dir.m"
            {
#line 2067 "dir.m"
              mercury__exception__throw_1_p_0(mercury__dir__TypeCtorInfo_42_42, ((MR_Box) ((MR_String) "no matching brace")));
#line 2067 "dir.m"
              return;
            }
#line 2066 "dir.m"
          }
#line 2066 "dir.m"
        else
#line 2069 "dir.m"
          {
#line 2069 "dir.m"
            MR_Char mercury__dir__Char_13 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__HeadVar__1_1, (MR_Integer) 0)));
#line 2069 "dir.m"
            MR_Word mercury__dir__Chars_14 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__HeadVar__1_1, (MR_Integer) 1)));

#line 2070 "dir.m"
            mercury__dir__succeeded = (mercury__dir__Char_13 == (MR_Char) 125);
#line 2079 "dir.m"
            if (mercury__dir__succeeded)
#line 2074 "dir.m"
              {
#line 2071 "dir.m"
                mercury__dir__succeeded = (mercury__dir__BraceLevel_4 == (MR_Integer) 0);
#line 2074 "dir.m"
                if (mercury__dir__succeeded)
#line 2072 "dir.m"
                  {
#line 2072 "dir.m"
                    MR_Word mercury__dir__TypeInfo_43_43;
#line 2072 "dir.m"
                    MR_Word mercury__dir__V_21_21;
#line 2072 "dir.m"
                    MR_Word mercury__dir__V_22_22 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));

#line 2072 "dir.m"
                    {
#line 2072 "dir.m"
                      mercury__dir__V_21_21 = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL));
#line 2072 "dir.m"
                      MR_hl_field(MR_mktag(1), mercury__dir__V_21_21, 0) = ((MR_Box) (mercury__dir__CurAlternative_3));
#line 2072 "dir.m"
                      MR_hl_field(MR_mktag(1), mercury__dir__V_21_21, 1) = ((MR_Box) (mercury__dir__V_22_22));
#line 2072 "dir.m"
                    }
#line 2085 "dir.c"
                    mercury__dir__TypeInfo_43_43 = (MR_Word) &mercury__dir_scalar_common_1[0];
#line 2072 "dir.m"
                    {
#line 2072 "dir.m"
                      mercury__list__append_3_p_1(mercury__dir__TypeInfo_43_43, mercury__dir__Alternatives0_2, mercury__dir__V_21_21, mercury__dir__Alternatives_5);
                    }
#line 2073 "dir.m"
                    *mercury__dir__Left_6 = mercury__dir__Chars_14;
#line 2072 "dir.m"
                  }
#line 2074 "dir.m"
                else
#line 2075 "dir.m"
                  {
#line 2075 "dir.m"
                    MR_Word mercury__dir__TypeCtorInfo_44_44 = (MR_Word) &mercury__builtin__builtin__type_ctor_info_character_0;
#line 2075 "dir.m"
                    MR_Word mercury__dir__V_23_23;
#line 2075 "dir.m"
                    MR_Integer mercury__dir__V_24_24;
#line 2075 "dir.m"
                    MR_Word mercury__dir__V_25_25;
#line 2075 "dir.m"
                    MR_Word mercury__dir__V_26_26 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));

#line 2076 "dir.m"
                    {
#line 2076 "dir.m"
                      mercury__dir__V_25_25 = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL));
#line 2076 "dir.m"
                      MR_hl_field(MR_mktag(1), mercury__dir__V_25_25, 0) = ((MR_Box) (MR_Word) (mercury__dir__Char_13));
#line 2076 "dir.m"
                      MR_hl_field(MR_mktag(1), mercury__dir__V_25_25, 1) = ((MR_Box) (mercury__dir__V_26_26));
#line 2076 "dir.m"
                    }
#line 113 "list.opt"
                    {
#line 113 "list.opt"
                      mercury__list__append_3_p_1(mercury__dir__TypeCtorInfo_44_44, mercury__dir__CurAlternative_3, mercury__dir__V_25_25, &mercury__dir__V_23_23);
                    }
#line 2077 "dir.m"
                    mercury__dir__V_24_24 = (mercury__dir__BraceLevel_4 - (MR_Integer) 1);
#line 2075 "dir.m"
                    /* direct tailcall eliminated */
#line 2075 "dir.m"
                    {
#line 2075 "dir.m"
                      MR_Word mercury__dir__HeadVar__1__tmp_copy_1 = mercury__dir__Chars_14;
#line 2075 "dir.m"
                      MR_Word mercury__dir__CurAlternative__tmp_copy_3 = mercury__dir__V_23_23;
#line 2075 "dir.m"
                      MR_Integer mercury__dir__BraceLevel__tmp_copy_4 = mercury__dir__V_24_24;

#line 2075 "dir.m"
                      mercury__dir__BraceLevel_4 = mercury__dir__BraceLevel__tmp_copy_4;
#line 2075 "dir.m"
                      mercury__dir__CurAlternative_3 = mercury__dir__CurAlternative__tmp_copy_3;
#line 2075 "dir.m"
                      mercury__dir__HeadVar__1_1 = mercury__dir__HeadVar__1__tmp_copy_1;
#line 2075 "dir.m"
                    }
#line 2075 "dir.m"
                    continue;
#line 2075 "dir.m"
                  }
#line 2074 "dir.m"
              }
#line 2079 "dir.m"
            else
#line 2083 "dir.m"
              {
#line 2079 "dir.m"
                mercury__dir__succeeded = (mercury__dir__Char_13 == (MR_Char) 123);
#line 2083 "dir.m"
                if (mercury__dir__succeeded)
#line 2080 "dir.m"
                  {
#line 2080 "dir.m"
                    MR_Word mercury__dir__TypeCtorInfo_45_45 = (MR_Word) &mercury__builtin__builtin__type_ctor_info_character_0;
#line 2080 "dir.m"
                    MR_Word mercury__dir__V_28_28;
#line 2080 "dir.m"
                    MR_Integer mercury__dir__V_29_29;
#line 2080 "dir.m"
                    MR_Word mercury__dir__V_30_30;
#line 2080 "dir.m"
                    MR_Word mercury__dir__V_31_31 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));

#line 2081 "dir.m"
                    {
#line 2081 "dir.m"
                      mercury__dir__V_30_30 = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL));
#line 2081 "dir.m"
                      MR_hl_field(MR_mktag(1), mercury__dir__V_30_30, 0) = ((MR_Box) (MR_Word) (mercury__dir__Char_13));
#line 2081 "dir.m"
                      MR_hl_field(MR_mktag(1), mercury__dir__V_30_30, 1) = ((MR_Box) (mercury__dir__V_31_31));
#line 2081 "dir.m"
                    }
#line 113 "list.opt"
                    {
#line 113 "list.opt"
                      mercury__list__append_3_p_1(mercury__dir__TypeCtorInfo_45_45, mercury__dir__CurAlternative_3, mercury__dir__V_30_30, &mercury__dir__V_28_28);
                    }
#line 2082 "dir.m"
                    mercury__dir__V_29_29 = (mercury__dir__BraceLevel_4 + (MR_Integer) 1);
#line 2080 "dir.m"
                    /* direct tailcall eliminated */
#line 2080 "dir.m"
                    {
#line 2080 "dir.m"
                      MR_Word mercury__dir__HeadVar__1__tmp_copy_1 = mercury__dir__Chars_14;
#line 2080 "dir.m"
                      MR_Word mercury__dir__CurAlternative__tmp_copy_3 = mercury__dir__V_28_28;
#line 2080 "dir.m"
                      MR_Integer mercury__dir__BraceLevel__tmp_copy_4 = mercury__dir__V_29_29;

#line 2080 "dir.m"
                      mercury__dir__BraceLevel_4 = mercury__dir__BraceLevel__tmp_copy_4;
#line 2080 "dir.m"
                      mercury__dir__CurAlternative_3 = mercury__dir__CurAlternative__tmp_copy_3;
#line 2080 "dir.m"
                      mercury__dir__HeadVar__1_1 = mercury__dir__HeadVar__1__tmp_copy_1;
#line 2080 "dir.m"
                    }
#line 2080 "dir.m"
                    continue;
#line 2080 "dir.m"
                  }
#line 2083 "dir.m"
                else
#line 2093 "dir.m"
                  {
#line 2083 "dir.m"
                    mercury__dir__succeeded = (mercury__dir__Char_13 == (MR_Char) 44);
#line 2093 "dir.m"
                    if (mercury__dir__succeeded)
#line 2088 "dir.m"
                      {
#line 2084 "dir.m"
                        mercury__dir__succeeded = (mercury__dir__BraceLevel_4 == (MR_Integer) 0);
#line 2088 "dir.m"
                        if (mercury__dir__succeeded)
#line 2085 "dir.m"
                          {
#line 2085 "dir.m"
                            MR_Word mercury__dir__TypeInfo_46_46;
#line 2085 "dir.m"
                            MR_Word mercury__dir__Alternatives1_20;
#line 2085 "dir.m"
                            MR_Word mercury__dir__V_33_33;
#line 2085 "dir.m"
                            MR_Word mercury__dir__V_34_34 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 2085 "dir.m"
                            MR_Word mercury__dir__V_35_35;

#line 2085 "dir.m"
                            {
#line 2085 "dir.m"
                              mercury__dir__V_33_33 = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL));
#line 2085 "dir.m"
                              MR_hl_field(MR_mktag(1), mercury__dir__V_33_33, 0) = ((MR_Box) (mercury__dir__CurAlternative_3));
#line 2085 "dir.m"
                              MR_hl_field(MR_mktag(1), mercury__dir__V_33_33, 1) = ((MR_Box) (mercury__dir__V_34_34));
#line 2085 "dir.m"
                            }
#line 2251 "dir.c"
                            mercury__dir__TypeInfo_46_46 = (MR_Word) &mercury__dir_scalar_common_1[0];
#line 2085 "dir.m"
                            {
#line 2085 "dir.m"
                              mercury__list__append_3_p_1(mercury__dir__TypeInfo_46_46, mercury__dir__Alternatives0_2, mercury__dir__V_33_33, &mercury__dir__Alternatives1_20);
                            }
#line 2087 "dir.m"
                            mercury__dir__V_35_35 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 2086 "dir.m"
                            /* direct tailcall eliminated */
#line 2086 "dir.m"
                            {
#line 2086 "dir.m"
                              MR_Word mercury__dir__HeadVar__1__tmp_copy_1 = mercury__dir__Chars_14;
#line 2086 "dir.m"
                              MR_Word mercury__dir__Alternatives0__tmp_copy_2 = mercury__dir__Alternatives1_20;
#line 2086 "dir.m"
                              MR_Word mercury__dir__CurAlternative__tmp_copy_3 = mercury__dir__V_35_35;

#line 2086 "dir.m"
                              mercury__dir__CurAlternative_3 = mercury__dir__CurAlternative__tmp_copy_3;
#line 2086 "dir.m"
                              mercury__dir__Alternatives0_2 = mercury__dir__Alternatives0__tmp_copy_2;
#line 2086 "dir.m"
                              mercury__dir__HeadVar__1_1 = mercury__dir__HeadVar__1__tmp_copy_1;
#line 2086 "dir.m"
                            }
#line 2086 "dir.m"
                            continue;
#line 2085 "dir.m"
                          }
#line 2088 "dir.m"
                        else
#line 2089 "dir.m"
                          {
#line 2089 "dir.m"
                            MR_Word mercury__dir__TypeCtorInfo_47_47 = (MR_Word) &mercury__builtin__builtin__type_ctor_info_character_0;
#line 2089 "dir.m"
                            MR_Word mercury__dir__V_36_36;
#line 2089 "dir.m"
                            MR_Word mercury__dir__V_37_37;
#line 2089 "dir.m"
                            MR_Word mercury__dir__V_38_38 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));

#line 2090 "dir.m"
                            {
#line 2090 "dir.m"
                              mercury__dir__V_37_37 = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL));
#line 2090 "dir.m"
                              MR_hl_field(MR_mktag(1), mercury__dir__V_37_37, 0) = ((MR_Box) (MR_Word) (mercury__dir__Char_13));
#line 2090 "dir.m"
                              MR_hl_field(MR_mktag(1), mercury__dir__V_37_37, 1) = ((MR_Box) (mercury__dir__V_38_38));
#line 2090 "dir.m"
                            }
#line 113 "list.opt"
                            {
#line 113 "list.opt"
                              mercury__list__append_3_p_1(mercury__dir__TypeCtorInfo_47_47, mercury__dir__CurAlternative_3, mercury__dir__V_37_37, &mercury__dir__V_36_36);
                            }
#line 2089 "dir.m"
                            /* direct tailcall eliminated */
#line 2089 "dir.m"
                            {
#line 2089 "dir.m"
                              MR_Word mercury__dir__HeadVar__1__tmp_copy_1 = mercury__dir__Chars_14;
#line 2089 "dir.m"
                              MR_Word mercury__dir__CurAlternative__tmp_copy_3 = mercury__dir__V_36_36;

#line 2089 "dir.m"
                              mercury__dir__CurAlternative_3 = mercury__dir__CurAlternative__tmp_copy_3;
#line 2089 "dir.m"
                              mercury__dir__HeadVar__1_1 = mercury__dir__HeadVar__1__tmp_copy_1;
#line 2089 "dir.m"
                            }
#line 2089 "dir.m"
                            continue;
#line 2089 "dir.m"
                          }
#line 2088 "dir.m"
                      }
#line 2093 "dir.m"
                    else
#line 2094 "dir.m"
                      {
#line 2094 "dir.m"
                        MR_Word mercury__dir__TypeCtorInfo_48_48 = (MR_Word) &mercury__builtin__builtin__type_ctor_info_character_0;
#line 2094 "dir.m"
                        MR_Word mercury__dir__V_39_39;
#line 2094 "dir.m"
                        MR_Word mercury__dir__V_40_40;
#line 2094 "dir.m"
                        MR_Word mercury__dir__V_41_41 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));

#line 2095 "dir.m"
                        {
#line 2095 "dir.m"
                          mercury__dir__V_40_40 = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL));
#line 2095 "dir.m"
                          MR_hl_field(MR_mktag(1), mercury__dir__V_40_40, 0) = ((MR_Box) (MR_Word) (mercury__dir__Char_13));
#line 2095 "dir.m"
                          MR_hl_field(MR_mktag(1), mercury__dir__V_40_40, 1) = ((MR_Box) (mercury__dir__V_41_41));
#line 2095 "dir.m"
                        }
#line 113 "list.opt"
                        {
#line 113 "list.opt"
                          mercury__list__append_3_p_1(mercury__dir__TypeCtorInfo_48_48, mercury__dir__CurAlternative_3, mercury__dir__V_40_40, &mercury__dir__V_39_39);
                        }
#line 2094 "dir.m"
                        /* direct tailcall eliminated */
#line 2094 "dir.m"
                        {
#line 2094 "dir.m"
                          MR_Word mercury__dir__HeadVar__1__tmp_copy_1 = mercury__dir__Chars_14;
#line 2094 "dir.m"
                          MR_Word mercury__dir__CurAlternative__tmp_copy_3 = mercury__dir__V_39_39;

#line 2094 "dir.m"
                          mercury__dir__CurAlternative_3 = mercury__dir__CurAlternative__tmp_copy_3;
#line 2094 "dir.m"
                          mercury__dir__HeadVar__1_1 = mercury__dir__HeadVar__1__tmp_copy_1;
#line 2094 "dir.m"
                        }
#line 2094 "dir.m"
                        continue;
#line 2094 "dir.m"
                      }
#line 2093 "dir.m"
                  }
#line 2083 "dir.m"
              }
#line 2069 "dir.m"
          }
#line 2066 "dir.m"
      }
#line 2066 "dir.m"
      break;
#line 2066 "dir.m"
    }
#line 2063 "dir.m"
}

#line 2032 "dir.m"
MR_Word MR_CALL 
mercury__dir__expand_acc_2_f_0(
#line 2032 "dir.m"
  MR_Word mercury__dir__HeadVar__1_1,
#line 2032 "dir.m"
  MR_Word mercury__dir__HeadVar__2_2)
#line 2032 "dir.m"
{
#line 2034 "dir.m"
  while (MR_TRUE)
#line 2034 "dir.m"
    {
#line 2034 "dir.m"
      /* tailcall optimized into a loop */
#line 2034 "dir.m"
      {
#line 2034 "dir.m"
        MR_bool mercury__dir__succeeded;
#line 2034 "dir.m"
        MR_Word mercury__dir__HeadVar__3_3;

#line 2034 "dir.m"
        if ((mercury__dir__HeadVar__1_1 == ((MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0)))))
#line 2034 "dir.m"
          mercury__dir__HeadVar__3_3 = mercury__dir__HeadVar__2_2;
#line 2034 "dir.m"
        else
#line 2035 "dir.m"
          {
#line 2035 "dir.m"
            MR_Char mercury__dir__Char_5 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__HeadVar__1_1, (MR_Integer) 0)));
#line 2035 "dir.m"
            MR_Word mercury__dir__Chars_6 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__HeadVar__1_1, (MR_Integer) 1)));

#line 2036 "dir.m"
            mercury__dir__succeeded = (mercury__dir__Char_5 == (MR_Char) 123);
#line 2043 "dir.m"
            if (mercury__dir__succeeded)
#line 2037 "dir.m"
              {
#line 2037 "dir.m"
                MR_Word mercury__dir__TypeInfo_19_19;
#line 2037 "dir.m"
                MR_Word mercury__dir__TypeCtorInfo_9_41;
#line 2037 "dir.m"
                MR_Word mercury__dir__TypeInfo_10_51;
#line 2037 "dir.m"
                MR_Word mercury__dir__Alternatives0_9;
#line 2037 "dir.m"
                MR_Word mercury__dir__Left_10;
#line 2037 "dir.m"
                MR_Word mercury__dir__AlternativeLists_11;
#line 2037 "dir.m"
                MR_Word mercury__dir__Alternatives_12;
#line 2037 "dir.m"
                MR_Word mercury__dir__PrefixLists_13;
#line 2037 "dir.m"
                MR_Word mercury__dir__Prefixes1_14;
#line 2037 "dir.m"
                MR_Word mercury__dir__V_31_31 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 2037 "dir.m"
                MR_Word mercury__dir__V_32_32 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 2037 "dir.m"
                MR_Word mercury__dir__V_5_38;
#line 2037 "dir.m"
                MR_Word mercury__dir__V_6_39;
#line 2037 "dir.m"
                MR_Word mercury__dir__V_5_47;
#line 2037 "dir.m"
                MR_Word mercury__dir__V_6_48;

#line 2061 "dir.m"
                {
#line 2061 "dir.m"
                  mercury__dir__find_matching_brace_or_comma_6_p_0(mercury__dir__Chars_6, mercury__dir__V_31_31, mercury__dir__V_32_32, (MR_Integer) 0, &mercury__dir__Alternatives0_9, &mercury__dir__Left_10);
                }
#line 2471 "dir.c"
                mercury__dir__TypeInfo_19_19 = (MR_Word) &mercury__dir_scalar_common_1[0];
#line 2038 "dir.m"
                {
#line 2038 "dir.m"
                  mercury__dir__AlternativeLists_11 = mercury__dir__map__ho4_2_f_in__list_0(mercury__dir__Alternatives0_9);
                }
#line 2478 "dir.c"
                mercury__dir__TypeCtorInfo_9_41 = (MR_Word) &mercury__list__list__type_ctor_info_list_1;
#line 2480 "dir.c"
                mercury__dir__TypeInfo_10_51 = (MR_Word) &mercury__dir_scalar_common_1[7];
#line 124 "list.opt"
                {
#line 124 "list.opt"
                  mercury__list__reverse_2_p_0(mercury__dir__TypeInfo_10_51, mercury__dir__AlternativeLists_11, &mercury__dir__V_5_38);
                }
#line 125 "list.opt"
                mercury__dir__V_6_39 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 126 "list.opt"
                {
#line 126 "list.opt"
                  mercury__list__condense_acc_3_p_0(mercury__dir__TypeInfo_19_19, mercury__dir__V_5_38, mercury__dir__V_6_39, &mercury__dir__Alternatives_12);
                }
#line 2040 "dir.m"
                {
#line 2040 "dir.m"
                  mercury__dir__PrefixLists_13 = mercury__dir__f_85_110_117_115_101_100_65_114_103_115_95_95_102_117_110_99_95_95_109_97_112_95_95_104_111_51_95_95_91_50_93_95_48_2_f_in__list_0(mercury__dir__Alternatives_12, mercury__dir__HeadVar__2_2);
                }
#line 124 "list.opt"
                {
#line 124 "list.opt"
                  mercury__list__reverse_2_p_0(mercury__dir__TypeInfo_10_51, mercury__dir__PrefixLists_13, &mercury__dir__V_5_47);
                }
#line 125 "list.opt"
                mercury__dir__V_6_48 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 126 "list.opt"
                {
#line 126 "list.opt"
                  mercury__list__condense_acc_3_p_0(mercury__dir__TypeInfo_19_19, mercury__dir__V_5_47, mercury__dir__V_6_48, &mercury__dir__Prefixes1_14);
                }
#line 2042 "dir.m"
                /* direct tailcall eliminated */
#line 2042 "dir.m"
                {
#line 2042 "dir.m"
                  MR_Word mercury__dir__HeadVar__1__tmp_copy_1 = mercury__dir__Left_10;
#line 2042 "dir.m"
                  MR_Word mercury__dir__HeadVar__2__tmp_copy_2 = mercury__dir__Prefixes1_14;

#line 2042 "dir.m"
                  mercury__dir__HeadVar__2_2 = mercury__dir__HeadVar__2__tmp_copy_2;
#line 2042 "dir.m"
                  mercury__dir__HeadVar__1_1 = mercury__dir__HeadVar__1__tmp_copy_1;
#line 2042 "dir.m"
                }
#line 2042 "dir.m"
                continue;
#line 2037 "dir.m"
              }
#line 2043 "dir.m"
            else
#line 2044 "dir.m"
              {
#line 2044 "dir.m"
                MR_Word mercury__dir__Prefixes1_18;

#line 2044 "dir.m"
                {
#line 2044 "dir.m"
                  mercury__dir__Prefixes1_18 = mercury__dir__f_85_110_117_115_101_100_65_114_103_115_95_95_102_117_110_99_95_95_109_97_112_95_95_104_111_50_95_95_91_50_93_95_48_2_f_in__list_0(mercury__dir__Char_5, mercury__dir__HeadVar__2_2);
                }
#line 2045 "dir.m"
                /* direct tailcall eliminated */
#line 2045 "dir.m"
                {
#line 2045 "dir.m"
                  MR_Word mercury__dir__HeadVar__1__tmp_copy_1 = mercury__dir__Chars_6;
#line 2045 "dir.m"
                  MR_Word mercury__dir__HeadVar__2__tmp_copy_2 = mercury__dir__Prefixes1_18;

#line 2045 "dir.m"
                  mercury__dir__HeadVar__2_2 = mercury__dir__HeadVar__2__tmp_copy_2;
#line 2045 "dir.m"
                  mercury__dir__HeadVar__1_1 = mercury__dir__HeadVar__1__tmp_copy_1;
#line 2045 "dir.m"
                }
#line 2045 "dir.m"
                continue;
#line 2044 "dir.m"
              }
#line 2035 "dir.m"
          }
#line 2034 "dir.m"
        return mercury__dir__HeadVar__3_3;
#line 2034 "dir.m"
      }
#line 2034 "dir.m"
      break;
#line 2034 "dir.m"
    }
#line 2032 "dir.m"
}

#line 2028 "dir.m"
MR_Word MR_CALL 
mercury__dir__expand_1_f_0(
#line 2028 "dir.m"
  MR_Word mercury__dir__Chars_3)
#line 2028 "dir.m"
{
#line 2030 "dir.m"
  {
#line 2030 "dir.m"
    MR_bool mercury__dir__succeeded;
#line 2030 "dir.m"
    MR_Word mercury__dir__HeadVar__2_2;
#line 2030 "dir.m"
    MR_Word mercury__dir__V_4_4 = (MR_Word) MR_mkword(MR_mktag(1), &mercury__dir_scalar_common_1[5]);
#line 2030 "dir.m"
    MR_Word mercury__dir__V_5_5 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 2030 "dir.m"
    MR_Word mercury__dir__V_6_6 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));

#line 2030 "dir.m"
    {
#line 2030 "dir.m"
      return mercury__dir__HeadVar__2_2 = mercury__dir__expand_acc_2_f_0(mercury__dir__Chars_3, mercury__dir__V_4_4);
    }
#line 2030 "dir.m"
    return mercury__dir__HeadVar__2_2;
#line 2030 "dir.m"
  }
#line 2028 "dir.m"
}

#line 1920 "dir.m"
static void MR_CALL 
mercury__dir__read_entry_2_7_p_0(
#line 1920 "dir.m"
  MR_Box mercury__dir__Dir0_1,
#line 1920 "dir.m"
  MR_Box * mercury__dir__Dir_2,
#line 1920 "dir.m"
  MR_Integer * mercury__dir__Status_3,
#line 1920 "dir.m"
  MR_Box * mercury__dir__Error_4,
#line 1920 "dir.m"
  MR_String * mercury__dir__FileName_5)
#line 1920 "dir.m"
{
#line 1923 "dir.m"
  {
#line 1923 "dir.m"
    MR_bool mercury__dir__succeeded;

#line 1928 "dir.m"
{
#define MR_PROC_LABEL mercury__dir__read_entry_2_7_p_0

	ML_DIR_STREAM Dir0;
	ML_DIR_STREAM Dir;
	MR_Integer Status;
	MR_Integer Error;
	MR_String FileName;

	MR_MAYBE_UNBOX_FOREIGN_TYPE(ML_DIR_STREAM, mercury__dir__Dir0_1 , Dir0);
		{
#line 1928 "dir.m"

#if defined(MR_WIN32)
    WIN32_FIND_DATAW file_data;

    Dir = Dir0;
    if (FindNextFileW(Dir, &file_data)) {
        Status = 1;
        FileName = ML_wide_to_utf8(file_data.cFileName, MR_ALLOC_ID);
    } else {
        Error = GetLastError();
        Status = (Error == ERROR_NO_MORE_FILES ? -1 : 0);
        FileName = NULL;
    }

#elif defined(MR_HAVE_READDIR) && defined(MR_HAVE_CLOSEDIR)
    struct dirent *dir_entry;

    Dir = Dir0;
    errno = 0;
    dir_entry = readdir(Dir);
    if (dir_entry == NULL) {
        Error = errno;
        FileName = NULL;
        Status = (Error == 0 ? -1 : 0);
    } else {
        MR_make_aligned_string_copy_msg(FileName, dir_entry->d_name,
            MR_ALLOC_ID);
        Error = 0;
        Status = 1;
    }

#else /* !MR_WIN32 && !(MR_HAVE_READDIR etc.) */
    MR_fatal_error("dir.read_entry_2 called but not supported");
#endif

#line 2674 "dir.c"

		;}
#undef MR_PROC_LABEL
	MR_MAYBE_BOX_FOREIGN_TYPE(ML_DIR_STREAM, Dir, *mercury__dir__Dir_2 );
	 *mercury__dir__Status_3  = Status;
	MR_MAYBE_BOX_FOREIGN_TYPE(MR_Integer, Error, *mercury__dir__Error_4 );
	 *mercury__dir__FileName_5  = FileName;
#line 1928 "dir.m"
}
#line 1923 "dir.m"
  }
#line 1920 "dir.m"
}

#line 1892 "dir.m"
static void MR_CALL 
mercury__dir__read_entry_4_p_0(
#line 1892 "dir.m"
  MR_Box mercury__dir__Dir0_5,
#line 1892 "dir.m"
  MR_Word * mercury__dir__Res_6)
#line 1892 "dir.m"
{
#line 1895 "dir.m"
  while (MR_TRUE)
#line 1895 "dir.m"
    {
#line 1895 "dir.m"
      /* tailcall optimized into a loop */
#line 1895 "dir.m"
      {
#line 1895 "dir.m"
        MR_bool mercury__dir__succeeded;
#line 1895 "dir.m"
        MR_Box mercury__dir__Dir_8;
#line 1895 "dir.m"
        MR_Integer mercury__dir__Status_9;
#line 1895 "dir.m"
        MR_Box mercury__dir__Error_10;
#line 1895 "dir.m"
        MR_String mercury__dir__FileName_11;

#line 1928 "dir.m"
{
#define MR_PROC_LABEL mercury__dir__read_entry_4_p_0

	ML_DIR_STREAM Dir0;
	ML_DIR_STREAM Dir;
	MR_Integer Status;
	MR_Integer Error;
	MR_String FileName;

	MR_MAYBE_UNBOX_FOREIGN_TYPE(ML_DIR_STREAM, mercury__dir__Dir0_5 , Dir0);
		{
#line 1928 "dir.m"

#if defined(MR_WIN32)
    WIN32_FIND_DATAW file_data;

    Dir = Dir0;
    if (FindNextFileW(Dir, &file_data)) {
        Status = 1;
        FileName = ML_wide_to_utf8(file_data.cFileName, MR_ALLOC_ID);
    } else {
        Error = GetLastError();
        Status = (Error == ERROR_NO_MORE_FILES ? -1 : 0);
        FileName = NULL;
    }

#elif defined(MR_HAVE_READDIR) && defined(MR_HAVE_CLOSEDIR)
    struct dirent *dir_entry;

    Dir = Dir0;
    errno = 0;
    dir_entry = readdir(Dir);
    if (dir_entry == NULL) {
        Error = errno;
        FileName = NULL;
        Status = (Error == 0 ? -1 : 0);
    } else {
        MR_make_aligned_string_copy_msg(FileName, dir_entry->d_name,
            MR_ALLOC_ID);
        Error = 0;
        Status = 1;
    }

#else /* !MR_WIN32 && !(MR_HAVE_READDIR etc.) */
    MR_fatal_error("dir.read_entry_2 called but not supported");
#endif

#line 2765 "dir.c"

		;}
#undef MR_PROC_LABEL
	MR_MAYBE_BOX_FOREIGN_TYPE(ML_DIR_STREAM, Dir, mercury__dir__Dir_8 );
	 mercury__dir__Status_9  = Status;
	MR_MAYBE_BOX_FOREIGN_TYPE(MR_Integer, Error, mercury__dir__Error_10 );
	 mercury__dir__FileName_11  = FileName;
#line 1928 "dir.m"
}
#line 1898 "dir.m"
        mercury__dir__succeeded = (mercury__dir__Status_9 == (MR_Integer) 0);
#line 1903 "dir.m"
        if (mercury__dir__succeeded)
#line 1901 "dir.m"
          {
#line 1901 "dir.m"
            MR_String mercury__dir__Msg_12;
#line 1901 "dir.m"
            MR_Word mercury__dir__V_18_18;

#line 825 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__read_entry_4_p_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 825 "io.opt"

#if defined(MR_WIN32)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 2801 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 825 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 963 "io.opt"
            if (mercury__dir__succeeded)
#line 967 "io.opt"
              {
#line 967 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__read_entry_4_p_0

	MR_Integer Error;
	MR_String Msg0;
	MR_String Msg;

	MR_MAYBE_UNBOX_FOREIGN_TYPE(MR_Integer, mercury__dir__Error_10 , Error);
	Msg0 =  (MR_String) "dir.foldl2: reading directory entry failed: " ;
		{
#line 967 "io.opt"

    ML_maybe_make_win32_err_msg(MR_TRUE, Error, Msg0, MR_ALLOC_ID, Msg);

#line 2829 "dir.c"

		;}
#undef MR_PROC_LABEL
	 mercury__dir__Msg_12  = Msg;
#line 967 "io.opt"
}
#line 967 "io.opt"
              }
#line 963 "io.opt"
            else
#line 952 "io.opt"
              {
#line 952 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__read_entry_4_p_0

	MR_Integer Error;
	MR_String Msg0;
	MR_String Msg;

	MR_MAYBE_UNBOX_FOREIGN_TYPE(MR_Integer, mercury__dir__Error_10 , Error);
	Msg0 =  (MR_String) "dir.foldl2: reading directory entry failed: " ;
		{
#line 952 "io.opt"

    ML_maybe_make_err_msg(MR_TRUE, Error, Msg0, MR_ALLOC_ID, Msg);

#line 2857 "dir.c"

		;}
#undef MR_PROC_LABEL
	 mercury__dir__Msg_12  = Msg;
#line 952 "io.opt"
}
#line 952 "io.opt"
              }
#line 956 "io.opt"
            mercury__dir__V_18_18 = (MR_Word) mercury__dir__Msg_12;
#line 1902 "dir.m"
            {
#line 1902 "dir.m"
              MR_Word base;
#line 1902 "dir.m"
              base = (MR_Word) MR_mkword(MR_mktag(2), MR_new_object(MR_Word, ((MR_Integer) 1 * sizeof(MR_Word)), NULL, NULL));
#line 1902 "dir.m"
              *mercury__dir__Res_6 = base;
#line 1902 "dir.m"
              MR_hl_field(MR_mktag(2), base, 0) = ((MR_Box) (mercury__dir__V_18_18));
#line 1902 "dir.m"
            }
#line 1901 "dir.m"
          }
#line 1903 "dir.m"
        else
#line 1907 "dir.m"
          {
#line 1904 "dir.m"
            mercury__dir__succeeded = (mercury__dir__Status_9 == (MR_Integer) -1);
#line 1907 "dir.m"
            if (mercury__dir__succeeded)
#line 1906 "dir.m"
              *mercury__dir__Res_6 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 1907 "dir.m"
            else
#line 1913 "dir.m"
              {
#line 1908 "dir.m"
                mercury__dir__succeeded = (strcmp(mercury__dir__FileName_11, (MR_String) ".") == 0);
#line 1909 "dir.m"
                if (!(mercury__dir__succeeded))
#line 1909 "dir.m"
                  {
#line 1909 "dir.m"
                    mercury__dir__succeeded = (strcmp(mercury__dir__FileName_11, (MR_String) "..") == 0);
#line 1909 "dir.m"
                  }
#line 1913 "dir.m"
                if (mercury__dir__succeeded)
#line 1912 "dir.m"
                  {
#line 1912 "dir.m"
                    /* direct tailcall eliminated */
#line 1912 "dir.m"
                    continue;
#line 1912 "dir.m"
                  }
#line 1913 "dir.m"
                else
#line 1914 "dir.m"
                  {
#line 1914 "dir.m"
                    MR_Tuple mercury__dir__V_20_20;

#line 1914 "dir.m"
                    {
#line 1914 "dir.m"
                      mercury__dir__V_20_20 = (MR_Tuple) MR_new_object(MR_Tuple, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL);
#line 1914 "dir.m"
                      MR_hl_field(MR_mktag(0), mercury__dir__V_20_20, 0) = ((MR_Box) (mercury__dir__Dir_8));
#line 1914 "dir.m"
                      MR_hl_field(MR_mktag(0), mercury__dir__V_20_20, 1) = ((MR_Box) (mercury__dir__FileName_11));
#line 1914 "dir.m"
                    }
#line 1914 "dir.m"
                    {
#line 1914 "dir.m"
                      MR_Word base;
#line 1914 "dir.m"
                      base = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 1 * sizeof(MR_Word)), NULL, NULL));
#line 1914 "dir.m"
                      *mercury__dir__Res_6 = base;
#line 1914 "dir.m"
                      MR_hl_field(MR_mktag(1), base, 0) = ((MR_Box) (mercury__dir__V_20_20));
#line 1914 "dir.m"
                    }
#line 1914 "dir.m"
                  }
#line 1913 "dir.m"
              }
#line 1907 "dir.m"
          }
#line 1895 "dir.m"
      }
#line 1895 "dir.m"
      break;
#line 1895 "dir.m"
    }
#line 1892 "dir.m"
}

#line 1846 "dir.m"
static void MR_CALL 
mercury__dir__close_2_5_p_0(
#line 1846 "dir.m"
  MR_Box mercury__dir__Dir_1,
#line 1846 "dir.m"
  MR_Integer * mercury__dir__Status_2,
#line 1846 "dir.m"
  MR_Box * mercury__dir__Error_3)
#line 1846 "dir.m"
{
#line 1849 "dir.m"
  {
#line 1849 "dir.m"
    MR_bool mercury__dir__succeeded;

#line 1853 "dir.m"
{
#define MR_PROC_LABEL mercury__dir__close_2_5_p_0

	ML_DIR_STREAM Dir;
	MR_Integer Status;
	MR_Integer Error;

	MR_MAYBE_UNBOX_FOREIGN_TYPE(ML_DIR_STREAM, mercury__dir__Dir_1 , Dir);
		{
#line 1853 "dir.m"

#if defined(MR_WIN32)
    Status = FindClose(Dir);
    Error = GetLastError();
#elif defined(MR_HAVE_CLOSEDIR)
    Status = (closedir(Dir) == 0);
    Error = errno;
#else
    MR_fatal_error("dir.open called but not supported");
#endif

#line 2998 "dir.c"

		;}
#undef MR_PROC_LABEL
	 *mercury__dir__Status_2  = Status;
	MR_MAYBE_BOX_FOREIGN_TYPE(MR_Integer, Error, *mercury__dir__Error_3 );
#line 1853 "dir.m"
}
#line 1849 "dir.m"
  }
#line 1846 "dir.m"
}

#line 1834 "dir.m"
static void MR_CALL 
mercury__dir__close_4_p_0(
#line 1834 "dir.m"
  MR_Box mercury__dir__Dir_5,
#line 1834 "dir.m"
  MR_Word * mercury__dir__Res_6)
#line 1834 "dir.m"
{
#line 1836 "dir.m"
  {
#line 1836 "dir.m"
    MR_bool mercury__dir__succeeded;
#line 1836 "dir.m"
    MR_Integer mercury__dir__Status_8;
#line 1836 "dir.m"
    MR_Box mercury__dir__Error_9;

#line 1853 "dir.m"
{
#define MR_PROC_LABEL mercury__dir__close_4_p_0

	ML_DIR_STREAM Dir;
	MR_Integer Status;
	MR_Integer Error;

	MR_MAYBE_UNBOX_FOREIGN_TYPE(ML_DIR_STREAM, mercury__dir__Dir_5 , Dir);
		{
#line 1853 "dir.m"

#if defined(MR_WIN32)
    Status = FindClose(Dir);
    Error = GetLastError();
#elif defined(MR_HAVE_CLOSEDIR)
    Status = (closedir(Dir) == 0);
    Error = errno;
#else
    MR_fatal_error("dir.open called but not supported");
#endif

#line 3051 "dir.c"

		;}
#undef MR_PROC_LABEL
	 mercury__dir__Status_8  = Status;
	MR_MAYBE_BOX_FOREIGN_TYPE(MR_Integer, Error, mercury__dir__Error_9 );
#line 1853 "dir.m"
}
#line 1838 "dir.m"
    mercury__dir__succeeded = (mercury__dir__Status_8 == (MR_Integer) 0);
#line 1842 "dir.m"
    if (mercury__dir__succeeded)
#line 1840 "dir.m"
      {
#line 1840 "dir.m"
        MR_String mercury__dir__Msg_10;
#line 1840 "dir.m"
        MR_Word mercury__dir__V_16_16;

#line 825 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__close_4_p_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 825 "io.opt"

#if defined(MR_WIN32)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 3085 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 825 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 963 "io.opt"
        if (mercury__dir__succeeded)
#line 967 "io.opt"
          {
#line 967 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__close_4_p_0

	MR_Integer Error;
	MR_String Msg0;
	MR_String Msg;

	MR_MAYBE_UNBOX_FOREIGN_TYPE(MR_Integer, mercury__dir__Error_9 , Error);
	Msg0 =  (MR_String) "dir.foldl2: closing directory failed: " ;
		{
#line 967 "io.opt"

    ML_maybe_make_win32_err_msg(MR_TRUE, Error, Msg0, MR_ALLOC_ID, Msg);

#line 3113 "dir.c"

		;}
#undef MR_PROC_LABEL
	 mercury__dir__Msg_10  = Msg;
#line 967 "io.opt"
}
#line 967 "io.opt"
          }
#line 963 "io.opt"
        else
#line 952 "io.opt"
          {
#line 952 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__close_4_p_0

	MR_Integer Error;
	MR_String Msg0;
	MR_String Msg;

	MR_MAYBE_UNBOX_FOREIGN_TYPE(MR_Integer, mercury__dir__Error_9 , Error);
	Msg0 =  (MR_String) "dir.foldl2: closing directory failed: " ;
		{
#line 952 "io.opt"

    ML_maybe_make_err_msg(MR_TRUE, Error, Msg0, MR_ALLOC_ID, Msg);

#line 3141 "dir.c"

		;}
#undef MR_PROC_LABEL
	 mercury__dir__Msg_10  = Msg;
#line 952 "io.opt"
}
#line 952 "io.opt"
          }
#line 956 "io.opt"
        mercury__dir__V_16_16 = (MR_Word) mercury__dir__Msg_10;
#line 1841 "dir.m"
        {
#line 1841 "dir.m"
          MR_Word base;
#line 1841 "dir.m"
          base = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 1 * sizeof(MR_Word)), NULL, NULL));
#line 1841 "dir.m"
          *mercury__dir__Res_6 = base;
#line 1841 "dir.m"
          MR_hl_field(MR_mktag(1), base, 0) = ((MR_Box) (mercury__dir__V_16_16));
#line 1841 "dir.m"
        }
#line 1840 "dir.m"
      }
#line 1842 "dir.m"
    else
#line 1843 "dir.m"
      *mercury__dir__Res_6 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 1836 "dir.m"
  }
#line 1834 "dir.m"
}

#line 1820 "dir.m"
static void MR_CALL 
mercury__dir__make_dir_open_result_error_4_p_0(
#line 1820 "dir.m"
  MR_Box mercury__dir__Error_5,
#line 1820 "dir.m"
  MR_Word * mercury__dir__HeadVar__2_2)
#line 1820 "dir.m"
{
#line 1831 "dir.m"
  {
#line 1831 "dir.m"
    MR_bool mercury__dir__succeeded;
#line 1831 "dir.m"
    MR_String mercury__dir__Msg_6;
#line 1831 "dir.m"
    MR_Word mercury__dir__V_10_10;

#line 952 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__make_dir_open_result_error_4_p_0

	MR_Integer Error;
	MR_String Msg0;
	MR_String Msg;

	MR_MAYBE_UNBOX_FOREIGN_TYPE(MR_Integer, mercury__dir__Error_5 , Error);
	Msg0 =  (MR_String) "dir.foldl2: opening directory failed: " ;
		{
#line 952 "io.opt"

    ML_maybe_make_err_msg(MR_TRUE, Error, Msg0, MR_ALLOC_ID, Msg);

#line 3208 "dir.c"

		;}
#undef MR_PROC_LABEL
	 mercury__dir__Msg_6  = Msg;
#line 952 "io.opt"
}
#line 956 "io.opt"
    mercury__dir__V_10_10 = (MR_Word) mercury__dir__Msg_6;
#line 1831 "dir.m"
    {
#line 1831 "dir.m"
      MR_Word base;
#line 1831 "dir.m"
      base = (MR_Word) MR_mkword(MR_mktag(2), MR_new_object(MR_Word, ((MR_Integer) 1 * sizeof(MR_Word)), NULL, NULL));
#line 1831 "dir.m"
      *mercury__dir__HeadVar__2_2 = base;
#line 1831 "dir.m"
      MR_hl_field(MR_mktag(2), base, 0) = ((MR_Box) (mercury__dir__V_10_10));
#line 1831 "dir.m"
    }
#line 1831 "dir.m"
  }
#line 1820 "dir.m"
}

#line 1810 "dir.m"
static MR_Word MR_CALL 
mercury__dir__make_dir_open_result_eof_0_f_0(void)
#line 1810 "dir.m"
{
#line 1818 "dir.m"
  {
#line 1818 "dir.m"
    MR_bool mercury__dir__succeeded;
#line 1818 "dir.m"
    MR_Word mercury__dir__HeadVar__1_1 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));

#line 1818 "dir.m"
    return mercury__dir__HeadVar__1_1;
#line 1818 "dir.m"
  }
#line 1810 "dir.m"
}

#line 1779 "dir.m"
static void MR_CALL 
mercury__dir__make_win32_dir_open_result_ok_5_p_0(
#line 1779 "dir.m"
  MR_Box mercury__dir__Dir_6,
#line 1779 "dir.m"
  MR_String mercury__dir__FirstFile0_7,
#line 1779 "dir.m"
  MR_Word * mercury__dir__Result_8)
#line 1779 "dir.m"
{
#line 1806 "dir.m"
  {
#line 1806 "dir.m"
    MR_bool mercury__dir__succeeded;

#line 1787 "dir.m"
    mercury__dir__succeeded = (strcmp(mercury__dir__FirstFile0_7, (MR_String) ".") == 0);
#line 1788 "dir.m"
    if (!(mercury__dir__succeeded))
#line 1788 "dir.m"
      {
#line 1788 "dir.m"
        mercury__dir__succeeded = (strcmp(mercury__dir__FirstFile0_7, (MR_String) "..") == 0);
#line 1788 "dir.m"
      }
#line 1806 "dir.m"
    if (mercury__dir__succeeded)
#line 1791 "dir.m"
      {
#line 1791 "dir.m"
        MR_Word mercury__dir__ReadResult_10;

#line 1791 "dir.m"
        {
#line 1791 "dir.m"
          mercury__dir__read_entry_4_p_0(mercury__dir__Dir_6, &mercury__dir__ReadResult_10);
        }
#line 1795 "dir.m"
#line 1795 "dir.m"
        switch (MR_tag((MR_Word) mercury__dir__ReadResult_10)) {
#line 1795 "dir.m"
          default: /*NOTREACHED*/ MR_assert(0);
#line 1795 "dir.m"
          case (MR_Integer) 0:
#line 1796 "dir.m"
            {
#line 1796 "dir.m"
              MR_Word mercury__dir__CloseRes_12;
#line 1796 "dir.m"
              MR_Integer mercury__dir__Status_29;
#line 1796 "dir.m"
              MR_Box mercury__dir__Error_30;

#line 1853 "dir.m"
{
#define MR_PROC_LABEL mercury__dir__make_win32_dir_open_result_ok_5_p_0

	ML_DIR_STREAM Dir;
	MR_Integer Status;
	MR_Integer Error;

	MR_MAYBE_UNBOX_FOREIGN_TYPE(ML_DIR_STREAM, mercury__dir__Dir_6 , Dir);
		{
#line 1853 "dir.m"

#if defined(MR_WIN32)
    Status = FindClose(Dir);
    Error = GetLastError();
#elif defined(MR_HAVE_CLOSEDIR)
    Status = (closedir(Dir) == 0);
    Error = errno;
#else
    MR_fatal_error("dir.open called but not supported");
#endif

#line 3329 "dir.c"

		;}
#undef MR_PROC_LABEL
	 mercury__dir__Status_29  = Status;
	MR_MAYBE_BOX_FOREIGN_TYPE(MR_Integer, Error, mercury__dir__Error_30 );
#line 1853 "dir.m"
}
#line 1838 "dir.m"
              mercury__dir__succeeded = (mercury__dir__Status_29 == (MR_Integer) 0);
#line 1842 "dir.m"
              if (mercury__dir__succeeded)
#line 1840 "dir.m"
                {
#line 1840 "dir.m"
                  MR_String mercury__dir__Msg_31;
#line 1840 "dir.m"
                  MR_Word mercury__dir__V_35_35;

#line 825 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__make_win32_dir_open_result_ok_5_p_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 825 "io.opt"

#if defined(MR_WIN32)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 3363 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 825 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 963 "io.opt"
                  if (mercury__dir__succeeded)
#line 967 "io.opt"
                    {
#line 967 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__make_win32_dir_open_result_ok_5_p_0

	MR_Integer Error;
	MR_String Msg0;
	MR_String Msg;

	MR_MAYBE_UNBOX_FOREIGN_TYPE(MR_Integer, mercury__dir__Error_30 , Error);
	Msg0 =  (MR_String) "dir.foldl2: closing directory failed: " ;
		{
#line 967 "io.opt"

    ML_maybe_make_win32_err_msg(MR_TRUE, Error, Msg0, MR_ALLOC_ID, Msg);

#line 3391 "dir.c"

		;}
#undef MR_PROC_LABEL
	 mercury__dir__Msg_31  = Msg;
#line 967 "io.opt"
}
#line 967 "io.opt"
                    }
#line 963 "io.opt"
                  else
#line 952 "io.opt"
                    {
#line 952 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__make_win32_dir_open_result_ok_5_p_0

	MR_Integer Error;
	MR_String Msg0;
	MR_String Msg;

	MR_MAYBE_UNBOX_FOREIGN_TYPE(MR_Integer, mercury__dir__Error_30 , Error);
	Msg0 =  (MR_String) "dir.foldl2: closing directory failed: " ;
		{
#line 952 "io.opt"

    ML_maybe_make_err_msg(MR_TRUE, Error, Msg0, MR_ALLOC_ID, Msg);

#line 3419 "dir.c"

		;}
#undef MR_PROC_LABEL
	 mercury__dir__Msg_31  = Msg;
#line 952 "io.opt"
}
#line 952 "io.opt"
                    }
#line 956 "io.opt"
                  mercury__dir__V_35_35 = (MR_Word) mercury__dir__Msg_31;
#line 1841 "dir.m"
                  {
#line 1841 "dir.m"
                    mercury__dir__CloseRes_12 = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 1 * sizeof(MR_Word)), NULL, NULL));
#line 1841 "dir.m"
                    MR_hl_field(MR_mktag(1), mercury__dir__CloseRes_12, 0) = ((MR_Box) (mercury__dir__V_35_35));
#line 1841 "dir.m"
                  }
#line 1840 "dir.m"
                }
#line 1842 "dir.m"
              else
#line 1843 "dir.m"
                mercury__dir__CloseRes_12 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 1799 "dir.m"
              if ((mercury__dir__CloseRes_12 == ((MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0)))))
#line 1798 "dir.m"
                *mercury__dir__Result_8 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 1799 "dir.m"
              else
#line 1799 "dir.m"
                {
#line 1799 "dir.m"
                  MR_Word mercury__dir__Error_13 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__CloseRes_12, (MR_Integer) 0)));

#line 1799 "dir.m"
                  {
#line 1799 "dir.m"
                    MR_Word base;
#line 1799 "dir.m"
                    base = (MR_Word) MR_mkword(MR_mktag(2), MR_new_object(MR_Word, ((MR_Integer) 1 * sizeof(MR_Word)), NULL, NULL));
#line 1799 "dir.m"
                    *mercury__dir__Result_8 = base;
#line 1799 "dir.m"
                    MR_hl_field(MR_mktag(2), base, 0) = ((MR_Box) (mercury__dir__Error_13));
#line 1799 "dir.m"
                  }
#line 1799 "dir.m"
                }
#line 1796 "dir.m"
            }
#line 1795 "dir.m"
            break;
#line 1795 "dir.m"
          case (MR_Integer) 1:
#line 1794 "dir.m"
            *mercury__dir__Result_8 = mercury__dir__ReadResult_10;
#line 1795 "dir.m"
            break;
#line 1795 "dir.m"
          case (MR_Integer) 2:
#line 1802 "dir.m"
            {
#line 1802 "dir.m"
              MR_Integer mercury__dir__Status_47;
#line 1802 "dir.m"
              MR_Box mercury__dir__Error_48;

#line 1853 "dir.m"
{
#define MR_PROC_LABEL mercury__dir__make_win32_dir_open_result_ok_5_p_0

	ML_DIR_STREAM Dir;
	MR_Integer Status;
	MR_Integer Error;

	MR_MAYBE_UNBOX_FOREIGN_TYPE(ML_DIR_STREAM, mercury__dir__Dir_6 , Dir);
		{
#line 1853 "dir.m"

#if defined(MR_WIN32)
    Status = FindClose(Dir);
    Error = GetLastError();
#elif defined(MR_HAVE_CLOSEDIR)
    Status = (closedir(Dir) == 0);
    Error = errno;
#else
    MR_fatal_error("dir.open called but not supported");
#endif

#line 3510 "dir.c"

		;}
#undef MR_PROC_LABEL
	 mercury__dir__Status_47  = Status;
	MR_MAYBE_BOX_FOREIGN_TYPE(MR_Integer, Error, mercury__dir__Error_48 );
#line 1853 "dir.m"
}
#line 1838 "dir.m"
              mercury__dir__succeeded = (mercury__dir__Status_47 == (MR_Integer) 0);
#line 1842 "dir.m"
              if (mercury__dir__succeeded)
#line 1840 "dir.m"
                {
#line 825 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__make_win32_dir_open_result_ok_5_p_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 825 "io.opt"

#if defined(MR_WIN32)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 3539 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 825 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 963 "io.opt"
                  if (mercury__dir__succeeded)
#line 967 "io.opt"
                    {
#line 967 "io.opt"
                      MR_String mercury__dir__Msg_49;

#line 967 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__make_win32_dir_open_result_ok_5_p_0

	MR_Integer Error;
	MR_String Msg0;
	MR_String Msg;

	MR_MAYBE_UNBOX_FOREIGN_TYPE(MR_Integer, mercury__dir__Error_48 , Error);
	Msg0 =  (MR_String) "dir.foldl2: closing directory failed: " ;
		{
#line 967 "io.opt"

    ML_maybe_make_win32_err_msg(MR_TRUE, Error, Msg0, MR_ALLOC_ID, Msg);

#line 3570 "dir.c"

		;}
#undef MR_PROC_LABEL
	 mercury__dir__Msg_49  = Msg;
#line 967 "io.opt"
}
#line 967 "io.opt"
                    }
#line 963 "io.opt"
                  else
#line 952 "io.opt"
                    {
#line 952 "io.opt"
                      MR_String mercury__dir__Msg_62;

#line 952 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__make_win32_dir_open_result_ok_5_p_0

	MR_Integer Error;
	MR_String Msg0;
	MR_String Msg;

	MR_MAYBE_UNBOX_FOREIGN_TYPE(MR_Integer, mercury__dir__Error_48 , Error);
	Msg0 =  (MR_String) "dir.foldl2: closing directory failed: " ;
		{
#line 952 "io.opt"

    ML_maybe_make_err_msg(MR_TRUE, Error, Msg0, MR_ALLOC_ID, Msg);

#line 3601 "dir.c"

		;}
#undef MR_PROC_LABEL
	 mercury__dir__Msg_62  = Msg;
#line 952 "io.opt"
}
#line 952 "io.opt"
                    }
#line 1840 "dir.m"
                }
#line 1842 "dir.m"
              else
#line 1843 "dir.m"
                {
#line 1843 "dir.m"
                }
#line 1804 "dir.m"
              *mercury__dir__Result_8 = mercury__dir__ReadResult_10;
#line 1802 "dir.m"
            }
#line 1795 "dir.m"
            break;
#line 1795 "dir.m"
        }
#line 1791 "dir.m"
      }
#line 1806 "dir.m"
    else
#line 1807 "dir.m"
      {
#line 1807 "dir.m"
        MR_Tuple mercury__dir__V_20_20;

#line 1807 "dir.m"
        {
#line 1807 "dir.m"
          mercury__dir__V_20_20 = (MR_Tuple) MR_new_object(MR_Tuple, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL);
#line 1807 "dir.m"
          MR_hl_field(MR_mktag(0), mercury__dir__V_20_20, 0) = ((MR_Box) (mercury__dir__Dir_6));
#line 1807 "dir.m"
          MR_hl_field(MR_mktag(0), mercury__dir__V_20_20, 1) = ((MR_Box) (mercury__dir__FirstFile0_7));
#line 1807 "dir.m"
        }
#line 1807 "dir.m"
        {
#line 1807 "dir.m"
          MR_Word base;
#line 1807 "dir.m"
          base = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 1 * sizeof(MR_Word)), NULL, NULL));
#line 1807 "dir.m"
          *mercury__dir__Result_8 = base;
#line 1807 "dir.m"
          MR_hl_field(MR_mktag(1), base, 0) = ((MR_Box) (mercury__dir__V_20_20));
#line 1807 "dir.m"
        }
#line 1807 "dir.m"
      }
#line 1806 "dir.m"
  }
#line 1779 "dir.m"
}

#line 1756 "dir.m"
static void MR_CALL 
mercury__dir__read_first_entry_4_p_0(
#line 1756 "dir.m"
  MR_Box mercury__dir__Dir_5,
#line 1756 "dir.m"
  MR_Word * mercury__dir__Result_6)
#line 1756 "dir.m"
{
#line 1767 "dir.m"
  {
#line 1767 "dir.m"
    MR_bool mercury__dir__succeeded;

#line 1768 "dir.m"
    {
#line 1768 "dir.m"
      mercury__dir__read_entry_4_p_0(mercury__dir__Dir_5, mercury__dir__Result_6);
    }
#line 1771 "dir.m"
#line 1771 "dir.m"
    switch (MR_tag((MR_Word) *mercury__dir__Result_6)) {
#line 1771 "dir.m"
      default: /*NOTREACHED*/ MR_assert(0);
#line 1771 "dir.m"
      case (MR_Integer) 0:
#line 1836 "dir.m"
        {
#line 1836 "dir.m"
          MR_Integer mercury__dir__Status_20;
#line 1836 "dir.m"
          MR_Box mercury__dir__Error_21;

#line 1853 "dir.m"
{
#define MR_PROC_LABEL mercury__dir__read_first_entry_4_p_0

	ML_DIR_STREAM Dir;
	MR_Integer Status;
	MR_Integer Error;

	MR_MAYBE_UNBOX_FOREIGN_TYPE(ML_DIR_STREAM, mercury__dir__Dir_5 , Dir);
		{
#line 1853 "dir.m"

#if defined(MR_WIN32)
    Status = FindClose(Dir);
    Error = GetLastError();
#elif defined(MR_HAVE_CLOSEDIR)
    Status = (closedir(Dir) == 0);
    Error = errno;
#else
    MR_fatal_error("dir.open called but not supported");
#endif

#line 3719 "dir.c"

		;}
#undef MR_PROC_LABEL
	 mercury__dir__Status_20  = Status;
	MR_MAYBE_BOX_FOREIGN_TYPE(MR_Integer, Error, mercury__dir__Error_21 );
#line 1853 "dir.m"
}
#line 1838 "dir.m"
          mercury__dir__succeeded = (mercury__dir__Status_20 == (MR_Integer) 0);
#line 1842 "dir.m"
          if (mercury__dir__succeeded)
#line 1840 "dir.m"
            {
#line 825 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__read_first_entry_4_p_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 825 "io.opt"

#if defined(MR_WIN32)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 3748 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 825 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 963 "io.opt"
              if (mercury__dir__succeeded)
#line 967 "io.opt"
                {
#line 967 "io.opt"
                  MR_String mercury__dir__Msg_22;

#line 967 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__read_first_entry_4_p_0

	MR_Integer Error;
	MR_String Msg0;
	MR_String Msg;

	MR_MAYBE_UNBOX_FOREIGN_TYPE(MR_Integer, mercury__dir__Error_21 , Error);
	Msg0 =  (MR_String) "dir.foldl2: closing directory failed: " ;
		{
#line 967 "io.opt"

    ML_maybe_make_win32_err_msg(MR_TRUE, Error, Msg0, MR_ALLOC_ID, Msg);

#line 3779 "dir.c"

		;}
#undef MR_PROC_LABEL
	 mercury__dir__Msg_22  = Msg;
#line 967 "io.opt"
}
#line 967 "io.opt"
                }
#line 963 "io.opt"
              else
#line 952 "io.opt"
                {
#line 952 "io.opt"
                  MR_String mercury__dir__Msg_35;

#line 952 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__read_first_entry_4_p_0

	MR_Integer Error;
	MR_String Msg0;
	MR_String Msg;

	MR_MAYBE_UNBOX_FOREIGN_TYPE(MR_Integer, mercury__dir__Error_21 , Error);
	Msg0 =  (MR_String) "dir.foldl2: closing directory failed: " ;
		{
#line 952 "io.opt"

    ML_maybe_make_err_msg(MR_TRUE, Error, Msg0, MR_ALLOC_ID, Msg);

#line 3810 "dir.c"

		;}
#undef MR_PROC_LABEL
	 mercury__dir__Msg_35  = Msg;
#line 952 "io.opt"
}
#line 952 "io.opt"
                }
#line 1840 "dir.m"
            }
#line 1842 "dir.m"
          else
#line 1843 "dir.m"
            {
#line 1843 "dir.m"
            }
#line 1836 "dir.m"
        }
#line 1771 "dir.m"
        break;
#line 1771 "dir.m"
      case (MR_Integer) 1:
#line 1770 "dir.m"
        {
#line 1770 "dir.m"
        }
#line 1771 "dir.m"
        break;
#line 1771 "dir.m"
      case (MR_Integer) 2:
#line 1836 "dir.m"
        {
#line 1836 "dir.m"
          MR_Integer mercury__dir__Status_20;
#line 1836 "dir.m"
          MR_Box mercury__dir__Error_21;

#line 1853 "dir.m"
{
#define MR_PROC_LABEL mercury__dir__read_first_entry_4_p_0

	ML_DIR_STREAM Dir;
	MR_Integer Status;
	MR_Integer Error;

	MR_MAYBE_UNBOX_FOREIGN_TYPE(ML_DIR_STREAM, mercury__dir__Dir_5 , Dir);
		{
#line 1853 "dir.m"

#if defined(MR_WIN32)
    Status = FindClose(Dir);
    Error = GetLastError();
#elif defined(MR_HAVE_CLOSEDIR)
    Status = (closedir(Dir) == 0);
    Error = errno;
#else
    MR_fatal_error("dir.open called but not supported");
#endif

#line 3870 "dir.c"

		;}
#undef MR_PROC_LABEL
	 mercury__dir__Status_20  = Status;
	MR_MAYBE_BOX_FOREIGN_TYPE(MR_Integer, Error, mercury__dir__Error_21 );
#line 1853 "dir.m"
}
#line 1838 "dir.m"
          mercury__dir__succeeded = (mercury__dir__Status_20 == (MR_Integer) 0);
#line 1842 "dir.m"
          if (mercury__dir__succeeded)
#line 1840 "dir.m"
            {
#line 825 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__read_first_entry_4_p_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 825 "io.opt"

#if defined(MR_WIN32)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 3899 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 825 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 963 "io.opt"
              if (mercury__dir__succeeded)
#line 967 "io.opt"
                {
#line 967 "io.opt"
                  MR_String mercury__dir__Msg_22;

#line 967 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__read_first_entry_4_p_0

	MR_Integer Error;
	MR_String Msg0;
	MR_String Msg;

	MR_MAYBE_UNBOX_FOREIGN_TYPE(MR_Integer, mercury__dir__Error_21 , Error);
	Msg0 =  (MR_String) "dir.foldl2: closing directory failed: " ;
		{
#line 967 "io.opt"

    ML_maybe_make_win32_err_msg(MR_TRUE, Error, Msg0, MR_ALLOC_ID, Msg);

#line 3930 "dir.c"

		;}
#undef MR_PROC_LABEL
	 mercury__dir__Msg_22  = Msg;
#line 967 "io.opt"
}
#line 967 "io.opt"
                }
#line 963 "io.opt"
              else
#line 952 "io.opt"
                {
#line 952 "io.opt"
                  MR_String mercury__dir__Msg_35;

#line 952 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__read_first_entry_4_p_0

	MR_Integer Error;
	MR_String Msg0;
	MR_String Msg;

	MR_MAYBE_UNBOX_FOREIGN_TYPE(MR_Integer, mercury__dir__Error_21 , Error);
	Msg0 =  (MR_String) "dir.foldl2: closing directory failed: " ;
		{
#line 952 "io.opt"

    ML_maybe_make_err_msg(MR_TRUE, Error, Msg0, MR_ALLOC_ID, Msg);

#line 3961 "dir.c"

		;}
#undef MR_PROC_LABEL
	 mercury__dir__Msg_35  = Msg;
#line 952 "io.opt"
}
#line 952 "io.opt"
                }
#line 1840 "dir.m"
            }
#line 1842 "dir.m"
          else
#line 1843 "dir.m"
            {
#line 1843 "dir.m"
            }
#line 1836 "dir.m"
        }
#line 1771 "dir.m"
        break;
#line 1771 "dir.m"
    }
#line 1767 "dir.m"
  }
#line 1756 "dir.m"
}

#line 1711 "dir.m"
static void MR_CALL 
mercury__dir__check_dir_readable_5_p_0(
#line 1711 "dir.m"
  MR_String mercury__dir__DirName_6,
#line 1711 "dir.m"
  MR_Integer * mercury__dir__IsReadable_7,
#line 1711 "dir.m"
  MR_Word * mercury__dir__Result_8)
#line 1711 "dir.m"
{
#line 1716 "dir.m"
  {
#line 1716 "dir.m"
    MR_bool mercury__dir__succeeded;
#line 1716 "dir.m"
    MR_Word mercury__dir__FileTypeRes_10;

#line 1717 "dir.m"
    {
#line 1717 "dir.m"
      mercury__io__file_type_5_p_0((MR_Integer) 1, mercury__dir__DirName_6, &mercury__dir__FileTypeRes_10);
    }
#line 1750 "dir.m"
    if (((MR_tag((MR_Word) mercury__dir__FileTypeRes_10)) == (MR_mktag((MR_Integer) 1))))
#line 1751 "dir.m"
      {
#line 1751 "dir.m"
        MR_Word mercury__dir__Msg_28 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__FileTypeRes_10, (MR_Integer) 0)));

#line 1752 "dir.m"
        *mercury__dir__IsReadable_7 = (MR_Integer) 0;
#line 1753 "dir.m"
        {
#line 1753 "dir.m"
          MR_Word base;
#line 1753 "dir.m"
          base = (MR_Word) MR_mkword(MR_mktag(2), MR_new_object(MR_Word, ((MR_Integer) 1 * sizeof(MR_Word)), NULL, NULL));
#line 1753 "dir.m"
          *mercury__dir__Result_8 = base;
#line 1753 "dir.m"
          MR_hl_field(MR_mktag(2), base, 0) = ((MR_Box) (mercury__dir__Msg_28));
#line 1753 "dir.m"
        }
#line 1751 "dir.m"
      }
#line 1750 "dir.m"
    else
#line 1719 "dir.m"
      {
#line 1719 "dir.m"
        MR_Word mercury__dir__FileType_11 = ((MR_Word) (MR_hl_field(MR_mktag(0), mercury__dir__FileTypeRes_10, (MR_Integer) 0)));

#line 1734 "dir.m"
#line 1734 "dir.m"
        switch (mercury__dir__FileType_11) {
#line 1734 "dir.m"
          default: /*NOTREACHED*/ MR_assert(0);
#line 1734 "dir.m"
          case (MR_Integer) 6:
#line 1734 "dir.m"
          case (MR_Integer) 5:
#line 1734 "dir.m"
          case (MR_Integer) 7:
#line 1734 "dir.m"
          case (MR_Integer) 3:
#line 1734 "dir.m"
          case (MR_Integer) 0:
#line 1734 "dir.m"
          case (MR_Integer) 8:
#line 1734 "dir.m"
          case (MR_Integer) 9:
#line 1734 "dir.m"
          case (MR_Integer) 4:
#line 1734 "dir.m"
          case (MR_Integer) 2:
#line 1734 "dir.m"
          case (MR_Integer) 10:
#line 1745 "dir.m"
            {
#line 1745 "dir.m"
              MR_Word mercury__dir__V_18_18;

#line 1746 "dir.m"
              *mercury__dir__IsReadable_7 = (MR_Integer) 0;
#line 956 "io.opt"
              mercury__dir__V_18_18 = (MR_Word) ((MR_Box) ((MR_String) "dir.foldl2: pathname is not a directory"));
#line 1747 "dir.m"
              *mercury__dir__Result_8 = (MR_Word) MR_mkword(MR_mktag(2), &mercury__dir_scalar_common_5[3]);
#line 1745 "dir.m"
            }
#line 1734 "dir.m"
            break;
#line 1734 "dir.m"
          case (MR_Integer) 1:
#line 1721 "dir.m"
            {
#line 1721 "dir.m"
              MR_Word mercury__dir__AccessResult_12;
#line 1721 "dir.m"
              MR_Word mercury__dir__V_20_20 = (MR_Word) MR_mkword(MR_mktag(1), &mercury__dir_scalar_common_1[4]);

#line 67 "builtin.opt"
{
#define MR_PROC_LABEL mercury__dir__check_dir_readable_5_p_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 67 "builtin.opt"

    SUCCESS_INDICATOR = MR_FALSE;

#line 4102 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 67 "builtin.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 619 "io.opt"
              if (mercury__dir__succeeded)
#line 618 "io.opt"
                {
#line 618 "io.opt"
                  mercury__io__check_file_accessibility_dotnet_5_p_0(mercury__dir__DirName_6, mercury__dir__V_20_20, &mercury__dir__AccessResult_12);
                }
#line 619 "io.opt"
              else
#line 623 "io.opt"
                {
#line 623 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__check_dir_readable_5_p_0

	MR_String FileName;
	MR_Word AccessTypes;
	MR_Word Result;

	FileName =  mercury__dir__DirName_6 ;
	AccessTypes =  mercury__dir__V_20_20 ;
		{
#line 623 "io.opt"

#if defined(MR_HAVE_ACCESS)
  #ifdef F_OK
    int mode = F_OK;
  #else
    int mode = 0;
  #endif
    int access_result;

  #if !defined(MR_WIN32) || defined(MR_CYGWIN)
    /*
    ** Earlier versions of MSVCRT ignored flags it doesn't support,
    ** later versions return an error (e.g. on Vista).
    */
    if (ML_access_types_includes_execute(AccessTypes)) {
      #ifdef X_OK
        mode |= X_OK;
      #else
        mode |= 1;
      #endif
    }
  #endif
    if (ML_access_types_includes_write(AccessTypes)) {
  #ifdef W_OK
        mode |= W_OK;
  #else
        mode |= 2;
  #endif
    }
    if (ML_access_types_includes_read(AccessTypes)) {
  #ifdef R_OK
        mode |= R_OK;
  #else
        mode |= 4;
  #endif
    }

  #ifdef MR_WIN32
    access_result = _waccess(ML_utf8_to_wide(FileName), mode);
  #else
    access_result = access(FileName, mode);
  #endif

    if (access_result == 0) {
        Result = ML_make_io_res_0_ok();
    } else {
        ML_make_io_res_0_error(errno,
            MR_make_string_const("file not accessible: "), &Result);
    }
#else /* !MR_HAVE_ACCESS */
    Result = ML_make_io_res_0_error_msg(
        "io.check_file_accessibility not supported on this platform");
#endif

#line 4188 "dir.c"

		;}
#undef MR_PROC_LABEL
	 mercury__dir__AccessResult_12  = Result;
#line 623 "io.opt"
}
#line 623 "io.opt"
                }
#line 1729 "dir.m"
              if ((mercury__dir__AccessResult_12 == ((MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0)))))
#line 1725 "dir.m"
                {
#line 1725 "dir.m"
                  MR_Word mercury__dir__V_26_26;

#line 1726 "dir.m"
                  *mercury__dir__IsReadable_7 = (MR_Integer) 1;
#line 956 "io.opt"
                  mercury__dir__V_26_26 = (MR_Word) ((MR_Box) ((MR_String) "no error"));
#line 1728 "dir.m"
                  *mercury__dir__Result_8 = (MR_Word) MR_mkword(MR_mktag(2), &mercury__dir_scalar_common_5[4]);
#line 1725 "dir.m"
                }
#line 1729 "dir.m"
              else
#line 1730 "dir.m"
                {
#line 1730 "dir.m"
                  MR_Word mercury__dir__Msg_13 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__AccessResult_12, (MR_Integer) 0)));

#line 1731 "dir.m"
                  *mercury__dir__IsReadable_7 = (MR_Integer) 0;
#line 1732 "dir.m"
                  {
#line 1732 "dir.m"
                    MR_Word base;
#line 1732 "dir.m"
                    base = (MR_Word) MR_mkword(MR_mktag(2), MR_new_object(MR_Word, ((MR_Integer) 1 * sizeof(MR_Word)), NULL, NULL));
#line 1732 "dir.m"
                    *mercury__dir__Result_8 = base;
#line 1732 "dir.m"
                    MR_hl_field(MR_mktag(2), base, 0) = ((MR_Box) (mercury__dir__Msg_13));
#line 1732 "dir.m"
                  }
#line 1730 "dir.m"
                }
#line 1721 "dir.m"
            }
#line 1734 "dir.m"
            break;
#line 1734 "dir.m"
        }
#line 1719 "dir.m"
      }
#line 1716 "dir.m"
  }
#line 1711 "dir.m"
}

#line 1621 "dir.m"
static void MR_CALL 
mercury__dir__open_2_4_p_0(
#line 1621 "dir.m"
  MR_String mercury__dir__DirName_1,
#line 1621 "dir.m"
  MR_Word * mercury__dir__Result_2)
#line 1621 "dir.m"
{
#line 1624 "dir.m"
  {
#line 1624 "dir.m"
    MR_bool mercury__dir__succeeded;

#line 1628 "dir.m"
{
#define MR_PROC_LABEL mercury__dir__open_2_4_p_0

	MR_String DirName;
	MR_Word Result;

	DirName =  mercury__dir__DirName_1 ;
		{
#line 1628 "dir.m"

#if defined(MR_WIN32)
    WIN32_FIND_DATAW    file_data;
    ML_DIR_STREAM       Dir;
    LPTSTR              FirstFileName;
    char                *dir_pattern;
    MR_Integer          is_readable;
    char                *filename;

    ML_check_dir_readable(DirName, &is_readable, &Result);
    if (is_readable) {
        dir_pattern = ML_make_path_name(DirName, MR_make_string_const("*"));
        Dir = FindFirstFileW(ML_utf8_to_wide(dir_pattern), &file_data);
        if (Dir == INVALID_HANDLE_VALUE) {
            int error = GetLastError();
            if (error == ERROR_NO_MORE_FILES) {
                Result = ML_make_dir_open_result_eof();
            } else {
                ML_make_dir_open_result_error(error, &Result);
            }
        } else {
            filename = ML_wide_to_utf8(file_data.cFileName, MR_ALLOC_ID);
            ML_make_win32_dir_open_result_ok(Dir, filename, &Result);
        }
    }

#elif defined(MR_HAVE_OPENDIR) && defined(MR_HAVE_READDIR) && \
        defined(MR_HAVE_CLOSEDIR)
    ML_DIR_STREAM Dir;

    Dir = opendir(DirName);
    if (Dir == NULL) {
        ML_make_dir_open_result_error(errno, &Result);
    } else {
        ML_dir_read_first_entry(Dir, &Result);
    }

#else /* !MR_WIN32 && !(MR_HAVE_OPENDIR etc.) */
    MR_fatal_error("dir.open called but not supported");
#endif

#line 4313 "dir.c"

		;}
#undef MR_PROC_LABEL
	 *mercury__dir__Result_2  = Result;
#line 1628 "dir.m"
}
#line 1624 "dir.m"
  }
#line 1621 "dir.m"
}

#line 1571 "dir.m"
static MR_bool MR_CALL 
mercury__dir__can_implement_dir_foldl_0_p_0(void)
#line 1571 "dir.m"
{
#line 1574 "dir.m"
  {
#line 1574 "dir.m"
    MR_bool mercury__dir__succeeded;

#line 1578 "dir.m"
{
#define MR_PROC_LABEL mercury__dir__can_implement_dir_foldl_0_p_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 1578 "dir.m"

#if defined(MR_HAVE_OPENDIR) && defined(MR_HAVE_READDIR) && \
        defined(MR_HAVE_CLOSEDIR)
    SUCCESS_INDICATOR = MR_TRUE;
#elif defined(MR_WIN32)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 4353 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 1578 "dir.m"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 1574 "dir.m"
    return mercury__dir__succeeded;
#line 1574 "dir.m"
  }
#line 1571 "dir.m"
}

#line 1504 "dir.m"
static void MR_CALL 
mercury__dir__check_for_symlink_loop_7_p_0(
#line 1504 "dir.m"
  MR_Word mercury__dir__SymLinkParent_8,
#line 1504 "dir.m"
  MR_String mercury__dir__DirName_9,
#line 1504 "dir.m"
  MR_Word * mercury__dir__LoopRes_10,
#line 1504 "dir.m"
  MR_Word mercury__dir__STATE_VARIABLE_ParentIds_0_17,
#line 1504 "dir.m"
  MR_Word * mercury__dir__STATE_VARIABLE_ParentIds_18)
#line 1504 "dir.m"
{
#line 1526 "dir.m"
  {
#line 1526 "dir.m"
    MR_bool mercury__dir__succeeded;

#line 817 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__check_for_symlink_loop_7_p_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 817 "io.opt"

#if defined(MR_HAVE_SYMLINK) && defined(MR_HAVE_READLINK)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 4404 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 817 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 1526 "dir.m"
    if (mercury__dir__succeeded)
#line 1509 "dir.m"
      {
#line 1509 "dir.m"
        MR_Word mercury__dir__IdRes_13;

#line 1509 "dir.m"
        {
#line 1509 "dir.m"
          mercury__io__file_id_4_p_0(mercury__dir__DirName_9, &mercury__dir__IdRes_13);
        }
#line 1522 "dir.m"
        if (((MR_tag((MR_Word) mercury__dir__IdRes_13)) == (MR_mktag((MR_Integer) 1))))
#line 1523 "dir.m"
          {
#line 1524 "dir.m"
            *mercury__dir__LoopRes_10 = (MR_Word) mercury__dir__IdRes_13;
#line 1523 "dir.m"
            *mercury__dir__STATE_VARIABLE_ParentIds_18 = mercury__dir__STATE_VARIABLE_ParentIds_0_17;
#line 1523 "dir.m"
          }
#line 1522 "dir.m"
        else
#line 1511 "dir.m"
          {
#line 1511 "dir.m"
            MR_Box mercury__dir__Id_14 = ((MR_Box) (MR_hl_field(MR_mktag(0), mercury__dir__IdRes_13, (MR_Integer) 0)));
#line 1511 "dir.m"
            MR_Word mercury__dir__Loop_15;
#line 1513 "dir.m"
            MR_Word mercury__dir__TypeCtorInfo_24_24;

#line 1513 "dir.m"
            mercury__dir__succeeded = (mercury__dir__SymLinkParent_8 == (MR_Integer) 1);
#line 1513 "dir.m"
            if (mercury__dir__succeeded)
#line 1513 "dir.m"
              {
#line 4452 "dir.c"
                mercury__dir__TypeCtorInfo_24_24 = (MR_Word) &mercury__io__io__type_ctor_info_file_id_0;
#line 1514 "dir.m"
                {
#line 1514 "dir.m"
                  mercury__dir__succeeded = mercury__list__member_2_p_0(mercury__dir__TypeCtorInfo_24_24, ((MR_Box) (mercury__dir__Id_14)), mercury__dir__STATE_VARIABLE_ParentIds_0_17);
                }
#line 1513 "dir.m"
              }
#line 1517 "dir.m"
            if (mercury__dir__succeeded)
#line 1516 "dir.m"
              {
#line 1516 "dir.m"
                mercury__dir__Loop_15 = (MR_Integer) 1;
#line 1516 "dir.m"
                *mercury__dir__STATE_VARIABLE_ParentIds_18 = mercury__dir__STATE_VARIABLE_ParentIds_0_17;
#line 1516 "dir.m"
              }
#line 1517 "dir.m"
            else
#line 1518 "dir.m"
              {
#line 1518 "dir.m"
                {
#line 1518 "dir.m"
                  MR_Word base;
#line 1518 "dir.m"
                  base = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL));
#line 1518 "dir.m"
                  *mercury__dir__STATE_VARIABLE_ParentIds_18 = base;
#line 1518 "dir.m"
                  MR_hl_field(MR_mktag(1), base, 0) = ((MR_Box) (mercury__dir__Id_14));
#line 1518 "dir.m"
                  MR_hl_field(MR_mktag(1), base, 1) = ((MR_Box) (mercury__dir__STATE_VARIABLE_ParentIds_0_17));
#line 1518 "dir.m"
                }
#line 1519 "dir.m"
                mercury__dir__Loop_15 = (MR_Integer) 0;
#line 1518 "dir.m"
              }
#line 1521 "dir.m"
            {
#line 1521 "dir.m"
              MR_Word base;
#line 1521 "dir.m"
              base = (MR_Word) MR_new_object(MR_Word, ((MR_Integer) 1 * sizeof(MR_Word)), NULL, NULL);
#line 1521 "dir.m"
              *mercury__dir__LoopRes_10 = base;
#line 1521 "dir.m"
              MR_hl_field(MR_mktag(0), base, 0) = ((MR_Box) (mercury__dir__Loop_15));
#line 1521 "dir.m"
            }
#line 1511 "dir.m"
          }
#line 1509 "dir.m"
      }
#line 1526 "dir.m"
    else
#line 1527 "dir.m"
      {
#line 1527 "dir.m"
        *mercury__dir__LoopRes_10 = (MR_Word) &mercury__dir_scalar_common_5[1];
#line 1527 "dir.m"
        *mercury__dir__STATE_VARIABLE_ParentIds_18 = mercury__dir__STATE_VARIABLE_ParentIds_0_17;
#line 1527 "dir.m"
      }
#line 1526 "dir.m"
  }
#line 1504 "dir.m"
}

#line 1406 "dir.m"
static void MR_CALL 
mercury__dir__foldl2_process_entries_14_p_0(
#line 1406 "dir.m"
  MR_Word mercury__dir__TypeInfo_for_T_87,
#line 1406 "dir.m"
  MR_Box mercury__dir__STATE_VARIABLE_Dir_0_1,
#line 1406 "dir.m"
  MR_Box * mercury__dir__STATE_VARIABLE_Dir_2,
#line 1406 "dir.m"
  MR_Word mercury__dir__SymLinkParent_3,
#line 1406 "dir.m"
  MR_Word mercury__dir__P_4,
#line 1406 "dir.m"
  MR_String mercury__dir__DirName_5,
#line 1406 "dir.m"
  MR_Word mercury__dir__HeadVar__6_6,
#line 1406 "dir.m"
  MR_Word mercury__dir__ParentIds_7,
#line 1406 "dir.m"
  MR_Word mercury__dir__Recursive_8,
#line 1406 "dir.m"
  MR_Word mercury__dir__FollowLinks_9,
#line 1406 "dir.m"
  MR_Word * mercury__dir__HeadVar__10_10,
#line 1406 "dir.m"
  MR_Box mercury__dir__T0_11,
#line 1406 "dir.m"
  MR_Word * mercury__dir__HeadVar__12_12)
#line 1406 "dir.m"
{
#line 1412 "dir.m"
  while (MR_TRUE)
#line 1412 "dir.m"
    {
#line 1412 "dir.m"
      /* tailcall optimized into a loop */
#line 1412 "dir.m"
      {
#line 1412 "dir.m"
        MR_bool mercury__dir__succeeded;

#line 1412 "dir.m"
#line 1412 "dir.m"
        switch (MR_tag((MR_Word) mercury__dir__HeadVar__6_6)) {
#line 1412 "dir.m"
          default: /*NOTREACHED*/ MR_assert(0);
#line 1412 "dir.m"
          case (MR_Integer) 0:
#line 1414 "dir.m"
            {
#line 1414 "dir.m"
              *mercury__dir__HeadVar__10_10 = (MR_Integer) 1;
#line 1414 "dir.m"
              {
#line 1414 "dir.m"
                MR_Word base;
#line 1414 "dir.m"
                base = (MR_Word) MR_new_object(MR_Word, ((MR_Integer) 1 * sizeof(MR_Word)), NULL, NULL);
#line 1414 "dir.m"
                *mercury__dir__HeadVar__12_12 = base;
#line 1414 "dir.m"
                MR_hl_field(MR_mktag(0), base, 0) = mercury__dir__T0_11;
#line 1414 "dir.m"
              }
#line 1414 "dir.m"
              *mercury__dir__STATE_VARIABLE_Dir_2 = mercury__dir__STATE_VARIABLE_Dir_0_1;
#line 1414 "dir.m"
            }
#line 1412 "dir.m"
            break;
#line 1412 "dir.m"
          case (MR_Integer) 1:
#line 1416 "dir.m"
            {
#line 1416 "dir.m"
              MR_String mercury__dir__FileName_46 = ((MR_String) (MR_hl_field(MR_mktag(1), mercury__dir__HeadVar__6_6, (MR_Integer) 0)));
#line 1416 "dir.m"
              MR_String mercury__dir__PathName_54;
#line 1416 "dir.m"
              MR_Word mercury__dir__FileTypeRes_55;

#line 1417 "dir.m"
              {
#line 1417 "dir.m"
                mercury__dir__PathName_54 = mercury__dir__f_slash_2_f_0(mercury__dir__DirName_5, mercury__dir__FileName_46);
              }
#line 1418 "dir.m"
              {
#line 1418 "dir.m"
                mercury__io__file_type_5_p_0((MR_Integer) 0, mercury__dir__PathName_54, &mercury__dir__FileTypeRes_55);
              }
#line 1494 "dir.m"
              if (((MR_tag((MR_Word) mercury__dir__FileTypeRes_55)) == (MR_mktag((MR_Integer) 1))))
#line 1495 "dir.m"
                {
#line 1495 "dir.m"
                  MR_Word mercury__dir__Error_86 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__FileTypeRes_55, (MR_Integer) 0)));

#line 1496 "dir.m"
                  *mercury__dir__HeadVar__10_10 = (MR_Integer) 0;
#line 1497 "dir.m"
                  {
#line 1497 "dir.m"
                    MR_Word base;
#line 1497 "dir.m"
                    base = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL));
#line 1497 "dir.m"
                    *mercury__dir__HeadVar__12_12 = base;
#line 1497 "dir.m"
                    MR_hl_field(MR_mktag(1), base, 0) = mercury__dir__T0_11;
#line 1497 "dir.m"
                    MR_hl_field(MR_mktag(1), base, 1) = ((MR_Box) (mercury__dir__Error_86));
#line 1497 "dir.m"
                  }
#line 1495 "dir.m"
                  *mercury__dir__STATE_VARIABLE_Dir_2 = mercury__dir__STATE_VARIABLE_Dir_0_1;
#line 1495 "dir.m"
                }
#line 1494 "dir.m"
              else
#line 1420 "dir.m"
                {
#line 1420 "dir.m"
                  MR_Word mercury__dir__Type_56 = ((MR_Word) (MR_hl_field(MR_mktag(0), mercury__dir__FileTypeRes_55, (MR_Integer) 0)));
#line 1420 "dir.m"
                  MR_Word mercury__dir__Continue1_57;
#line 1420 "dir.m"
                  MR_Box mercury__dir__T1_58;
#line 1421 "dir.m"
                  void MR_CALL (* mercury__dir__func_0)(MR_Box, MR_Box, MR_Box, MR_Box, MR_Box *, MR_Box, MR_Box *, MR_Box, MR_Box *) = ((void MR_CALL (*)(MR_Box, MR_Box, MR_Box, MR_Box, MR_Box *, MR_Box, MR_Box *, MR_Box, MR_Box *)) (MR_hl_field(MR_mktag(0), mercury__dir__P_4, (MR_Integer) 1)));
#line 1421 "dir.m"
                  MR_Box mercury__dir__conv2_Continue1_57;
#line 1421 "dir.m"
                  MR_Box mercury__dir__conv1_STATE_VARIABLE_IO_75_75;

#line 1421 "dir.m"
                  {
#line 1421 "dir.m"
                    mercury__dir__func_0(((MR_Box) mercury__dir__P_4), ((MR_Box) (mercury__dir__DirName_5)), ((MR_Box) (mercury__dir__FileName_46)), ((MR_Box) (mercury__dir__Type_56)), &mercury__dir__conv2_Continue1_57, mercury__dir__T0_11, &mercury__dir__T1_58, ((MR_Box) ((MR_Integer) 0)), &mercury__dir__conv1_STATE_VARIABLE_IO_75_75);
                  }
#line 1421 "dir.m"
                  mercury__dir__Continue1_57 = ((MR_Word) mercury__dir__conv2_Continue1_57);
#line 1489 "dir.m"
#line 1489 "dir.m"
                  switch (mercury__dir__Continue1_57) {
#line 1489 "dir.m"
                    default: /*NOTREACHED*/ MR_assert(0);
#line 1489 "dir.m"
                    case (MR_Integer) 0:
#line 1490 "dir.m"
                      {
#line 1491 "dir.m"
                        {
#line 1491 "dir.m"
                          MR_Word base;
#line 1491 "dir.m"
                          base = (MR_Word) MR_new_object(MR_Word, ((MR_Integer) 1 * sizeof(MR_Word)), NULL, NULL);
#line 1491 "dir.m"
                          *mercury__dir__HeadVar__12_12 = base;
#line 1491 "dir.m"
                          MR_hl_field(MR_mktag(0), base, 0) = mercury__dir__T1_58;
#line 1491 "dir.m"
                        }
#line 1492 "dir.m"
                        *mercury__dir__HeadVar__10_10 = (MR_Integer) 0;
#line 1490 "dir.m"
                        *mercury__dir__STATE_VARIABLE_Dir_2 = mercury__dir__STATE_VARIABLE_Dir_0_1;
#line 1490 "dir.m"
                      }
#line 1489 "dir.m"
                      break;
#line 1489 "dir.m"
                    case (MR_Integer) 1:
#line 1423 "dir.m"
                      {
#line 1423 "dir.m"
                        MR_Word mercury__dir__Continue2_59;
#line 1423 "dir.m"
                        MR_Word mercury__dir__Res1_60;
#line 1485 "dir.m"
                        MR_Box mercury__dir__T_64;

#line 1425 "dir.m"
                        mercury__dir__succeeded = (mercury__dir__Recursive_8 == (MR_Integer) 1);
#line 1425 "dir.m"
                        if (mercury__dir__succeeded)
#line 1426 "dir.m"
                          mercury__dir__succeeded = (mercury__dir__Type_56 == (MR_Integer) 1);
#line 1430 "dir.m"
                        if (mercury__dir__succeeded)
#line 1428 "dir.m"
                          {
#line 1428 "dir.m"
                            mercury__dir__foldl2_process_dir_11_p_0(mercury__dir__TypeInfo_for_T_87, mercury__dir__SymLinkParent_3, mercury__dir__P_4, mercury__dir__PathName_54, mercury__dir__ParentIds_7, mercury__dir__Recursive_8, mercury__dir__FollowLinks_9, &mercury__dir__Continue2_59, mercury__dir__T1_58, &mercury__dir__Res1_60);
                          }
#line 1430 "dir.m"
                        else
#line 1463 "dir.m"
                          {
#line 1431 "dir.m"
                            mercury__dir__succeeded = (mercury__dir__Recursive_8 == (MR_Integer) 1);
#line 1431 "dir.m"
                            if (mercury__dir__succeeded)
#line 1431 "dir.m"
                              {
#line 1432 "dir.m"
                                mercury__dir__succeeded = (mercury__dir__Type_56 == (MR_Integer) 2);
#line 1431 "dir.m"
                                if (mercury__dir__succeeded)
#line 1433 "dir.m"
                                  mercury__dir__succeeded = (mercury__dir__FollowLinks_9 == (MR_Integer) 1);
#line 1431 "dir.m"
                              }
#line 1463 "dir.m"
                            if (mercury__dir__succeeded)
#line 1435 "dir.m"
                              {
#line 1435 "dir.m"
                                MR_Word mercury__dir__TargetTypeRes_61;

#line 1435 "dir.m"
                                {
#line 1435 "dir.m"
                                  mercury__io__file_type_5_p_0((MR_Integer) 1, mercury__dir__PathName_54, &mercury__dir__TargetTypeRes_61);
                                }
#line 1458 "dir.m"
                                if (((MR_tag((MR_Word) mercury__dir__TargetTypeRes_61)) == (MR_mktag((MR_Integer) 1))))
#line 1459 "dir.m"
                                  {
#line 1459 "dir.m"
                                    MR_Word mercury__dir__TargetTypeError_63 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__TargetTypeRes_61, (MR_Integer) 0)));

#line 1460 "dir.m"
                                    mercury__dir__Continue2_59 = (MR_Integer) 0;
#line 1461 "dir.m"
                                    {
#line 1461 "dir.m"
                                      mercury__dir__Res1_60 = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL));
#line 1461 "dir.m"
                                      MR_hl_field(MR_mktag(1), mercury__dir__Res1_60, 0) = mercury__dir__T1_58;
#line 1461 "dir.m"
                                      MR_hl_field(MR_mktag(1), mercury__dir__Res1_60, 1) = ((MR_Box) (mercury__dir__TargetTypeError_63));
#line 1461 "dir.m"
                                    }
#line 1459 "dir.m"
                                  }
#line 1458 "dir.m"
                                else
#line 1437 "dir.m"
                                  {
#line 1437 "dir.m"
                                    MR_Word mercury__dir__TargetType_62 = ((MR_Word) (MR_hl_field(MR_mktag(0), mercury__dir__TargetTypeRes_61, (MR_Integer) 0)));

#line 1442 "dir.m"
#line 1442 "dir.m"
                                    switch (mercury__dir__TargetType_62) {
#line 1442 "dir.m"
                                      default: /*NOTREACHED*/ MR_assert(0);
#line 1442 "dir.m"
                                      case (MR_Integer) 6:
#line 1442 "dir.m"
                                      case (MR_Integer) 5:
#line 1442 "dir.m"
                                      case (MR_Integer) 7:
#line 1442 "dir.m"
                                      case (MR_Integer) 3:
#line 1442 "dir.m"
                                      case (MR_Integer) 0:
#line 1442 "dir.m"
                                      case (MR_Integer) 8:
#line 1442 "dir.m"
                                      case (MR_Integer) 9:
#line 1442 "dir.m"
                                      case (MR_Integer) 4:
#line 1442 "dir.m"
                                      case (MR_Integer) 2:
#line 1442 "dir.m"
                                      case (MR_Integer) 10:
#line 1454 "dir.m"
                                        {
#line 1455 "dir.m"
                                          mercury__dir__Continue2_59 = (MR_Integer) 1;
#line 1456 "dir.m"
                                          {
#line 1456 "dir.m"
                                            mercury__dir__Res1_60 = (MR_Word) MR_new_object(MR_Word, ((MR_Integer) 1 * sizeof(MR_Word)), NULL, NULL);
#line 1456 "dir.m"
                                            MR_hl_field(MR_mktag(0), mercury__dir__Res1_60, 0) = mercury__dir__T1_58;
#line 1456 "dir.m"
                                          }
#line 1454 "dir.m"
                                        }
#line 1442 "dir.m"
                                        break;
#line 1442 "dir.m"
                                      case (MR_Integer) 1:
#line 1439 "dir.m"
                                        {
#line 1440 "dir.m"
                                          {
#line 1440 "dir.m"
                                            mercury__dir__foldl2_process_dir_11_p_0(mercury__dir__TypeInfo_for_T_87, (MR_Integer) 1, mercury__dir__P_4, mercury__dir__PathName_54, mercury__dir__ParentIds_7, mercury__dir__Recursive_8, mercury__dir__FollowLinks_9, &mercury__dir__Continue2_59, mercury__dir__T1_58, &mercury__dir__Res1_60);
                                          }
#line 1439 "dir.m"
                                        }
#line 1442 "dir.m"
                                        break;
#line 1442 "dir.m"
                                    }
#line 1437 "dir.m"
                                  }
#line 1435 "dir.m"
                              }
#line 1463 "dir.m"
                            else
#line 1464 "dir.m"
                              {
#line 1464 "dir.m"
                                mercury__dir__Continue2_59 = (MR_Integer) 1;
#line 1465 "dir.m"
                                {
#line 1465 "dir.m"
                                  mercury__dir__Res1_60 = (MR_Word) MR_new_object(MR_Word, ((MR_Integer) 1 * sizeof(MR_Word)), NULL, NULL);
#line 1465 "dir.m"
                                  MR_hl_field(MR_mktag(0), mercury__dir__Res1_60, 0) = mercury__dir__T1_58;
#line 1465 "dir.m"
                                }
#line 1464 "dir.m"
                              }
#line 1463 "dir.m"
                          }
#line 1468 "dir.m"
                        mercury__dir__succeeded = (mercury__dir__Continue2_59 == (MR_Integer) 1);
#line 1468 "dir.m"
                        if (mercury__dir__succeeded)
#line 1468 "dir.m"
                          {
#line 1469 "dir.m"
                            mercury__dir__succeeded = ((MR_tag((MR_Word) mercury__dir__Res1_60)) == (MR_mktag((MR_Integer) 0)));
#line 1469 "dir.m"
                            if (mercury__dir__succeeded)
#line 1469 "dir.m"
                              mercury__dir__T_64 = (MR_hl_field(MR_mktag(0), mercury__dir__Res1_60, (MR_Integer) 0));
#line 1468 "dir.m"
                          }
#line 1485 "dir.m"
                        if (mercury__dir__succeeded)
#line 1471 "dir.m"
                          {
#line 1471 "dir.m"
                            MR_Word mercury__dir__EntryResult0_65;
#line 1471 "dir.m"
                            MR_Word mercury__dir__EntryResult_67;
#line 1471 "dir.m"
                            MR_Box mercury__dir__STATE_VARIABLE_Dir_83_83;

#line 1471 "dir.m"
                            {
#line 1471 "dir.m"
                              mercury__dir__read_entry_4_p_0(mercury__dir__STATE_VARIABLE_Dir_0_1, &mercury__dir__EntryResult0_65);
                            }
#line 1475 "dir.m"
#line 1475 "dir.m"
                            switch (MR_tag((MR_Word) mercury__dir__EntryResult0_65)) {
#line 1475 "dir.m"
                              default: /*NOTREACHED*/ MR_assert(0);
#line 1475 "dir.m"
                              case (MR_Integer) 0:
#line 1476 "dir.m"
                                {
#line 1477 "dir.m"
                                  mercury__dir__EntryResult_67 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 1476 "dir.m"
                                  mercury__dir__STATE_VARIABLE_Dir_83_83 = mercury__dir__STATE_VARIABLE_Dir_0_1;
#line 1476 "dir.m"
                                }
#line 1475 "dir.m"
                                break;
#line 1475 "dir.m"
                              case (MR_Integer) 1:
#line 1473 "dir.m"
                                {
#line 1473 "dir.m"
                                  MR_String mercury__dir__FileName1_66;
#line 1473 "dir.m"
                                  MR_Tuple mercury__dir__V_82_82 = ((MR_Tuple) (MR_hl_field(MR_mktag(1), mercury__dir__EntryResult0_65, (MR_Integer) 0)));

#line 1473 "dir.m"
                                  mercury__dir__STATE_VARIABLE_Dir_83_83 = ((MR_Box) (MR_hl_field(MR_mktag(0), mercury__dir__V_82_82, (MR_Integer) 0)));
#line 1473 "dir.m"
                                  mercury__dir__FileName1_66 = ((MR_String) (MR_hl_field(MR_mktag(0), mercury__dir__V_82_82, (MR_Integer) 1)));
#line 1474 "dir.m"
                                  {
#line 1474 "dir.m"
                                    mercury__dir__EntryResult_67 = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 1 * sizeof(MR_Word)), NULL, NULL));
#line 1474 "dir.m"
                                    MR_hl_field(MR_mktag(1), mercury__dir__EntryResult_67, 0) = ((MR_Box) (mercury__dir__FileName1_66));
#line 1474 "dir.m"
                                  }
#line 1473 "dir.m"
                                }
#line 1475 "dir.m"
                                break;
#line 1475 "dir.m"
                              case (MR_Integer) 2:
#line 1479 "dir.m"
                                {
#line 1480 "dir.m"
                                  mercury__dir__EntryResult_67 = (MR_Word) mercury__dir__EntryResult0_65;
#line 1479 "dir.m"
                                  mercury__dir__STATE_VARIABLE_Dir_83_83 = mercury__dir__STATE_VARIABLE_Dir_0_1;
#line 1479 "dir.m"
                                }
#line 1475 "dir.m"
                                break;
#line 1475 "dir.m"
                            }
#line 1482 "dir.m"
                            /* direct tailcall eliminated */
#line 1482 "dir.m"
                            {
#line 1482 "dir.m"
                              MR_Box mercury__dir__STATE_VARIABLE_Dir_0__tmp_copy_1 = mercury__dir__STATE_VARIABLE_Dir_83_83;
#line 1482 "dir.m"
                              MR_Word mercury__dir__HeadVar__6__tmp_copy_6 = mercury__dir__EntryResult_67;
#line 1482 "dir.m"
                              MR_Box mercury__dir__T0__tmp_copy_11 = mercury__dir__T_64;

#line 1482 "dir.m"
                              mercury__dir__T0_11 = mercury__dir__T0__tmp_copy_11;
#line 1482 "dir.m"
                              mercury__dir__HeadVar__6_6 = mercury__dir__HeadVar__6__tmp_copy_6;
#line 1482 "dir.m"
                              mercury__dir__STATE_VARIABLE_Dir_0_1 = mercury__dir__STATE_VARIABLE_Dir_0__tmp_copy_1;
#line 1482 "dir.m"
                            }
#line 1482 "dir.m"
                            continue;
#line 1471 "dir.m"
                          }
#line 1485 "dir.m"
                        else
#line 1486 "dir.m"
                          {
#line 1486 "dir.m"
                            *mercury__dir__HeadVar__10_10 = (MR_Integer) 0;
#line 1487 "dir.m"
                            *mercury__dir__HeadVar__12_12 = mercury__dir__Res1_60;
#line 1486 "dir.m"
                            *mercury__dir__STATE_VARIABLE_Dir_2 = mercury__dir__STATE_VARIABLE_Dir_0_1;
#line 1486 "dir.m"
                          }
#line 1423 "dir.m"
                      }
#line 1489 "dir.m"
                      break;
#line 1489 "dir.m"
                  }
#line 1420 "dir.m"
                }
#line 1416 "dir.m"
            }
#line 1412 "dir.m"
            break;
#line 1412 "dir.m"
          case (MR_Integer) 2:
#line 1412 "dir.m"
            {
#line 1412 "dir.m"
              MR_Word mercury__dir__Error_19 = ((MR_Word) (MR_hl_field(MR_mktag(2), mercury__dir__HeadVar__6_6, (MR_Integer) 0)));

#line 1412 "dir.m"
              *mercury__dir__HeadVar__10_10 = (MR_Integer) 0;
#line 1413 "dir.m"
              {
#line 1413 "dir.m"
                MR_Word base;
#line 1413 "dir.m"
                base = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL));
#line 1413 "dir.m"
                *mercury__dir__HeadVar__12_12 = base;
#line 1413 "dir.m"
                MR_hl_field(MR_mktag(1), base, 0) = mercury__dir__T0_11;
#line 1413 "dir.m"
                MR_hl_field(MR_mktag(1), base, 1) = ((MR_Box) (mercury__dir__Error_19));
#line 1413 "dir.m"
              }
#line 1412 "dir.m"
              *mercury__dir__STATE_VARIABLE_Dir_2 = mercury__dir__STATE_VARIABLE_Dir_0_1;
#line 1412 "dir.m"
            }
#line 1412 "dir.m"
            break;
#line 1412 "dir.m"
        }
#line 1412 "dir.m"
      }
#line 1412 "dir.m"
      break;
#line 1412 "dir.m"
    }
#line 1406 "dir.m"
}

#line 1314 "dir.m"
static void MR_CALL 
mercury__dir__foldl2_process_dir2_13_p_0(
#line 1314 "dir.m"
  MR_Word mercury__dir__TypeInfo_for_T_33,
#line 1314 "dir.m"
  MR_Box mercury__dir__STATE_VARIABLE_Dir_0_26,
#line 1314 "dir.m"
  MR_Box * mercury__dir__STATE_VARIABLE_Dir_27,
#line 1314 "dir.m"
  MR_Word mercury__dir__SymLinkParent_15,
#line 1314 "dir.m"
  MR_Word mercury__dir__P_16,
#line 1314 "dir.m"
  MR_String mercury__dir__DirName_17,
#line 1314 "dir.m"
  MR_Word mercury__dir__ParentIds_18,
#line 1314 "dir.m"
  MR_String mercury__dir__FirstEntry_19,
#line 1314 "dir.m"
  MR_Word mercury__dir__Recursive_20,
#line 1314 "dir.m"
  MR_Word mercury__dir__FollowLinks_21,
#line 1314 "dir.m"
  MR_Box mercury__dir__T0_22,
#line 1314 "dir.m"
  MR_Tuple * mercury__dir__HeadVar__11_11)
#line 1314 "dir.m"
{
#line 1320 "dir.m"
  {
#line 1320 "dir.m"
    MR_bool mercury__dir__succeeded;
#line 1320 "dir.m"
    MR_Word mercury__dir__Res_23;
#line 1320 "dir.m"
    MR_Word mercury__dir__Cont_24;
#line 1320 "dir.m"
    MR_Word mercury__dir__V_31_31;

#line 1322 "dir.m"
    {
#line 1322 "dir.m"
      mercury__dir__V_31_31 = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 1 * sizeof(MR_Word)), NULL, NULL));
#line 1322 "dir.m"
      MR_hl_field(MR_mktag(1), mercury__dir__V_31_31, 0) = ((MR_Box) (mercury__dir__FirstEntry_19));
#line 1322 "dir.m"
    }
#line 1321 "dir.m"
    {
#line 1321 "dir.m"
      mercury__dir__foldl2_process_entries_14_p_0(mercury__dir__TypeInfo_for_T_33, mercury__dir__STATE_VARIABLE_Dir_0_26, mercury__dir__STATE_VARIABLE_Dir_27, mercury__dir__SymLinkParent_15, mercury__dir__P_16, mercury__dir__DirName_17, mercury__dir__V_31_31, mercury__dir__ParentIds_18, mercury__dir__Recursive_20, mercury__dir__FollowLinks_21, &mercury__dir__Cont_24, mercury__dir__T0_22, &mercury__dir__Res_23);
    }
#line 1320 "dir.m"
    {
#line 1320 "dir.m"
      MR_Tuple base;
#line 1320 "dir.m"
      base = (MR_Tuple) MR_new_object(MR_Tuple, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL);
#line 1320 "dir.m"
      *mercury__dir__HeadVar__11_11 = base;
#line 1320 "dir.m"
      MR_hl_field(MR_mktag(0), base, 0) = ((MR_Box) (mercury__dir__Res_23));
#line 1320 "dir.m"
      MR_hl_field(MR_mktag(0), base, 1) = ((MR_Box) (mercury__dir__Cont_24));
#line 1320 "dir.m"
    }
#line 1320 "dir.m"
  }
#line 1314 "dir.m"
}

#line 1346 "dir.m"
static void MR_CALL 
mercury__dir__foldl2_process_dir_11_p_0_1(
#line 1346 "dir.m"
  MR_Box mercury__dir__closure_arg,
#line 1346 "dir.m"
  MR_Box * mercury__dir__wrapper_arg_1,
#line 1346 "dir.m"
  MR_Box mercury__dir__wrapper_arg_2,
#line 1346 "dir.m"
  MR_Box * mercury__dir__wrapper_arg_3)
#line 1346 "dir.m"
{
#line 1346 "dir.m"
  {
#line 1346 "dir.m"
    MR_Box mercury__dir__closure = mercury__dir__closure_arg;
#line 1346 "dir.m"
    MR_Tuple mercury__dir__conv0_HeadVar__11_50;

#line 1346 "dir.m"
    {
#line 1346 "dir.m"
      mercury__dir__IntroducedFrom__pred__foldl2_process_dir__1346__1_13_p_0(((MR_Word) (MR_hl_field(MR_mktag(0), mercury__dir__closure, (MR_Integer) 3))), ((MR_Word) (MR_hl_field(MR_mktag(0), mercury__dir__closure, (MR_Integer) 4))), ((MR_Word) (MR_hl_field(MR_mktag(0), mercury__dir__closure, (MR_Integer) 5))), ((MR_String) (MR_hl_field(MR_mktag(0), mercury__dir__closure, (MR_Integer) 6))), ((MR_Word) (MR_hl_field(MR_mktag(0), mercury__dir__closure, (MR_Integer) 7))), ((MR_Word) (MR_hl_field(MR_mktag(0), mercury__dir__closure, (MR_Integer) 8))), (MR_hl_field(MR_mktag(0), mercury__dir__closure, (MR_Integer) 9)), ((MR_Word) (MR_hl_field(MR_mktag(0), mercury__dir__closure, (MR_Integer) 10))), ((MR_Box) (MR_hl_field(MR_mktag(0), mercury__dir__closure, (MR_Integer) 11))), ((MR_String) (MR_hl_field(MR_mktag(0), mercury__dir__closure, (MR_Integer) 12))), &mercury__dir__conv0_HeadVar__11_50);
    }
#line 1346 "dir.m"
    *mercury__dir__wrapper_arg_1 = ((MR_Box) (mercury__dir__conv0_HeadVar__11_50));
#line 1346 "dir.m"
  }
#line 1346 "dir.m"
}

#line 1309 "dir.m"
void MR_CALL 
mercury__dir__foldl2_process_dir_11_p_0(
#line 1309 "dir.m"
  MR_Word mercury__dir__TypeInfo_for_T_69,
#line 1309 "dir.m"
  MR_Word mercury__dir__SymLinkParent_12,
#line 1309 "dir.m"
  MR_Word mercury__dir__P_13,
#line 1309 "dir.m"
  MR_String mercury__dir__DirName_14,
#line 1309 "dir.m"
  MR_Word mercury__dir__ParentIds0_15,
#line 1309 "dir.m"
  MR_Word mercury__dir__Recursive_16,
#line 1309 "dir.m"
  MR_Word mercury__dir__FollowLinks_17,
#line 1309 "dir.m"
  MR_Word * mercury__dir__Continue_18,
#line 1309 "dir.m"
  MR_Box mercury__dir__T0_19,
#line 1309 "dir.m"
  MR_Word * mercury__dir__Result_20)
#line 1309 "dir.m"
{
#line 1400 "dir.m"
  {
#line 1400 "dir.m"
    MR_bool mercury__dir__succeeded;

#line 1578 "dir.m"
{
#define MR_PROC_LABEL mercury__dir__foldl2_process_dir_11_p_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 1578 "dir.m"

#if defined(MR_HAVE_OPENDIR) && defined(MR_HAVE_READDIR) && \
        defined(MR_HAVE_CLOSEDIR)
    SUCCESS_INDICATOR = MR_TRUE;
#elif defined(MR_WIN32)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 5181 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 1578 "dir.m"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 1400 "dir.m"
    if (mercury__dir__succeeded)
#line 1337 "dir.m"
      {
#line 1337 "dir.m"
        MR_Word mercury__dir__LoopRes_22;
#line 1337 "dir.m"
        MR_Word mercury__dir__ParentIds_23;

#line 1329 "dir.m"
        mercury__dir__succeeded = (mercury__dir__Recursive_16 == (MR_Integer) 1);
#line 1329 "dir.m"
        if (mercury__dir__succeeded)
#line 1330 "dir.m"
          mercury__dir__succeeded = (mercury__dir__FollowLinks_17 == (MR_Integer) 1);
#line 1334 "dir.m"
        if (mercury__dir__succeeded)
#line 1332 "dir.m"
          {
#line 1332 "dir.m"
            mercury__dir__check_for_symlink_loop_7_p_0(mercury__dir__SymLinkParent_12, mercury__dir__DirName_14, &mercury__dir__LoopRes_22, mercury__dir__ParentIds0_15, &mercury__dir__ParentIds_23);
          }
#line 1334 "dir.m"
        else
#line 1335 "dir.m"
          {
#line 1335 "dir.m"
            mercury__dir__ParentIds_23 = mercury__dir__ParentIds0_15;
#line 1336 "dir.m"
            mercury__dir__LoopRes_22 = (MR_Word) &mercury__dir_scalar_common_5[1];
#line 1335 "dir.m"
          }
#line 1389 "dir.m"
        if (((MR_tag((MR_Word) mercury__dir__LoopRes_22)) == (MR_mktag((MR_Integer) 1))))
#line 1395 "dir.m"
          {
#line 1395 "dir.m"
            MR_Word mercury__dir__Error_68 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__LoopRes_22, (MR_Integer) 0)));

#line 1397 "dir.m"
            *mercury__dir__Continue_18 = (MR_Integer) 0;
#line 1398 "dir.m"
            {
#line 1398 "dir.m"
              MR_Word base;
#line 1398 "dir.m"
              base = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL));
#line 1398 "dir.m"
              *mercury__dir__Result_20 = base;
#line 1398 "dir.m"
              MR_hl_field(MR_mktag(1), base, 0) = mercury__dir__T0_19;
#line 1398 "dir.m"
              MR_hl_field(MR_mktag(1), base, 1) = ((MR_Box) (mercury__dir__Error_68));
#line 1398 "dir.m"
            }
#line 1395 "dir.m"
          }
#line 1389 "dir.m"
        else
#line 1389 "dir.m"
          {
#line 1389 "dir.m"
            MR_Word mercury__dir__V_84_84 = ((MR_Word) (MR_hl_field(MR_mktag(0), mercury__dir__LoopRes_22, (MR_Integer) 0)));

#line 1389 "dir.m"
#line 1389 "dir.m"
            switch (mercury__dir__V_84_84) {
#line 1389 "dir.m"
              default: /*NOTREACHED*/ MR_assert(0);
#line 1389 "dir.m"
              case (MR_Integer) 0:
#line 1339 "dir.m"
                {
#line 1339 "dir.m"
                  MR_Word mercury__dir__OpenResult_24;

#line 1578 "dir.m"
{
#define MR_PROC_LABEL mercury__dir__foldl2_process_dir_11_p_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 1578 "dir.m"

#if defined(MR_HAVE_OPENDIR) && defined(MR_HAVE_READDIR) && \
        defined(MR_HAVE_CLOSEDIR)
    SUCCESS_INDICATOR = MR_TRUE;
#elif defined(MR_WIN32)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 5284 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 1578 "dir.m"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 1616 "dir.m"
                  if (mercury__dir__succeeded)
#line 1624 "dir.m"
                    {
#line 1628 "dir.m"
{
#define MR_PROC_LABEL mercury__dir__foldl2_process_dir_11_p_0

	MR_String DirName;
	MR_Word Result;

	DirName =  mercury__dir__DirName_14 ;
		{
#line 1628 "dir.m"

#if defined(MR_WIN32)
    WIN32_FIND_DATAW    file_data;
    ML_DIR_STREAM       Dir;
    LPTSTR              FirstFileName;
    char                *dir_pattern;
    MR_Integer          is_readable;
    char                *filename;

    ML_check_dir_readable(DirName, &is_readable, &Result);
    if (is_readable) {
        dir_pattern = ML_make_path_name(DirName, MR_make_string_const("*"));
        Dir = FindFirstFileW(ML_utf8_to_wide(dir_pattern), &file_data);
        if (Dir == INVALID_HANDLE_VALUE) {
            int error = GetLastError();
            if (error == ERROR_NO_MORE_FILES) {
                Result = ML_make_dir_open_result_eof();
            } else {
                ML_make_dir_open_result_error(error, &Result);
            }
        } else {
            filename = ML_wide_to_utf8(file_data.cFileName, MR_ALLOC_ID);
            ML_make_win32_dir_open_result_ok(Dir, filename, &Result);
        }
    }

#elif defined(MR_HAVE_OPENDIR) && defined(MR_HAVE_READDIR) && \
        defined(MR_HAVE_CLOSEDIR)
    ML_DIR_STREAM Dir;

    Dir = opendir(DirName);
    if (Dir == NULL) {
        ML_make_dir_open_result_error(errno, &Result);
    } else {
        ML_dir_read_first_entry(Dir, &Result);
    }

#else /* !MR_WIN32 && !(MR_HAVE_OPENDIR etc.) */
    MR_fatal_error("dir.open called but not supported");
#endif

#line 5348 "dir.c"

		;}
#undef MR_PROC_LABEL
	 mercury__dir__OpenResult_24  = Result;
#line 1628 "dir.m"
}
#line 1624 "dir.m"
                    }
#line 1616 "dir.m"
                  else
#line 1617 "dir.m"
                    {
#line 1617 "dir.m"
                      MR_Word mercury__dir__V_91_91 = (MR_Word) ((MR_Box) ((MR_String) "dir.foldl2 not implemented on this platform"));

#line 1617 "dir.m"
                      mercury__dir__OpenResult_24 = (MR_Word) MR_mkword(MR_mktag(2), &mercury__dir_scalar_common_5[2]);
#line 1617 "dir.m"
                    }
#line 1380 "dir.m"
#line 1380 "dir.m"
                  switch (MR_tag((MR_Word) mercury__dir__OpenResult_24)) {
#line 1380 "dir.m"
                    default: /*NOTREACHED*/ MR_assert(0);
#line 1380 "dir.m"
                    case (MR_Integer) 0:
#line 1381 "dir.m"
                      {
#line 1382 "dir.m"
                        *mercury__dir__Continue_18 = (MR_Integer) 1;
#line 1383 "dir.m"
                        {
#line 1383 "dir.m"
                          MR_Word base;
#line 1383 "dir.m"
                          base = (MR_Word) MR_new_object(MR_Word, ((MR_Integer) 1 * sizeof(MR_Word)), NULL, NULL);
#line 1383 "dir.m"
                          *mercury__dir__Result_20 = base;
#line 1383 "dir.m"
                          MR_hl_field(MR_mktag(0), base, 0) = mercury__dir__T0_19;
#line 1383 "dir.m"
                        }
#line 1381 "dir.m"
                      }
#line 1380 "dir.m"
                      break;
#line 1380 "dir.m"
                    case (MR_Integer) 1:
#line 1342 "dir.m"
                      {
#line 1342 "dir.m"
                        MR_Box mercury__dir__Dir0_25;
#line 1342 "dir.m"
                        MR_String mercury__dir__FirstEntry_26;
#line 1342 "dir.m"
                        MR_Word mercury__dir__ProcessDir_27;
#line 1342 "dir.m"
                        MR_Word mercury__dir__ExcpResult_32;
#line 1342 "dir.m"
                        MR_Tuple mercury__dir__V_49_49 = ((MR_Tuple) (MR_hl_field(MR_mktag(1), mercury__dir__OpenResult_24, (MR_Integer) 0)));
#line 1354 "dir.m"
                        MR_Word mercury__dir__TypeCtorInfo_70_70;
#line 1354 "dir.m"
                        MR_Word mercury__dir__TypeInfo_71_71;
#line 1354 "dir.m"
                        MR_Word mercury__dir__TypeCtorInfo_72_72;
#line 1354 "dir.m"
                        MR_Word mercury__dir__TypeCtorInfo_73_73;
#line 1354 "dir.m"
                        MR_Word mercury__dir__TypeCtorInfo_74_74;
#line 1354 "dir.m"
                        MR_Word mercury__dir__TypeInfo_76_76;

#line 1342 "dir.m"
                        mercury__dir__Dir0_25 = ((MR_Box) (MR_hl_field(MR_mktag(0), mercury__dir__V_49_49, (MR_Integer) 0)));
#line 1342 "dir.m"
                        mercury__dir__FirstEntry_26 = ((MR_String) (MR_hl_field(MR_mktag(0), mercury__dir__V_49_49, (MR_Integer) 1)));
#line 1346 "dir.m"
                        {
#line 1346 "dir.m"
                          mercury__dir__ProcessDir_27 = (MR_Word) MR_new_object(MR_Word, ((MR_Integer) 13 * sizeof(MR_Word)), NULL, NULL);
#line 1346 "dir.m"
                          MR_hl_field(MR_mktag(0), mercury__dir__ProcessDir_27, 0) = ((MR_Box) (&mercury__dir_scalar_common_7[0]));
#line 1346 "dir.m"
                          MR_hl_field(MR_mktag(0), mercury__dir__ProcessDir_27, 1) = ((MR_Box) (mercury__dir__foldl2_process_dir_11_p_0_1));
#line 1346 "dir.m"
                          MR_hl_field(MR_mktag(0), mercury__dir__ProcessDir_27, 2) = ((MR_Box) (MR_Word) ((MR_Integer) 10));
#line 1346 "dir.m"
                          MR_hl_field(MR_mktag(0), mercury__dir__ProcessDir_27, 3) = ((MR_Box) (mercury__dir__TypeInfo_for_T_69));
#line 1346 "dir.m"
                          MR_hl_field(MR_mktag(0), mercury__dir__ProcessDir_27, 4) = ((MR_Box) (mercury__dir__SymLinkParent_12));
#line 1346 "dir.m"
                          MR_hl_field(MR_mktag(0), mercury__dir__ProcessDir_27, 5) = ((MR_Box) (mercury__dir__P_13));
#line 1346 "dir.m"
                          MR_hl_field(MR_mktag(0), mercury__dir__ProcessDir_27, 6) = ((MR_Box) (mercury__dir__DirName_14));
#line 1346 "dir.m"
                          MR_hl_field(MR_mktag(0), mercury__dir__ProcessDir_27, 7) = ((MR_Box) (mercury__dir__Recursive_16));
#line 1346 "dir.m"
                          MR_hl_field(MR_mktag(0), mercury__dir__ProcessDir_27, 8) = ((MR_Box) (mercury__dir__FollowLinks_17));
#line 1346 "dir.m"
                          MR_hl_field(MR_mktag(0), mercury__dir__ProcessDir_27, 9) = mercury__dir__T0_19;
#line 1346 "dir.m"
                          MR_hl_field(MR_mktag(0), mercury__dir__ProcessDir_27, 10) = ((MR_Box) (mercury__dir__ParentIds_23));
#line 1346 "dir.m"
                          MR_hl_field(MR_mktag(0), mercury__dir__ProcessDir_27, 11) = ((MR_Box) (mercury__dir__Dir0_25));
#line 1346 "dir.m"
                          MR_hl_field(MR_mktag(0), mercury__dir__ProcessDir_27, 12) = ((MR_Box) (mercury__dir__FirstEntry_26));
#line 1346 "dir.m"
                        }
#line 5458 "dir.c"
                        mercury__dir__TypeCtorInfo_74_74 = (MR_Word) &mercury__builtin__builtin__type_ctor_info_tuple_0;
#line 5460 "dir.c"
                        mercury__dir__TypeCtorInfo_70_70 = (MR_Word) &mercury__io__io__type_ctor_info_maybe_partial_res_1;
#line 5462 "dir.c"
                        {
#line 5464 "dir.c"
                          mercury__dir__TypeInfo_71_71 = (MR_Word) MR_new_object(MR_Word, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL);
#line 5466 "dir.c"
                          MR_hl_field(MR_mktag(0), mercury__dir__TypeInfo_71_71, 0) = ((MR_Box) (mercury__dir__TypeCtorInfo_70_70));
#line 5468 "dir.c"
                          MR_hl_field(MR_mktag(0), mercury__dir__TypeInfo_71_71, 1) = ((MR_Box) (mercury__dir__TypeInfo_for_T_69));
#line 5470 "dir.c"
                        }
#line 5472 "dir.c"
                        mercury__dir__TypeCtorInfo_72_72 = (MR_Word) &mercury__bool__bool__type_ctor_info_bool_0;
#line 5474 "dir.c"
                        mercury__dir__TypeCtorInfo_73_73 = (MR_Word) &mercury__dir__dir__type_ctor_info_stream_0;
#line 5476 "dir.c"
                        {
#line 5478 "dir.c"
                          mercury__dir__TypeInfo_76_76 = (MR_Word) MR_new_object(MR_Word, ((MR_Integer) 5 * sizeof(MR_Word)), NULL, NULL);
#line 5480 "dir.c"
                          MR_hl_field(MR_mktag(0), mercury__dir__TypeInfo_76_76, 0) = ((MR_Box) (mercury__dir__TypeCtorInfo_74_74));
#line 5482 "dir.c"
                          MR_hl_field(MR_mktag(0), mercury__dir__TypeInfo_76_76, 1) = ((MR_Box) ((MR_Integer) 3));
#line 5484 "dir.c"
                          MR_hl_field(MR_mktag(0), mercury__dir__TypeInfo_76_76, 2) = ((MR_Box) (mercury__dir__TypeInfo_71_71));
#line 5486 "dir.c"
                          MR_hl_field(MR_mktag(0), mercury__dir__TypeInfo_76_76, 3) = ((MR_Box) (mercury__dir__TypeCtorInfo_72_72));
#line 5488 "dir.c"
                          MR_hl_field(MR_mktag(0), mercury__dir__TypeInfo_76_76, 4) = ((MR_Box) (mercury__dir__TypeCtorInfo_73_73));
#line 5490 "dir.c"
                        }
#line 1354 "dir.m"
                        {
#line 1354 "dir.m"
                          mercury__dir__f_85_110_117_115_101_100_65_114_103_115_95_95_112_114_101_100_95_95_116_114_121_95_105_111_95_95_104_111_53_95_95_91_49_44_32_50_44_32_51_44_32_52_44_32_53_44_32_54_44_32_55_44_32_56_44_32_57_44_32_49_48_44_32_49_49_44_32_49_50_44_32_49_51_93_95_48_4_p_in__exception_0(mercury__dir__TypeInfo_76_76, mercury__dir__ProcessDir_27, &mercury__dir__ExcpResult_32);
                        }
#line 1372 "dir.m"
                        if (((MR_tag((MR_Word) mercury__dir__ExcpResult_32)) == (MR_mktag((MR_Integer) 2))))
#line 1373 "dir.m"
                          {
#line 1373 "dir.m"
                            MR_Word mercury__dir__TypeCtorInfo_77_77;
#line 1373 "dir.m"
                            MR_Word mercury__dir__TypeInfo_78_78;
#line 1373 "dir.m"
                            MR_Word mercury__dir__TypeCtorInfo_79_79;
#line 1373 "dir.m"
                            MR_Word mercury__dir__TypeCtorInfo_80_80;
#line 1373 "dir.m"
                            MR_Word mercury__dir__TypeCtorInfo_81_81;
#line 1373 "dir.m"
                            MR_Word mercury__dir__TypeInfo_83_83;
#line 1377 "dir.m"
                            MR_Word mercury__dir__V_41_41;

#line 1377 "dir.m"
                            {
#line 1377 "dir.m"
                              mercury__dir__close_4_p_0(mercury__dir__Dir0_25, &mercury__dir__V_41_41);
                            }
#line 5521 "dir.c"
                            mercury__dir__TypeCtorInfo_81_81 = (MR_Word) &mercury__builtin__builtin__type_ctor_info_tuple_0;
#line 5523 "dir.c"
                            mercury__dir__TypeCtorInfo_77_77 = (MR_Word) &mercury__io__io__type_ctor_info_maybe_partial_res_1;
#line 5525 "dir.c"
                            {
#line 5527 "dir.c"
                              mercury__dir__TypeInfo_78_78 = (MR_Word) MR_new_object(MR_Word, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL);
#line 5529 "dir.c"
                              MR_hl_field(MR_mktag(0), mercury__dir__TypeInfo_78_78, 0) = ((MR_Box) (mercury__dir__TypeCtorInfo_77_77));
#line 5531 "dir.c"
                              MR_hl_field(MR_mktag(0), mercury__dir__TypeInfo_78_78, 1) = ((MR_Box) (mercury__dir__TypeInfo_for_T_69));
#line 5533 "dir.c"
                            }
#line 5535 "dir.c"
                            mercury__dir__TypeCtorInfo_79_79 = (MR_Word) &mercury__bool__bool__type_ctor_info_bool_0;
#line 5537 "dir.c"
                            mercury__dir__TypeCtorInfo_80_80 = (MR_Word) &mercury__dir__dir__type_ctor_info_stream_0;
#line 5539 "dir.c"
                            {
#line 5541 "dir.c"
                              mercury__dir__TypeInfo_83_83 = (MR_Word) MR_new_object(MR_Word, ((MR_Integer) 5 * sizeof(MR_Word)), NULL, NULL);
#line 5543 "dir.c"
                              MR_hl_field(MR_mktag(0), mercury__dir__TypeInfo_83_83, 0) = ((MR_Box) (mercury__dir__TypeCtorInfo_81_81));
#line 5545 "dir.c"
                              MR_hl_field(MR_mktag(0), mercury__dir__TypeInfo_83_83, 1) = ((MR_Box) ((MR_Integer) 3));
#line 5547 "dir.c"
                              MR_hl_field(MR_mktag(0), mercury__dir__TypeInfo_83_83, 2) = ((MR_Box) (mercury__dir__TypeInfo_78_78));
#line 5549 "dir.c"
                              MR_hl_field(MR_mktag(0), mercury__dir__TypeInfo_83_83, 3) = ((MR_Box) (mercury__dir__TypeCtorInfo_79_79));
#line 5551 "dir.c"
                              MR_hl_field(MR_mktag(0), mercury__dir__TypeInfo_83_83, 4) = ((MR_Box) (mercury__dir__TypeCtorInfo_80_80));
#line 5553 "dir.c"
                            }
#line 1378 "dir.m"
                            {
#line 1378 "dir.m"
                              mercury__exception__rethrow_1_p_0(mercury__dir__TypeInfo_83_83, (MR_Word) mercury__dir__ExcpResult_32);
#line 1378 "dir.m"
                              return;
                            }
#line 1373 "dir.m"
                          }
#line 1372 "dir.m"
                        else
#line 1357 "dir.m"
                          {
#line 1357 "dir.m"
                            MR_Word mercury__dir__DirRes_33;
#line 1357 "dir.m"
                            MR_Box mercury__dir__Dir_34;
#line 1357 "dir.m"
                            MR_Word mercury__dir__CleanupRes_35;
#line 1357 "dir.m"
                            MR_Tuple mercury__dir__V_56_56 = ((MR_Tuple) (MR_hl_field(MR_mktag(1), mercury__dir__ExcpResult_32, (MR_Integer) 0)));

#line 1357 "dir.m"
                            mercury__dir__DirRes_33 = ((MR_Word) (MR_hl_field(MR_mktag(0), mercury__dir__V_56_56, (MR_Integer) 0)));
#line 1357 "dir.m"
                            *mercury__dir__Continue_18 = ((MR_Word) (MR_hl_field(MR_mktag(0), mercury__dir__V_56_56, (MR_Integer) 1)));
#line 1357 "dir.m"
                            mercury__dir__Dir_34 = ((MR_Box) (MR_hl_field(MR_mktag(0), mercury__dir__V_56_56, (MR_Integer) 2)));
#line 1358 "dir.m"
                            {
#line 1358 "dir.m"
                              mercury__dir__close_4_p_0(mercury__dir__Dir_34, &mercury__dir__CleanupRes_35);
                            }
#line 1368 "dir.m"
                            if (((MR_tag((MR_Word) mercury__dir__DirRes_33)) == (MR_mktag((MR_Integer) 1))))
#line 1370 "dir.m"
                              *mercury__dir__Result_20 = mercury__dir__DirRes_33;
#line 1368 "dir.m"
                            else
#line 1360 "dir.m"
                              {
#line 1360 "dir.m"
                                MR_Box mercury__dir__T_36 = (MR_hl_field(MR_mktag(0), mercury__dir__DirRes_33, (MR_Integer) 0));

#line 1364 "dir.m"
                                if ((mercury__dir__CleanupRes_35 == ((MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0)))))
#line 1362 "dir.m"
                                  *mercury__dir__Result_20 = mercury__dir__DirRes_33;
#line 1364 "dir.m"
                                else
#line 1365 "dir.m"
                                  {
#line 1365 "dir.m"
                                    MR_Word mercury__dir__Error_37 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__CleanupRes_35, (MR_Integer) 0)));

#line 1366 "dir.m"
                                    {
#line 1366 "dir.m"
                                      MR_Word base;
#line 1366 "dir.m"
                                      base = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL));
#line 1366 "dir.m"
                                      *mercury__dir__Result_20 = base;
#line 1366 "dir.m"
                                      MR_hl_field(MR_mktag(1), base, 0) = mercury__dir__T_36;
#line 1366 "dir.m"
                                      MR_hl_field(MR_mktag(1), base, 1) = ((MR_Box) (mercury__dir__Error_37));
#line 1366 "dir.m"
                                    }
#line 1365 "dir.m"
                                  }
#line 1360 "dir.m"
                              }
#line 1357 "dir.m"
                          }
#line 1342 "dir.m"
                      }
#line 1380 "dir.m"
                      break;
#line 1380 "dir.m"
                    case (MR_Integer) 2:
#line 1385 "dir.m"
                      {
#line 1385 "dir.m"
                        MR_Word mercury__dir__Error_67 = ((MR_Word) (MR_hl_field(MR_mktag(2), mercury__dir__OpenResult_24, (MR_Integer) 0)));

#line 1386 "dir.m"
                        *mercury__dir__Continue_18 = (MR_Integer) 0;
#line 1387 "dir.m"
                        {
#line 1387 "dir.m"
                          MR_Word base;
#line 1387 "dir.m"
                          base = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL));
#line 1387 "dir.m"
                          *mercury__dir__Result_20 = base;
#line 1387 "dir.m"
                          MR_hl_field(MR_mktag(1), base, 0) = mercury__dir__T0_19;
#line 1387 "dir.m"
                          MR_hl_field(MR_mktag(1), base, 1) = ((MR_Box) (mercury__dir__Error_67));
#line 1387 "dir.m"
                        }
#line 1385 "dir.m"
                      }
#line 1380 "dir.m"
                      break;
#line 1380 "dir.m"
                  }
#line 1339 "dir.m"
                }
#line 1389 "dir.m"
                break;
#line 1389 "dir.m"
              case (MR_Integer) 1:
#line 1390 "dir.m"
                {
#line 1392 "dir.m"
                  *mercury__dir__Continue_18 = (MR_Integer) 1;
#line 1393 "dir.m"
                  {
#line 1393 "dir.m"
                    MR_Word base;
#line 1393 "dir.m"
                    base = (MR_Word) MR_new_object(MR_Word, ((MR_Integer) 1 * sizeof(MR_Word)), NULL, NULL);
#line 1393 "dir.m"
                    *mercury__dir__Result_20 = base;
#line 1393 "dir.m"
                    MR_hl_field(MR_mktag(0), base, 0) = mercury__dir__T0_19;
#line 1393 "dir.m"
                  }
#line 1390 "dir.m"
                }
#line 1389 "dir.m"
                break;
#line 1389 "dir.m"
            }
#line 1389 "dir.m"
          }
#line 1337 "dir.m"
      }
#line 1400 "dir.m"
    else
#line 1401 "dir.m"
      {
#line 1401 "dir.m"
        MR_Word mercury__dir__V_58_58;

#line 1401 "dir.m"
        *mercury__dir__Continue_18 = (MR_Integer) 0;
#line 956 "io.opt"
        mercury__dir__V_58_58 = (MR_Word) ((MR_Box) ((MR_String) "dir.foldl2 not implemented on this platform"));
#line 1402 "dir.m"
        {
#line 1402 "dir.m"
          MR_Word base;
#line 1402 "dir.m"
          base = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL));
#line 1402 "dir.m"
          *mercury__dir__Result_20 = base;
#line 1402 "dir.m"
          MR_hl_field(MR_mktag(1), base, 0) = mercury__dir__T0_19;
#line 1402 "dir.m"
          MR_hl_field(MR_mktag(1), base, 1) = ((MR_Box) (mercury__dir__V_58_58));
#line 1402 "dir.m"
        }
#line 1401 "dir.m"
      }
#line 1400 "dir.m"
  }
#line 1309 "dir.m"
}

#line 1299 "dir.m"
MR_String MR_CALL 
mercury__dir__fixup_dirname_1_f_0(
#line 1299 "dir.m"
  MR_String mercury__dir__Dir0_3)
#line 1299 "dir.m"
{
#line 1301 "dir.m"
  {
#line 1301 "dir.m"
    MR_bool mercury__dir__succeeded;
#line 1301 "dir.m"
    MR_String mercury__dir__Dir_4;
#line 1301 "dir.m"
    MR_Word mercury__dir__DirChars_5;
#line 1301 "dir.m"
    MR_Word mercury__dir__V_6_6;

#line 956 "string.opt"
    {
#line 956 "string.opt"
      mercury__string__to_char_list_2_p_0(mercury__dir__Dir0_3, &mercury__dir__V_6_6);
    }
#line 1302 "dir.m"
    {
#line 1302 "dir.m"
      mercury__dir__DirChars_5 = mercury__dir__canonicalize_path_chars_1_f_0(mercury__dir__V_6_6);
    }
#line 1303 "dir.m"
    {
#line 1303 "dir.m"
      mercury__dir__succeeded = mercury__dir__is_root_directory_1_p_0(mercury__dir__DirChars_5);
    }
#line 1305 "dir.m"
    if (mercury__dir__succeeded)
#line 1304 "dir.m"
      mercury__dir__Dir_4 = mercury__dir__Dir0_3;
#line 1305 "dir.m"
    else
#line 1306 "dir.m"
      {
#line 1306 "dir.m"
        MR_Word mercury__dir__V_7_7;
#line 577 "dir.m"
        MR_Word mercury__dir__Chars1_11;
#line 579 "dir.m"
        MR_Word mercury__dir__TypeCtorInfo_6_13 = (MR_Word) &mercury__builtin__builtin__type_ctor_info_character_0;
#line 579 "dir.m"
        MR_Char mercury__dir__Sep_12;
#line 579 "dir.m"
        MR_Box mercury__dir__conv0_Sep_12;

#line 579 "dir.m"
        {
#line 579 "dir.m"
          mercury__dir__succeeded = mercury__list__split_last_3_p_0(mercury__dir__TypeCtorInfo_6_13, mercury__dir__DirChars_5, &mercury__dir__Chars1_11, &mercury__dir__conv0_Sep_12);
        }
#line 579 "dir.m"
        if (mercury__dir__succeeded)
#line 579 "dir.m"
          {
#line 579 "dir.m"
            mercury__dir__Sep_12 = ((MR_Char) (MR_Word) mercury__dir__conv0_Sep_12);
#line 579 "dir.m"
            mercury__dir__succeeded = MR_TRUE;
#line 579 "dir.m"
          }
#line 579 "dir.m"
        if (mercury__dir__succeeded)
#line 580 "dir.m"
          {
#line 580 "dir.m"
            mercury__dir__succeeded = mercury__dir__is_directory_separator_1_p_0(mercury__dir__Sep_12);
          }
#line 577 "dir.m"
        if (mercury__dir__succeeded)
#line 582 "dir.m"
          mercury__dir__V_7_7 = mercury__dir__Chars1_11;
#line 577 "dir.m"
        else
#line 584 "dir.m"
          mercury__dir__V_7_7 = mercury__dir__DirChars_5;
#line 500 "string.opt"
        {
#line 500 "string.opt"
          mercury__string__from_char_list_2_p_0(mercury__dir__V_7_7, &mercury__dir__Dir_4);
        }
#line 1306 "dir.m"
      }
#line 1301 "dir.m"
    return mercury__dir__Dir_4;
#line 1301 "dir.m"
  }
#line 1299 "dir.m"
}

#line 1266 "dir.m"
static void MR_CALL 
mercury__dir__check_dir_accessibility_4_p_0(
#line 1266 "dir.m"
  MR_String mercury__dir__DirName_5,
#line 1266 "dir.m"
  MR_Word * mercury__dir__Res_6)
#line 1266 "dir.m"
{
#line 1277 "dir.m"
  {
#line 1277 "dir.m"
    MR_bool mercury__dir__succeeded;
#line 1277 "dir.m"
    MR_Word mercury__dir__V_10_10 = (MR_Word) MR_mkword(MR_mktag(1), &mercury__dir_scalar_common_1[3]);

#line 67 "builtin.opt"
{
#define MR_PROC_LABEL mercury__dir__check_dir_accessibility_4_p_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 67 "builtin.opt"

    SUCCESS_INDICATOR = MR_FALSE;

#line 5850 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 67 "builtin.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 619 "io.opt"
    if (mercury__dir__succeeded)
#line 618 "io.opt"
      {
#line 618 "io.opt"
        mercury__io__check_file_accessibility_dotnet_5_p_0(mercury__dir__DirName_5, mercury__dir__V_10_10, mercury__dir__Res_6);
#line 618 "io.opt"
        return;
      }
#line 619 "io.opt"
    else
#line 623 "io.opt"
      {
#line 623 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__check_dir_accessibility_4_p_0

	MR_String FileName;
	MR_Word AccessTypes;
	MR_Word Result;

	FileName =  mercury__dir__DirName_5 ;
	AccessTypes =  mercury__dir__V_10_10 ;
		{
#line 623 "io.opt"

#if defined(MR_HAVE_ACCESS)
  #ifdef F_OK
    int mode = F_OK;
  #else
    int mode = 0;
  #endif
    int access_result;

  #if !defined(MR_WIN32) || defined(MR_CYGWIN)
    /*
    ** Earlier versions of MSVCRT ignored flags it doesn't support,
    ** later versions return an error (e.g. on Vista).
    */
    if (ML_access_types_includes_execute(AccessTypes)) {
      #ifdef X_OK
        mode |= X_OK;
      #else
        mode |= 1;
      #endif
    }
  #endif
    if (ML_access_types_includes_write(AccessTypes)) {
  #ifdef W_OK
        mode |= W_OK;
  #else
        mode |= 2;
  #endif
    }
    if (ML_access_types_includes_read(AccessTypes)) {
  #ifdef R_OK
        mode |= R_OK;
  #else
        mode |= 4;
  #endif
    }

  #ifdef MR_WIN32
    access_result = _waccess(ML_utf8_to_wide(FileName), mode);
  #else
    access_result = access(FileName, mode);
  #endif

    if (access_result == 0) {
        Result = ML_make_io_res_0_ok();
    } else {
        ML_make_io_res_0_error(errno,
            MR_make_string_const("file not accessible: "), &Result);
    }
#else /* !MR_HAVE_ACCESS */
    Result = ML_make_io_res_0_error_msg(
        "io.check_file_accessibility not supported on this platform");
#endif

#line 5938 "dir.c"

		;}
#undef MR_PROC_LABEL
	 *mercury__dir__Res_6  = Result;
#line 623 "io.opt"
}
#line 623 "io.opt"
      }
#line 1277 "dir.m"
  }
#line 1266 "dir.m"
}

#line 1243 "dir.m"
static void MR_CALL 
mercury__dir__make_mkdir_res_exists_5_p_0(
#line 1243 "dir.m"
  MR_Box mercury__dir__Error_6,
#line 1243 "dir.m"
  MR_String mercury__dir__DirName_7,
#line 1243 "dir.m"
  MR_Word * mercury__dir__Res_8)
#line 1243 "dir.m"
{
#line 1258 "dir.m"
  {
#line 1258 "dir.m"
    MR_bool mercury__dir__succeeded;
#line 1258 "dir.m"
    MR_Word mercury__dir__TypeResult_10;
#line 1260 "dir.m"
    MR_Word mercury__dir__V_15_15;

#line 1259 "dir.m"
    {
#line 1259 "dir.m"
      mercury__io__file_type_5_p_0((MR_Integer) 1, mercury__dir__DirName_7, &mercury__dir__TypeResult_10);
    }
#line 1260 "dir.m"
    mercury__dir__succeeded = ((MR_tag((MR_Word) mercury__dir__TypeResult_10)) == (MR_mktag((MR_Integer) 0)));
#line 1260 "dir.m"
    if (mercury__dir__succeeded)
#line 1260 "dir.m"
      {
#line 1260 "dir.m"
        mercury__dir__V_15_15 = ((MR_Word) (MR_hl_field(MR_mktag(0), mercury__dir__TypeResult_10, (MR_Integer) 0)));
#line 1260 "dir.m"
        mercury__dir__succeeded = (mercury__dir__V_15_15 == (MR_Integer) 1);
#line 1260 "dir.m"
      }
#line 1262 "dir.m"
    if (mercury__dir__succeeded)
#line 1277 "dir.m"
      {
#line 1277 "dir.m"
        MR_Word mercury__dir__V_23_23 = (MR_Word) MR_mkword(MR_mktag(1), &mercury__dir_scalar_common_1[3]);

#line 67 "builtin.opt"
{
#define MR_PROC_LABEL mercury__dir__make_mkdir_res_exists_5_p_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 67 "builtin.opt"

    SUCCESS_INDICATOR = MR_FALSE;

#line 6007 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 67 "builtin.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 619 "io.opt"
        if (mercury__dir__succeeded)
#line 618 "io.opt"
          {
#line 618 "io.opt"
            mercury__io__check_file_accessibility_dotnet_5_p_0(mercury__dir__DirName_7, mercury__dir__V_23_23, mercury__dir__Res_8);
#line 618 "io.opt"
            return;
          }
#line 619 "io.opt"
        else
#line 623 "io.opt"
          {
#line 623 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__make_mkdir_res_exists_5_p_0

	MR_String FileName;
	MR_Word AccessTypes;
	MR_Word Result;

	FileName =  mercury__dir__DirName_7 ;
	AccessTypes =  mercury__dir__V_23_23 ;
		{
#line 623 "io.opt"

#if defined(MR_HAVE_ACCESS)
  #ifdef F_OK
    int mode = F_OK;
  #else
    int mode = 0;
  #endif
    int access_result;

  #if !defined(MR_WIN32) || defined(MR_CYGWIN)
    /*
    ** Earlier versions of MSVCRT ignored flags it doesn't support,
    ** later versions return an error (e.g. on Vista).
    */
    if (ML_access_types_includes_execute(AccessTypes)) {
      #ifdef X_OK
        mode |= X_OK;
      #else
        mode |= 1;
      #endif
    }
  #endif
    if (ML_access_types_includes_write(AccessTypes)) {
  #ifdef W_OK
        mode |= W_OK;
  #else
        mode |= 2;
  #endif
    }
    if (ML_access_types_includes_read(AccessTypes)) {
  #ifdef R_OK
        mode |= R_OK;
  #else
        mode |= 4;
  #endif
    }

  #ifdef MR_WIN32
    access_result = _waccess(ML_utf8_to_wide(FileName), mode);
  #else
    access_result = access(FileName, mode);
  #endif

    if (access_result == 0) {
        Result = ML_make_io_res_0_ok();
    } else {
        ML_make_io_res_0_error(errno,
            MR_make_string_const("file not accessible: "), &Result);
    }
#else /* !MR_HAVE_ACCESS */
    Result = ML_make_io_res_0_error_msg(
        "io.check_file_accessibility not supported on this platform");
#endif

#line 6095 "dir.c"

		;}
#undef MR_PROC_LABEL
	 *mercury__dir__Res_8  = Result;
#line 623 "io.opt"
}
#line 623 "io.opt"
          }
#line 1277 "dir.m"
      }
#line 1262 "dir.m"
    else
#line 1239 "dir.m"
      {
#line 1239 "dir.m"
        MR_String mercury__dir__Msg_39;
#line 1239 "dir.m"
        MR_Word mercury__dir__V_41_41;

#line 825 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__make_mkdir_res_exists_5_p_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 825 "io.opt"

#if defined(MR_WIN32)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 6130 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 825 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 963 "io.opt"
        if (mercury__dir__succeeded)
#line 967 "io.opt"
          {
#line 967 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__make_mkdir_res_exists_5_p_0

	MR_Integer Error;
	MR_String Msg0;
	MR_String Msg;

	MR_MAYBE_UNBOX_FOREIGN_TYPE(MR_Integer, mercury__dir__Error_6 , Error);
	Msg0 =  (MR_String) "dir.make_directory failed: " ;
		{
#line 967 "io.opt"

    ML_maybe_make_win32_err_msg(MR_TRUE, Error, Msg0, MR_ALLOC_ID, Msg);

#line 6158 "dir.c"

		;}
#undef MR_PROC_LABEL
	 mercury__dir__Msg_39  = Msg;
#line 967 "io.opt"
}
#line 967 "io.opt"
          }
#line 963 "io.opt"
        else
#line 952 "io.opt"
          {
#line 952 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__make_mkdir_res_exists_5_p_0

	MR_Integer Error;
	MR_String Msg0;
	MR_String Msg;

	MR_MAYBE_UNBOX_FOREIGN_TYPE(MR_Integer, mercury__dir__Error_6 , Error);
	Msg0 =  (MR_String) "dir.make_directory failed: " ;
		{
#line 952 "io.opt"

    ML_maybe_make_err_msg(MR_TRUE, Error, Msg0, MR_ALLOC_ID, Msg);

#line 6186 "dir.c"

		;}
#undef MR_PROC_LABEL
	 mercury__dir__Msg_39  = Msg;
#line 952 "io.opt"
}
#line 952 "io.opt"
          }
#line 956 "io.opt"
        mercury__dir__V_41_41 = (MR_Word) mercury__dir__Msg_39;
#line 1239 "dir.m"
        {
#line 1239 "dir.m"
          MR_Word base;
#line 1239 "dir.m"
          base = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 1 * sizeof(MR_Word)), NULL, NULL));
#line 1239 "dir.m"
          *mercury__dir__Res_8 = base;
#line 1239 "dir.m"
          MR_hl_field(MR_mktag(1), base, 0) = ((MR_Box) (mercury__dir__V_41_41));
#line 1239 "dir.m"
        }
#line 1239 "dir.m"
      }
#line 1258 "dir.m"
  }
#line 1243 "dir.m"
}

#line 1228 "dir.m"
static void MR_CALL 
mercury__dir__make_mkdir_res_error_4_p_0(
#line 1228 "dir.m"
  MR_Box mercury__dir__Error_5,
#line 1228 "dir.m"
  MR_Word * mercury__dir__HeadVar__2_2)
#line 1228 "dir.m"
{
#line 1239 "dir.m"
  {
#line 1239 "dir.m"
    MR_bool mercury__dir__succeeded;
#line 1239 "dir.m"
    MR_String mercury__dir__Msg_6;
#line 1239 "dir.m"
    MR_Word mercury__dir__V_10_10;

#line 825 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__make_mkdir_res_error_4_p_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 825 "io.opt"

#if defined(MR_WIN32)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 6249 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 825 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 963 "io.opt"
    if (mercury__dir__succeeded)
#line 967 "io.opt"
      {
#line 967 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__make_mkdir_res_error_4_p_0

	MR_Integer Error;
	MR_String Msg0;
	MR_String Msg;

	MR_MAYBE_UNBOX_FOREIGN_TYPE(MR_Integer, mercury__dir__Error_5 , Error);
	Msg0 =  (MR_String) "dir.make_directory failed: " ;
		{
#line 967 "io.opt"

    ML_maybe_make_win32_err_msg(MR_TRUE, Error, Msg0, MR_ALLOC_ID, Msg);

#line 6277 "dir.c"

		;}
#undef MR_PROC_LABEL
	 mercury__dir__Msg_6  = Msg;
#line 967 "io.opt"
}
#line 967 "io.opt"
      }
#line 963 "io.opt"
    else
#line 952 "io.opt"
      {
#line 952 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__make_mkdir_res_error_4_p_0

	MR_Integer Error;
	MR_String Msg0;
	MR_String Msg;

	MR_MAYBE_UNBOX_FOREIGN_TYPE(MR_Integer, mercury__dir__Error_5 , Error);
	Msg0 =  (MR_String) "dir.make_directory failed: " ;
		{
#line 952 "io.opt"

    ML_maybe_make_err_msg(MR_TRUE, Error, Msg0, MR_ALLOC_ID, Msg);

#line 6305 "dir.c"

		;}
#undef MR_PROC_LABEL
	 mercury__dir__Msg_6  = Msg;
#line 952 "io.opt"
}
#line 952 "io.opt"
      }
#line 956 "io.opt"
    mercury__dir__V_10_10 = (MR_Word) mercury__dir__Msg_6;
#line 1239 "dir.m"
    {
#line 1239 "dir.m"
      MR_Word base;
#line 1239 "dir.m"
      base = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 1 * sizeof(MR_Word)), NULL, NULL));
#line 1239 "dir.m"
      *mercury__dir__HeadVar__2_2 = base;
#line 1239 "dir.m"
      MR_hl_field(MR_mktag(1), base, 0) = ((MR_Box) (mercury__dir__V_10_10));
#line 1239 "dir.m"
    }
#line 1239 "dir.m"
  }
#line 1228 "dir.m"
}

#line 1216 "dir.m"
static MR_Word MR_CALL 
mercury__dir__make_mkdir_res_ok_0_f_0(void)
#line 1216 "dir.m"
{
#line 1226 "dir.m"
  {
#line 1226 "dir.m"
    MR_bool mercury__dir__succeeded;
#line 1226 "dir.m"
    MR_Word mercury__dir__HeadVar__1_1 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));

#line 1226 "dir.m"
    return mercury__dir__HeadVar__1_1;
#line 1226 "dir.m"
  }
#line 1216 "dir.m"
}

#line 1094 "dir.m"
void MR_CALL 
mercury__dir__make_single_directory_2_5_p_0(
#line 1094 "dir.m"
  MR_Integer mercury__dir__ErrorIfExists_1,
#line 1094 "dir.m"
  MR_String mercury__dir__DirName_2,
#line 1094 "dir.m"
  MR_Word * mercury__dir__Result_3)
#line 1094 "dir.m"
{
#line 1097 "dir.m"
  {
#line 1097 "dir.m"
    MR_bool mercury__dir__succeeded;

#line 1103 "dir.m"
{
#define MR_PROC_LABEL mercury__dir__make_single_directory_2_5_p_0

	MR_Integer ErrorIfExists;
	MR_String DirName;
	MR_Word Result;

	ErrorIfExists =  mercury__dir__ErrorIfExists_1 ;
	DirName =  mercury__dir__DirName_2 ;
		{
#line 1103 "dir.m"

#if defined(MR_WIN32)
    if (CreateDirectoryW(ML_utf8_to_wide(DirName), NULL)) {
        Result = ML_make_mkdir_res_ok();
    } else {
        int error;

        error = GetLastError();
        if (!ErrorIfExists && error == ERROR_ALREADY_EXISTS) {
            ML_make_mkdir_res_exists(error, DirName, &Result);
        } else {
            ML_make_mkdir_res_error(error, &Result);
        }
    }
#elif defined(MR_HAVE_MKDIR)
    if (mkdir(DirName, 0777) == 0) {
        Result = ML_make_mkdir_res_ok();
  #ifdef EEXIST
    } else if (!ErrorIfExists && errno == EEXIST) {
        ML_make_mkdir_res_exists(errno, DirName, &Result);
  #endif /* EEXIST */
    } else {
        ML_make_mkdir_res_error(errno, &Result);
    }
#else /* !MR_WIN32 && !MR_HAVE_MKDIR */
    MR_fatal_error(
        "dir.make_single_directory_2 called but not supported");
#endif

#line 6409 "dir.c"

		;}
#undef MR_PROC_LABEL
	 *mercury__dir__Result_3  = Result;
#line 1103 "dir.m"
}
#line 1097 "dir.m"
  }
#line 1094 "dir.m"
}

#line 1049 "dir.m"
static MR_bool MR_CALL 
mercury__dir__can_implement_make_directory_0_p_0(void)
#line 1049 "dir.m"
{
#line 1053 "dir.m"
  {
#line 1053 "dir.m"
    MR_bool mercury__dir__succeeded;

#line 1057 "dir.m"
{
#define MR_PROC_LABEL mercury__dir__can_implement_make_directory_0_p_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 1057 "dir.m"

#if defined(MR_WIN32)
    SUCCESS_INDICATOR = MR_TRUE;
#elif defined(MR_HAVE_MKDIR)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 6448 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 1057 "dir.m"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 1053 "dir.m"
    return mercury__dir__succeeded;
#line 1053 "dir.m"
  }
#line 1049 "dir.m"
}

#line 591 "dir.m"
MR_bool MR_CALL 
mercury__dir__is_root_directory_1_p_0(
#line 591 "dir.m"
  MR_Word mercury__dir__FileName_2)
#line 591 "dir.m"
{
#line 598 "dir.m"
  {
#line 598 "dir.m"
    MR_bool mercury__dir__succeeded;

#line 67 "builtin.opt"
{
#define MR_PROC_LABEL mercury__dir__is_root_directory_1_p_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 67 "builtin.opt"

    SUCCESS_INDICATOR = MR_FALSE;

#line 6487 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 67 "builtin.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 598 "dir.m"
    if (mercury__dir__succeeded)
#line 597 "dir.m"
      {
#line 597 "dir.m"
        MR_String mercury__dir__V_4_4;

#line 500 "string.opt"
        {
#line 500 "string.opt"
          mercury__string__from_char_list_2_p_0(mercury__dir__FileName_2, &mercury__dir__V_4_4);
        }
#line 684 "dir.m"
        {
#line 684 "dir.m"
          mercury__dir__succeeded = mercury__dir__path_name_is_absolute_1_p_0(mercury__dir__V_4_4);
        }
#line 597 "dir.m"
        if (mercury__dir__succeeded)
#line 597 "dir.m"
          {
#line 703 "dir.m"
            {
#line 703 "dir.m"
              mercury__require__error_1_p_0((MR_String) "dir.is_dotnet_root_directory called for non-.NET CLI backend");
            }
#line 687 "dir.m"
            mercury__dir__succeeded = MR_TRUE;
#line 597 "dir.m"
          }
#line 597 "dir.m"
      }
#line 598 "dir.m"
    else
#line 604 "dir.m"
      {
#line 325 "dir.m"
        {
#line 325 "dir.m"
          MR_Char mercury__dir__V_27_27;

#line 825 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__is_root_directory_1_p_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 825 "io.opt"

#if defined(MR_WIN32)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 6552 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 825 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 273 "dir.m"
          if (mercury__dir__succeeded)
#line 273 "dir.m"
            mercury__dir__V_27_27 = (MR_Char) 92;
#line 273 "dir.m"
          else
#line 273 "dir.m"
            mercury__dir__V_27_27 = (MR_Char) 47;
#line 325 "dir.m"
          mercury__dir__succeeded = (mercury__dir__V_27_27 == (MR_Char) 92);
#line 325 "dir.m"
        }
#line 600 "dir.m"
        if (!(mercury__dir__succeeded))
#line 797 "io.opt"
          {
#line 797 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__is_root_directory_1_p_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 797 "io.opt"

#if defined(MR_CYGWIN)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 6592 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 797 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 797 "io.opt"
          }
#line 604 "dir.m"
        if (mercury__dir__succeeded)
#line 603 "dir.m"
          {
#line 603 "dir.m"
            MR_Word mercury__dir__TypeInfo_8_8;
#line 603 "dir.m"
            MR_Word mercury__dir__V_5_5 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 603 "dir.m"
            MR_Word mercury__dir__V_7_7;
#line 619 "dir.m"
            MR_Word mercury__dir__STATE_VARIABLE_FileName_6_31;
#line 635 "dir.m"
            MR_Char mercury__dir__Letter_35;
#line 635 "dir.m"
            MR_Char mercury__dir__Sep_36;
#line 635 "dir.m"
            MR_Word mercury__dir__V_39_39;
#line 635 "dir.m"
            MR_Char mercury__dir__V_40_40;
#line 635 "dir.m"
            MR_Word mercury__dir__V_41_41;

#line 634 "dir.m"
            mercury__dir__succeeded = ((MR_tag((MR_Word) mercury__dir__FileName_2)) == (MR_mktag((MR_Integer) 1)));
#line 634 "dir.m"
            if (mercury__dir__succeeded)
#line 634 "dir.m"
              {
#line 634 "dir.m"
                mercury__dir__Letter_35 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__FileName_2, (MR_Integer) 0)));
#line 634 "dir.m"
                mercury__dir__V_39_39 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__FileName_2, (MR_Integer) 1)));
#line 634 "dir.m"
                mercury__dir__succeeded = ((MR_tag((MR_Word) mercury__dir__V_39_39)) == (MR_mktag((MR_Integer) 1)));
#line 634 "dir.m"
                if (mercury__dir__succeeded)
#line 634 "dir.m"
                  {
#line 634 "dir.m"
                    mercury__dir__V_40_40 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__V_39_39, (MR_Integer) 0)));
#line 634 "dir.m"
                    mercury__dir__V_41_41 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__V_39_39, (MR_Integer) 1)));
#line 634 "dir.m"
                    mercury__dir__succeeded = (mercury__dir__V_40_40 == (MR_Char) 58);
#line 635 "dir.m"
                    if (mercury__dir__succeeded)
#line 635 "dir.m"
                      {
#line 634 "dir.m"
                        mercury__dir__succeeded = ((MR_tag((MR_Word) mercury__dir__V_41_41)) == (MR_mktag((MR_Integer) 1)));
#line 634 "dir.m"
                        if (mercury__dir__succeeded)
#line 634 "dir.m"
                          {
#line 634 "dir.m"
                            mercury__dir__Sep_36 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__V_41_41, (MR_Integer) 0)));
#line 634 "dir.m"
                            mercury__dir__STATE_VARIABLE_FileName_6_31 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__V_41_41, (MR_Integer) 1)));
#line 636 "dir.m"
                            {
#line 636 "dir.m"
                              mercury__dir__succeeded = mercury__char__is_alpha_1_p_0(mercury__dir__Letter_35);
                            }
#line 635 "dir.m"
                            if (mercury__dir__succeeded)
#line 637 "dir.m"
                              {
#line 637 "dir.m"
                                mercury__dir__succeeded = mercury__dir__is_directory_separator_1_p_0(mercury__dir__Sep_36);
                              }
#line 634 "dir.m"
                          }
#line 635 "dir.m"
                      }
#line 634 "dir.m"
                  }
#line 634 "dir.m"
              }
#line 619 "dir.m"
            if (mercury__dir__succeeded)
#line 619 "dir.m"
              {
#line 619 "dir.m"
                mercury__dir__V_7_7 = mercury__dir__STATE_VARIABLE_FileName_6_31;
#line 619 "dir.m"
                mercury__dir__succeeded = MR_TRUE;
#line 619 "dir.m"
              }
#line 619 "dir.m"
            else
#line 621 "dir.m"
              {
#line 621 "dir.m"
                MR_Word mercury__dir__STATE_VARIABLE_FileName_7_32;
#line 659 "dir.m"
                MR_Char mercury__dir__Sep_43;
#line 659 "dir.m"
                MR_Word mercury__dir__Server_45;
#line 659 "dir.m"
                MR_Word mercury__dir__STATE_VARIABLE_FileName_0_53;
#line 659 "dir.m"
                MR_Word mercury__dir__V_54_54;
#line 659 "dir.m"
                MR_Word mercury__dir__STATE_VARIABLE_FileName_17_56;
#line 659 "dir.m"
                MR_Char mercury__dir__V_70_70;
#line 663 "dir.m"
                MR_Char mercury__dir__V_46_46;
#line 663 "dir.m"
                MR_Word mercury__dir__V_47_47;

#line 659 "dir.m"
                mercury__dir__succeeded = ((MR_tag((MR_Word) mercury__dir__FileName_2)) == (MR_mktag((MR_Integer) 1)));
#line 659 "dir.m"
                if (mercury__dir__succeeded)
#line 659 "dir.m"
                  {
#line 659 "dir.m"
                    mercury__dir__Sep_43 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__FileName_2, (MR_Integer) 0)));
#line 659 "dir.m"
                    mercury__dir__V_54_54 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__FileName_2, (MR_Integer) 1)));
#line 659 "dir.m"
                    mercury__dir__succeeded = ((MR_tag((MR_Word) mercury__dir__V_54_54)) == (MR_mktag((MR_Integer) 1)));
#line 659 "dir.m"
                    if (mercury__dir__succeeded)
#line 659 "dir.m"
                      {
#line 659 "dir.m"
                        mercury__dir__V_70_70 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__V_54_54, (MR_Integer) 0)));
#line 659 "dir.m"
                        mercury__dir__STATE_VARIABLE_FileName_0_53 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__V_54_54, (MR_Integer) 1)));
#line 659 "dir.m"
                        mercury__dir__succeeded = (mercury__dir__Sep_43 == mercury__dir__V_70_70);
#line 659 "dir.m"
                        if (mercury__dir__succeeded)
#line 659 "dir.m"
                          {
#line 660 "dir.m"
                            {
#line 660 "dir.m"
                              mercury__dir__succeeded = mercury__dir__is_directory_separator_1_p_0(mercury__dir__Sep_43);
                            }
#line 659 "dir.m"
                            if (mercury__dir__succeeded)
#line 659 "dir.m"
                              {
#line 661 "dir.m"
                                {
#line 661 "dir.m"
                                  mercury__dir__takewhile__ho7_4_p_in__list_0(mercury__dir__STATE_VARIABLE_FileName_0_53, &mercury__dir__Server_45, &mercury__dir__STATE_VARIABLE_FileName_17_56);
                                }
#line 663 "dir.m"
                                mercury__dir__succeeded = ((MR_tag((MR_Word) mercury__dir__Server_45)) == (MR_mktag((MR_Integer) 1)));
#line 663 "dir.m"
                                if (mercury__dir__succeeded)
#line 663 "dir.m"
                                  {
#line 663 "dir.m"
                                    mercury__dir__V_46_46 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__Server_45, (MR_Integer) 0)));
#line 663 "dir.m"
                                    mercury__dir__V_47_47 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__Server_45, (MR_Integer) 1)));
#line 666 "dir.m"
                                    if ((mercury__dir__STATE_VARIABLE_FileName_17_56 == ((MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0)))))
#line 665 "dir.m"
                                      {
#line 665 "dir.m"
                                        mercury__dir__STATE_VARIABLE_FileName_7_32 = mercury__dir__STATE_VARIABLE_FileName_17_56;
#line 665 "dir.m"
                                        mercury__dir__succeeded = MR_TRUE;
#line 665 "dir.m"
                                      }
#line 666 "dir.m"
                                    else
#line 667 "dir.m"
                                      {
#line 667 "dir.m"
                                        MR_Word mercury__dir__STATE_VARIABLE_FileName_19_58 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__STATE_VARIABLE_FileName_17_56, (MR_Integer) 1)));
#line 667 "dir.m"
                                        MR_Char mercury__dir__V_71_71 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__STATE_VARIABLE_FileName_17_56, (MR_Integer) 0)));

#line 667 "dir.m"
                                        mercury__dir__succeeded = (mercury__dir__Sep_43 == mercury__dir__V_71_71);
#line 667 "dir.m"
                                        if (mercury__dir__succeeded)
#line 670 "dir.m"
                                          {
#line 670 "dir.m"
                                            if ((mercury__dir__STATE_VARIABLE_FileName_19_58 == ((MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0)))))
#line 669 "dir.m"
                                              {
#line 669 "dir.m"
                                                mercury__dir__STATE_VARIABLE_FileName_7_32 = mercury__dir__STATE_VARIABLE_FileName_19_58;
#line 669 "dir.m"
                                                mercury__dir__succeeded = MR_TRUE;
#line 669 "dir.m"
                                              }
#line 670 "dir.m"
                                            else
#line 671 "dir.m"
                                              {
#line 671 "dir.m"
                                                MR_Word mercury__dir__Share_50;
#line 671 "dir.m"
                                                MR_Word mercury__dir__STATE_VARIABLE_FileName_21_60;
#line 674 "dir.m"
                                                MR_Char mercury__dir__V_51_51;
#line 674 "dir.m"
                                                MR_Word mercury__dir__V_52_52;

#line 672 "dir.m"
                                                {
#line 672 "dir.m"
                                                  mercury__dir__takewhile__ho6_4_p_in__list_0(mercury__dir__STATE_VARIABLE_FileName_19_58, &mercury__dir__Share_50, &mercury__dir__STATE_VARIABLE_FileName_21_60);
                                                }
#line 674 "dir.m"
                                                mercury__dir__succeeded = ((MR_tag((MR_Word) mercury__dir__Share_50)) == (MR_mktag((MR_Integer) 1)));
#line 674 "dir.m"
                                                if (mercury__dir__succeeded)
#line 674 "dir.m"
                                                  {
#line 674 "dir.m"
                                                    mercury__dir__V_51_51 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__Share_50, (MR_Integer) 0)));
#line 674 "dir.m"
                                                    mercury__dir__V_52_52 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__Share_50, (MR_Integer) 1)));
#line 676 "dir.m"
                                                    if ((mercury__dir__STATE_VARIABLE_FileName_21_60 == ((MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0)))))
#line 676 "dir.m"
                                                      {
#line 676 "dir.m"
                                                        mercury__dir__STATE_VARIABLE_FileName_7_32 = mercury__dir__STATE_VARIABLE_FileName_21_60;
#line 676 "dir.m"
                                                        mercury__dir__succeeded = MR_TRUE;
#line 676 "dir.m"
                                                      }
#line 676 "dir.m"
                                                    else
#line 675 "dir.m"
                                                      {
#line 675 "dir.m"
                                                        MR_Char mercury__dir__V_72_72 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__STATE_VARIABLE_FileName_21_60, (MR_Integer) 0)));

#line 675 "dir.m"
                                                        mercury__dir__STATE_VARIABLE_FileName_7_32 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__STATE_VARIABLE_FileName_21_60, (MR_Integer) 1)));
#line 675 "dir.m"
                                                        mercury__dir__succeeded = (mercury__dir__Sep_43 == mercury__dir__V_72_72);
#line 675 "dir.m"
                                                      }
#line 674 "dir.m"
                                                  }
#line 671 "dir.m"
                                              }
#line 670 "dir.m"
                                          }
#line 667 "dir.m"
                                      }
#line 663 "dir.m"
                                  }
#line 659 "dir.m"
                              }
#line 659 "dir.m"
                          }
#line 659 "dir.m"
                      }
#line 659 "dir.m"
                  }
#line 621 "dir.m"
                if (mercury__dir__succeeded)
#line 621 "dir.m"
                  {
#line 621 "dir.m"
                    mercury__dir__V_7_7 = mercury__dir__STATE_VARIABLE_FileName_7_32;
#line 621 "dir.m"
                    mercury__dir__succeeded = MR_TRUE;
#line 621 "dir.m"
                  }
#line 621 "dir.m"
                else
#line 645 "dir.m"
                  {
#line 645 "dir.m"
                    MR_Char mercury__dir__Char1_74;
#line 645 "dir.m"
                    MR_Word mercury__dir__STATE_VARIABLE_FileName_0_77;

#line 644 "dir.m"
                    mercury__dir__succeeded = ((MR_tag((MR_Word) mercury__dir__FileName_2)) == (MR_mktag((MR_Integer) 1)));
#line 644 "dir.m"
                    if (mercury__dir__succeeded)
#line 644 "dir.m"
                      {
#line 644 "dir.m"
                        mercury__dir__Char1_74 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__FileName_2, (MR_Integer) 0)));
#line 644 "dir.m"
                        mercury__dir__STATE_VARIABLE_FileName_0_77 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__FileName_2, (MR_Integer) 1)));
#line 646 "dir.m"
                        {
#line 646 "dir.m"
                          mercury__dir__succeeded = mercury__dir__is_directory_separator_1_p_0(mercury__dir__Char1_74);
                        }
#line 645 "dir.m"
                        if (mercury__dir__succeeded)
#line 649 "dir.m"
                          {
#line 649 "dir.m"
                            if ((mercury__dir__STATE_VARIABLE_FileName_0_77 == ((MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0)))))
#line 648 "dir.m"
                              {
#line 648 "dir.m"
                                mercury__dir__V_7_7 = mercury__dir__STATE_VARIABLE_FileName_0_77;
#line 648 "dir.m"
                                mercury__dir__succeeded = MR_TRUE;
#line 648 "dir.m"
                              }
#line 649 "dir.m"
                            else
#line 650 "dir.m"
                              {
#line 650 "dir.m"
                                MR_Char mercury__dir__Char2_76 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__STATE_VARIABLE_FileName_0_77, (MR_Integer) 0)));

#line 650 "dir.m"
                                mercury__dir__V_7_7 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__STATE_VARIABLE_FileName_0_77, (MR_Integer) 1)));
#line 651 "dir.m"
                                {
#line 651 "dir.m"
                                  mercury__dir__succeeded = mercury__dir__is_directory_separator_1_p_0(mercury__dir__Char2_76);
                                }
#line 651 "dir.m"
                                mercury__dir__succeeded = !(mercury__dir__succeeded);
#line 650 "dir.m"
                              }
#line 649 "dir.m"
                          }
#line 644 "dir.m"
                      }
#line 645 "dir.m"
                  }
#line 621 "dir.m"
              }
#line 603 "dir.m"
            if (mercury__dir__succeeded)
#line 603 "dir.m"
              {
#line 6947 "dir.c"
                mercury__dir__TypeInfo_8_8 = (MR_Word) &mercury__dir_scalar_common_1[0];
#line 603 "dir.m"
                {
#line 603 "dir.m"
                  return mercury__dir__succeeded = mercury__builtin__unify_2_p_0(mercury__dir__TypeInfo_8_8, ((MR_Box) (mercury__dir__V_5_5)), ((MR_Box) (mercury__dir__V_7_7)));
                }
#line 603 "dir.m"
              }
#line 603 "dir.m"
          }
#line 604 "dir.m"
        else
#line 605 "dir.m"
          {
#line 605 "dir.m"
            MR_Char mercury__dir__Char_3;
#line 605 "dir.m"
            MR_Word mercury__dir__V_6_6;

#line 605 "dir.m"
            mercury__dir__succeeded = ((MR_tag((MR_Word) mercury__dir__FileName_2)) == (MR_mktag((MR_Integer) 1)));
#line 605 "dir.m"
            if (mercury__dir__succeeded)
#line 605 "dir.m"
              {
#line 605 "dir.m"
                mercury__dir__Char_3 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__FileName_2, (MR_Integer) 0)));
#line 605 "dir.m"
                mercury__dir__V_6_6 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__FileName_2, (MR_Integer) 1)));
#line 605 "dir.m"
                mercury__dir__succeeded = (mercury__dir__V_6_6 == ((MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0))));
#line 605 "dir.m"
                if (mercury__dir__succeeded)
#line 606 "dir.m"
                  {
#line 606 "dir.m"
                    return mercury__dir__succeeded = mercury__dir__is_directory_separator_1_p_0(mercury__dir__Char_3);
                  }
#line 605 "dir.m"
              }
#line 605 "dir.m"
          }
#line 604 "dir.m"
      }
#line 598 "dir.m"
    return mercury__dir__succeeded;
#line 598 "dir.m"
  }
#line 591 "dir.m"
}

#line 545 "dir.m"
static MR_Word MR_CALL 
mercury__dir__canonicalize_path_chars_2_2_f_0(
#line 545 "dir.m"
  MR_Word mercury__dir__HeadVar__1_1,
#line 545 "dir.m"
  MR_Word mercury__dir__HeadVar__2_2)
#line 545 "dir.m"
{
#line 547 "dir.m"
  while (MR_TRUE)
#line 547 "dir.m"
    {
#line 547 "dir.m"
      /* tailcall optimized into a loop */
#line 547 "dir.m"
      {
#line 547 "dir.m"
        MR_bool mercury__dir__succeeded;
#line 547 "dir.m"
        MR_Word mercury__dir__HeadVar__3_3;

#line 547 "dir.m"
        if ((mercury__dir__HeadVar__1_1 == ((MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0)))))
#line 547 "dir.m"
          {
#line 547 "dir.m"
            MR_Word mercury__dir__TypeCtorInfo_12_12 = (MR_Word) &mercury__builtin__builtin__type_ctor_info_character_0;

#line 1040 "list.opt"
            {
#line 1040 "list.opt"
              mercury__list__reverse_2_p_0(mercury__dir__TypeCtorInfo_12_12, mercury__dir__HeadVar__2_2, &mercury__dir__HeadVar__3_3);
            }
#line 547 "dir.m"
          }
#line 547 "dir.m"
        else
#line 549 "dir.m"
          {
#line 549 "dir.m"
            MR_Char mercury__dir__C0_5 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__HeadVar__1_1, (MR_Integer) 0)));
#line 549 "dir.m"
            MR_Word mercury__dir__FileName0_6 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__HeadVar__1_1, (MR_Integer) 1)));
#line 549 "dir.m"
            MR_Word mercury__dir__RevFileName_8;
#line 549 "dir.m"
            MR_Char mercury__dir__C_9;
#line 566 "dir.m"
            MR_Char mercury__dir__C2_10;
#line 567 "dir.m"
            MR_Word mercury__dir__V_11_11;

#line 797 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__canonicalize_path_chars_2_2_f_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 797 "io.opt"

#if defined(MR_CYGWIN)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 7067 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 797 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 556 "dir.m"
            mercury__dir__succeeded = !(mercury__dir__succeeded);
#line 556 "dir.m"
            if (mercury__dir__succeeded)
#line 557 "dir.m"
              {
#line 557 "dir.m"
                mercury__dir__succeeded = mercury__dir__is_directory_separator_1_p_0(mercury__dir__C0_5);
              }
#line 560 "dir.m"
            if (mercury__dir__succeeded)
#line 273 "dir.m"
              {
#line 825 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__canonicalize_path_chars_2_2_f_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 825 "io.opt"

#if defined(MR_WIN32)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 7104 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 825 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 273 "dir.m"
                if (mercury__dir__succeeded)
#line 273 "dir.m"
                  mercury__dir__C_9 = (MR_Char) 92;
#line 273 "dir.m"
                else
#line 273 "dir.m"
                  mercury__dir__C_9 = (MR_Char) 47;
#line 273 "dir.m"
              }
#line 560 "dir.m"
            else
#line 561 "dir.m"
              mercury__dir__C_9 = mercury__dir__C0_5;
#line 566 "dir.m"
            {
#line 566 "dir.m"
              mercury__dir__succeeded = mercury__dir__is_directory_separator_1_p_0(mercury__dir__C_9);
            }
#line 566 "dir.m"
            if (mercury__dir__succeeded)
#line 566 "dir.m"
              {
#line 567 "dir.m"
                mercury__dir__succeeded = ((MR_tag((MR_Word) mercury__dir__FileName0_6)) == (MR_mktag((MR_Integer) 1)));
#line 567 "dir.m"
                if (mercury__dir__succeeded)
#line 567 "dir.m"
                  {
#line 567 "dir.m"
                    mercury__dir__C2_10 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__FileName0_6, (MR_Integer) 0)));
#line 567 "dir.m"
                    mercury__dir__V_11_11 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__FileName0_6, (MR_Integer) 1)));
#line 568 "dir.m"
                    {
#line 568 "dir.m"
                      mercury__dir__succeeded = mercury__dir__is_directory_separator_1_p_0(mercury__dir__C2_10);
                    }
#line 567 "dir.m"
                  }
#line 566 "dir.m"
              }
#line 571 "dir.m"
            if (mercury__dir__succeeded)
#line 570 "dir.m"
              mercury__dir__RevFileName_8 = mercury__dir__HeadVar__2_2;
#line 571 "dir.m"
            else
#line 572 "dir.m"
              {
#line 572 "dir.m"
                mercury__dir__RevFileName_8 = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL));
#line 572 "dir.m"
                MR_hl_field(MR_mktag(1), mercury__dir__RevFileName_8, 0) = ((MR_Box) (MR_Word) (mercury__dir__C_9));
#line 572 "dir.m"
                MR_hl_field(MR_mktag(1), mercury__dir__RevFileName_8, 1) = ((MR_Box) (mercury__dir__HeadVar__2_2));
#line 572 "dir.m"
              }
#line 549 "dir.m"
            /* direct tailcall eliminated */
#line 549 "dir.m"
            {
#line 549 "dir.m"
              MR_Word mercury__dir__HeadVar__1__tmp_copy_1 = mercury__dir__FileName0_6;
#line 549 "dir.m"
              MR_Word mercury__dir__HeadVar__2__tmp_copy_2 = mercury__dir__RevFileName_8;

#line 549 "dir.m"
              mercury__dir__HeadVar__2_2 = mercury__dir__HeadVar__2__tmp_copy_2;
#line 549 "dir.m"
              mercury__dir__HeadVar__1_1 = mercury__dir__HeadVar__1__tmp_copy_1;
#line 549 "dir.m"
            }
#line 549 "dir.m"
            continue;
#line 549 "dir.m"
          }
#line 547 "dir.m"
        return mercury__dir__HeadVar__3_3;
#line 547 "dir.m"
      }
#line 547 "dir.m"
      break;
#line 547 "dir.m"
    }
#line 545 "dir.m"
}

#line 516 "dir.m"
MR_Word MR_CALL 
mercury__dir__canonicalize_path_chars_1_f_0(
#line 516 "dir.m"
  MR_Word mercury__dir__FileName0_3)
#line 516 "dir.m"
{
#line 541 "dir.m"
  {
#line 541 "dir.m"
    MR_bool mercury__dir__succeeded;
#line 541 "dir.m"
    MR_Word mercury__dir__FileName_4;
#line 541 "dir.m"
    MR_Char mercury__dir__Char1_5;
#line 541 "dir.m"
    MR_Word mercury__dir__FileName1_6;

#line 325 "dir.m"
    {
#line 325 "dir.m"
      MR_Char mercury__dir__V_14_14;

#line 825 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__canonicalize_path_chars_1_f_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 825 "io.opt"

#if defined(MR_WIN32)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 7239 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 825 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 273 "dir.m"
      if (mercury__dir__succeeded)
#line 273 "dir.m"
        mercury__dir__V_14_14 = (MR_Char) 92;
#line 273 "dir.m"
      else
#line 273 "dir.m"
        mercury__dir__V_14_14 = (MR_Char) 47;
#line 325 "dir.m"
      mercury__dir__succeeded = (mercury__dir__V_14_14 == (MR_Char) 92);
#line 325 "dir.m"
    }
#line 522 "dir.m"
    if (!(mercury__dir__succeeded))
#line 797 "io.opt"
      {
#line 797 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__canonicalize_path_chars_1_f_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 797 "io.opt"

#if defined(MR_CYGWIN)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 7279 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 797 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 797 "io.opt"
      }
#line 522 "dir.m"
    if (mercury__dir__succeeded)
#line 522 "dir.m"
      {
#line 523 "dir.m"
        mercury__dir__succeeded = ((MR_tag((MR_Word) mercury__dir__FileName0_3)) == (MR_mktag((MR_Integer) 1)));
#line 523 "dir.m"
        if (mercury__dir__succeeded)
#line 523 "dir.m"
          {
#line 523 "dir.m"
            mercury__dir__Char1_5 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__FileName0_3, (MR_Integer) 0)));
#line 523 "dir.m"
            mercury__dir__FileName1_6 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__FileName0_3, (MR_Integer) 1)));
#line 524 "dir.m"
            {
#line 524 "dir.m"
              mercury__dir__succeeded = mercury__dir__is_directory_separator_1_p_0(mercury__dir__Char1_5);
            }
#line 523 "dir.m"
          }
#line 522 "dir.m"
      }
#line 541 "dir.m"
    if (mercury__dir__succeeded)
#line 529 "dir.m"
      {
#line 529 "dir.m"
        MR_Char mercury__dir__CanonicalChar1_7;
#line 529 "dir.m"
        MR_Word mercury__dir__FileName2_8;
#line 529 "dir.m"
        MR_Word mercury__dir__V_10_10;
#line 534 "dir.m"
        MR_Char mercury__dir__Char2_9;
#line 534 "dir.m"
        MR_Word mercury__dir__V_11_11;

#line 797 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__canonicalize_path_chars_1_f_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 797 "io.opt"

#if defined(MR_CYGWIN)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 7343 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 797 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 529 "dir.m"
        if (mercury__dir__succeeded)
#line 529 "dir.m"
          mercury__dir__CanonicalChar1_7 = mercury__dir__Char1_5;
#line 529 "dir.m"
        else
#line 273 "dir.m"
          {
#line 825 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__canonicalize_path_chars_1_f_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 825 "io.opt"

#if defined(MR_WIN32)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 7375 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 825 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 273 "dir.m"
            if (mercury__dir__succeeded)
#line 273 "dir.m"
              mercury__dir__CanonicalChar1_7 = (MR_Char) 92;
#line 273 "dir.m"
            else
#line 273 "dir.m"
              mercury__dir__CanonicalChar1_7 = (MR_Char) 47;
#line 273 "dir.m"
          }
#line 530 "dir.m"
        mercury__dir__V_10_10 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 530 "dir.m"
        {
#line 530 "dir.m"
          mercury__dir__FileName2_8 = mercury__dir__canonicalize_path_chars_2_2_f_0(mercury__dir__FileName1_6, mercury__dir__V_10_10);
        }
#line 534 "dir.m"
        mercury__dir__succeeded = ((MR_tag((MR_Word) mercury__dir__FileName2_8)) == (MR_mktag((MR_Integer) 1)));
#line 534 "dir.m"
        if (mercury__dir__succeeded)
#line 534 "dir.m"
          {
#line 534 "dir.m"
            mercury__dir__Char2_9 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__FileName2_8, (MR_Integer) 0)));
#line 534 "dir.m"
            mercury__dir__V_11_11 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__FileName2_8, (MR_Integer) 1)));
#line 534 "dir.m"
            mercury__dir__succeeded = (mercury__dir__V_11_11 == ((MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0))));
#line 534 "dir.m"
            if (mercury__dir__succeeded)
#line 535 "dir.m"
              {
#line 535 "dir.m"
                mercury__dir__succeeded = mercury__dir__is_directory_separator_1_p_0(mercury__dir__Char2_9);
              }
#line 534 "dir.m"
          }
#line 538 "dir.m"
        if (mercury__dir__succeeded)
#line 537 "dir.m"
          {
#line 537 "dir.m"
            MR_Word mercury__dir__V_12_12 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));

#line 537 "dir.m"
            {
#line 537 "dir.m"
              mercury__dir__FileName_4 = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL));
#line 537 "dir.m"
              MR_hl_field(MR_mktag(1), mercury__dir__FileName_4, 0) = ((MR_Box) (MR_Word) (mercury__dir__CanonicalChar1_7));
#line 537 "dir.m"
              MR_hl_field(MR_mktag(1), mercury__dir__FileName_4, 1) = ((MR_Box) (mercury__dir__V_12_12));
#line 537 "dir.m"
            }
#line 537 "dir.m"
          }
#line 538 "dir.m"
        else
#line 539 "dir.m"
          {
#line 539 "dir.m"
            mercury__dir__FileName_4 = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL));
#line 539 "dir.m"
            MR_hl_field(MR_mktag(1), mercury__dir__FileName_4, 0) = ((MR_Box) (MR_Word) (mercury__dir__CanonicalChar1_7));
#line 539 "dir.m"
            MR_hl_field(MR_mktag(1), mercury__dir__FileName_4, 1) = ((MR_Box) (mercury__dir__FileName2_8));
#line 539 "dir.m"
          }
#line 529 "dir.m"
      }
#line 541 "dir.m"
    else
#line 542 "dir.m"
      {
#line 542 "dir.m"
        MR_Word mercury__dir__V_13_13 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));

#line 542 "dir.m"
        {
#line 542 "dir.m"
          return mercury__dir__FileName_4 = mercury__dir__canonicalize_path_chars_2_2_f_0(mercury__dir__FileName0_3, mercury__dir__V_13_13);
        }
#line 542 "dir.m"
      }
#line 541 "dir.m"
    return mercury__dir__FileName_4;
#line 541 "dir.m"
  }
#line 516 "dir.m"
}

#line 412 "dir.m"
MR_bool MR_CALL 
mercury__dir__split_name_2_3_p_0(
#line 412 "dir.m"
  MR_Word mercury__dir__FileNameChars0_4,
#line 412 "dir.m"
  MR_String * mercury__dir__DirName_5,
#line 412 "dir.m"
  MR_String * mercury__dir__BaseName_6)
#line 412 "dir.m"
{
#line 414 "dir.m"
  {
#line 414 "dir.m"
    MR_bool mercury__dir__succeeded = ((MR_tag((MR_Word) mercury__dir__FileNameChars0_4)) == (MR_mktag((MR_Integer) 1)));
#line 414 "dir.m"
    MR_Word mercury__dir__FileNameWithoutSlash_9;
#line 415 "dir.m"
    MR_Char mercury__dir__V_7_7;
#line 415 "dir.m"
    MR_Word mercury__dir__V_8_8;
#line 577 "dir.m"
    MR_Word mercury__dir__Chars1_20;
#line 579 "dir.m"
    MR_Word mercury__dir__TypeCtorInfo_6_22;
#line 579 "dir.m"
    MR_Char mercury__dir__Sep_21;
#line 579 "dir.m"
    MR_Box mercury__dir__conv0_Sep_21;
#line 417 "dir.m"
    MR_Word mercury__dir__TypeInfo_17_17;
#line 417 "dir.m"
    MR_String mercury__dir__V_10_10;
#line 417 "dir.m"
    MR_Word mercury__dir__V_14_14;
#line 418 "dir.m"
    MR_Word mercury__dir__TypeInfo_18_18;
#line 418 "dir.m"
    MR_String mercury__dir__V_11_11;
#line 418 "dir.m"
    MR_Word mercury__dir__V_16_16;

#line 415 "dir.m"
    if (mercury__dir__succeeded)
#line 415 "dir.m"
      {
#line 415 "dir.m"
        mercury__dir__V_7_7 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__FileNameChars0_4, (MR_Integer) 0)));
#line 415 "dir.m"
        mercury__dir__V_8_8 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__FileNameChars0_4, (MR_Integer) 1)));
#line 7526 "dir.c"
        mercury__dir__TypeCtorInfo_6_22 = (MR_Word) &mercury__builtin__builtin__type_ctor_info_character_0;
#line 579 "dir.m"
        {
#line 579 "dir.m"
          mercury__dir__succeeded = mercury__list__split_last_3_p_0(mercury__dir__TypeCtorInfo_6_22, mercury__dir__FileNameChars0_4, &mercury__dir__Chars1_20, &mercury__dir__conv0_Sep_21);
        }
#line 579 "dir.m"
        if (mercury__dir__succeeded)
#line 579 "dir.m"
          {
#line 579 "dir.m"
            mercury__dir__Sep_21 = ((MR_Char) (MR_Word) mercury__dir__conv0_Sep_21);
#line 579 "dir.m"
            mercury__dir__succeeded = MR_TRUE;
#line 579 "dir.m"
          }
#line 579 "dir.m"
        if (mercury__dir__succeeded)
#line 580 "dir.m"
          {
#line 580 "dir.m"
            mercury__dir__succeeded = mercury__dir__is_directory_separator_1_p_0(mercury__dir__Sep_21);
          }
#line 577 "dir.m"
        if (mercury__dir__succeeded)
#line 582 "dir.m"
          mercury__dir__FileNameWithoutSlash_9 = mercury__dir__Chars1_20;
#line 577 "dir.m"
        else
#line 584 "dir.m"
          mercury__dir__FileNameWithoutSlash_9 = mercury__dir__FileNameChars0_4;
#line 332 "dir.m"
        mercury__dir__V_10_10 = (MR_String) ".";
#line 956 "string.opt"
        {
#line 956 "string.opt"
          mercury__string__to_char_list_2_p_0(mercury__dir__V_10_10, &mercury__dir__V_14_14);
        }
#line 7565 "dir.c"
        mercury__dir__TypeInfo_17_17 = (MR_Word) &mercury__dir_scalar_common_1[0];
#line 417 "dir.m"
        {
#line 417 "dir.m"
          mercury__dir__succeeded = mercury__builtin__unify_2_p_0(mercury__dir__TypeInfo_17_17, ((MR_Box) (mercury__dir__FileNameWithoutSlash_9)), ((MR_Box) (mercury__dir__V_14_14)));
        }
#line 417 "dir.m"
        mercury__dir__succeeded = !(mercury__dir__succeeded);
#line 414 "dir.m"
        if (mercury__dir__succeeded)
#line 414 "dir.m"
          {
#line 336 "dir.m"
            mercury__dir__V_11_11 = (MR_String) "..";
#line 956 "string.opt"
            {
#line 956 "string.opt"
              mercury__string__to_char_list_2_p_0(mercury__dir__V_11_11, &mercury__dir__V_16_16);
            }
#line 7585 "dir.c"
            mercury__dir__TypeInfo_18_18 = (MR_Word) &mercury__dir_scalar_common_1[0];
#line 418 "dir.m"
            {
#line 418 "dir.m"
              mercury__dir__succeeded = mercury__builtin__unify_2_p_0(mercury__dir__TypeInfo_18_18, ((MR_Box) (mercury__dir__FileNameWithoutSlash_9)), ((MR_Box) (mercury__dir__V_16_16)));
            }
#line 418 "dir.m"
            mercury__dir__succeeded = !(mercury__dir__succeeded);
#line 414 "dir.m"
            if (mercury__dir__succeeded)
#line 414 "dir.m"
              {
#line 67 "builtin.opt"
{
#define MR_PROC_LABEL mercury__dir__split_name_2_3_p_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 67 "builtin.opt"

    SUCCESS_INDICATOR = MR_FALSE;

#line 7609 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 67 "builtin.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 424 "dir.m"
                if (mercury__dir__succeeded)
#line 422 "dir.m"
                  {
#line 500 "string.opt"
                    MR_String mercury__dir__V_12_12;

#line 500 "string.opt"
                    {
#line 500 "string.opt"
                      mercury__string__from_char_list_2_p_0(mercury__dir__FileNameWithoutSlash_9, &mercury__dir__V_12_12);
                    }
#line 490 "dir.m"
                    *mercury__dir__DirName_5 = (MR_String) "";
#line 490 "dir.m"
                    *mercury__dir__BaseName_6 = (MR_String) "";
#line 67 "builtin.opt"
{
#define MR_PROC_LABEL mercury__dir__split_name_2_3_p_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 67 "builtin.opt"

    SUCCESS_INDICATOR = MR_FALSE;

#line 7645 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 67 "builtin.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 422 "dir.m"
                  }
#line 424 "dir.m"
                else
#line 430 "dir.m"
                  {
#line 430 "dir.m"
                    MR_Word mercury__dir__TypeCtorInfo_36_62 = (MR_Word) &mercury__builtin__builtin__type_ctor_info_character_0;
#line 430 "dir.m"
                    MR_Word mercury__dir__RevFileNameChars0_33;
#line 430 "dir.m"
                    MR_Word mercury__dir__RevFileNameChars_36;
#line 438 "dir.m"
                    MR_Word mercury__dir__RevFileNameChars1_35;
#line 434 "dir.m"
                    MR_Char mercury__dir__LastChar_34;
#line 473 "dir.m"
                    MR_Word mercury__dir__RevBaseName_37;
#line 473 "dir.m"
                    MR_Word mercury__dir__RevDirName0_38;
#line 444 "dir.m"
                    MR_Char mercury__dir__V_39_39;
#line 444 "dir.m"
                    MR_Word mercury__dir__V_40_40;
#line 445 "dir.m"
                    MR_Char mercury__dir__V_41_41;
#line 445 "dir.m"
                    MR_Word mercury__dir__V_42_42;

#line 1040 "list.opt"
                    {
#line 1040 "list.opt"
                      mercury__list__reverse_2_p_0(mercury__dir__TypeCtorInfo_36_62, mercury__dir__FileNameChars0_4, &mercury__dir__RevFileNameChars0_33);
                    }
#line 434 "dir.m"
                    mercury__dir__succeeded = ((MR_tag((MR_Word) mercury__dir__RevFileNameChars0_33)) == (MR_mktag((MR_Integer) 1)));
#line 434 "dir.m"
                    if (mercury__dir__succeeded)
#line 434 "dir.m"
                      {
#line 434 "dir.m"
                        mercury__dir__LastChar_34 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__RevFileNameChars0_33, (MR_Integer) 0)));
#line 434 "dir.m"
                        mercury__dir__RevFileNameChars1_35 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__RevFileNameChars0_33, (MR_Integer) 1)));
#line 435 "dir.m"
                        {
#line 435 "dir.m"
                          mercury__dir__succeeded = mercury__dir__is_directory_separator_1_p_0(mercury__dir__LastChar_34);
                        }
#line 434 "dir.m"
                      }
#line 438 "dir.m"
                    if (mercury__dir__succeeded)
#line 437 "dir.m"
                      mercury__dir__RevFileNameChars_36 = mercury__dir__RevFileNameChars1_35;
#line 438 "dir.m"
                    else
#line 439 "dir.m"
                      mercury__dir__RevFileNameChars_36 = mercury__dir__RevFileNameChars0_33;
#line 442 "dir.m"
                    {
#line 442 "dir.m"
                      mercury__dir__takewhile__ho8_4_p_in__list_0(mercury__dir__RevFileNameChars_36, &mercury__dir__RevBaseName_37, &mercury__dir__RevDirName0_38);
                    }
#line 444 "dir.m"
                    mercury__dir__succeeded = ((MR_tag((MR_Word) mercury__dir__RevBaseName_37)) == (MR_mktag((MR_Integer) 1)));
#line 444 "dir.m"
                    if (mercury__dir__succeeded)
#line 444 "dir.m"
                      {
#line 444 "dir.m"
                        mercury__dir__V_39_39 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__RevBaseName_37, (MR_Integer) 0)));
#line 444 "dir.m"
                        mercury__dir__V_40_40 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__RevBaseName_37, (MR_Integer) 1)));
#line 445 "dir.m"
                        mercury__dir__succeeded = ((MR_tag((MR_Word) mercury__dir__RevDirName0_38)) == (MR_mktag((MR_Integer) 1)));
#line 445 "dir.m"
                        if (mercury__dir__succeeded)
#line 445 "dir.m"
                          {
#line 445 "dir.m"
                            mercury__dir__V_41_41 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__RevDirName0_38, (MR_Integer) 0)));
#line 445 "dir.m"
                            mercury__dir__V_42_42 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__RevDirName0_38, (MR_Integer) 1)));
#line 445 "dir.m"
                          }
#line 444 "dir.m"
                      }
#line 473 "dir.m"
                    if (mercury__dir__succeeded)
#line 469 "dir.m"
                      {
#line 469 "dir.m"
                        MR_Word mercury__dir__RevDirName_46;
#line 467 "dir.m"
                        MR_Word mercury__dir__RevDirName1_44 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__RevDirName0_38, (MR_Integer) 1)));
#line 452 "dir.m"
                        MR_Char mercury__dir__Sep_43 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__RevDirName0_38, (MR_Integer) 0)));

#line 454 "dir.m"
                        {
#line 454 "dir.m"
                          mercury__dir__succeeded = mercury__dir__is_directory_separator_1_p_0(mercury__dir__Sep_43);
                        }
#line 454 "dir.m"
                        if (mercury__dir__succeeded)
#line 454 "dir.m"
                          {
#line 458 "dir.m"
                            {
#line 458 "dir.m"
                              MR_Char mercury__dir__Drive_45;
#line 458 "dir.m"
                              MR_Char mercury__dir__V_52_52;
#line 458 "dir.m"
                              MR_Word mercury__dir__V_53_53;
#line 458 "dir.m"
                              MR_Word mercury__dir__V_54_54;

#line 325 "dir.m"
                              {
#line 325 "dir.m"
                                MR_Char mercury__dir__V_68_68;

#line 825 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__split_name_2_3_p_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 825 "io.opt"

#if defined(MR_WIN32)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 7793 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 825 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 273 "dir.m"
                                if (mercury__dir__succeeded)
#line 273 "dir.m"
                                  mercury__dir__V_68_68 = (MR_Char) 92;
#line 273 "dir.m"
                                else
#line 273 "dir.m"
                                  mercury__dir__V_68_68 = (MR_Char) 47;
#line 325 "dir.m"
                                mercury__dir__succeeded = (mercury__dir__V_68_68 == (MR_Char) 92);
#line 325 "dir.m"
                              }
#line 457 "dir.m"
                              if (!(mercury__dir__succeeded))
#line 797 "io.opt"
                                {
#line 797 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__split_name_2_3_p_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 797 "io.opt"

#if defined(MR_CYGWIN)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 7833 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 797 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 797 "io.opt"
                                }
#line 458 "dir.m"
                              if (mercury__dir__succeeded)
#line 458 "dir.m"
                                {
#line 459 "dir.m"
                                  mercury__dir__succeeded = ((MR_tag((MR_Word) mercury__dir__RevDirName1_44)) == (MR_mktag((MR_Integer) 1)));
#line 459 "dir.m"
                                  if (mercury__dir__succeeded)
#line 459 "dir.m"
                                    {
#line 459 "dir.m"
                                      mercury__dir__V_52_52 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__RevDirName1_44, (MR_Integer) 0)));
#line 459 "dir.m"
                                      mercury__dir__V_53_53 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__RevDirName1_44, (MR_Integer) 1)));
#line 459 "dir.m"
                                      mercury__dir__succeeded = (mercury__dir__V_52_52 == (MR_Char) 58);
#line 458 "dir.m"
                                      if (mercury__dir__succeeded)
#line 458 "dir.m"
                                        {
#line 459 "dir.m"
                                          mercury__dir__succeeded = ((MR_tag((MR_Word) mercury__dir__V_53_53)) == (MR_mktag((MR_Integer) 1)));
#line 459 "dir.m"
                                          if (mercury__dir__succeeded)
#line 459 "dir.m"
                                            {
#line 459 "dir.m"
                                              mercury__dir__Drive_45 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__V_53_53, (MR_Integer) 0)));
#line 459 "dir.m"
                                              mercury__dir__V_54_54 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__V_53_53, (MR_Integer) 1)));
#line 459 "dir.m"
                                              mercury__dir__succeeded = (mercury__dir__V_54_54 == ((MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0))));
#line 458 "dir.m"
                                              if (mercury__dir__succeeded)
#line 460 "dir.m"
                                                {
#line 460 "dir.m"
                                                  mercury__dir__succeeded = mercury__char__is_alpha_1_p_0(mercury__dir__Drive_45);
                                                }
#line 459 "dir.m"
                                            }
#line 458 "dir.m"
                                        }
#line 459 "dir.m"
                                    }
#line 458 "dir.m"
                                }
#line 458 "dir.m"
                            }
#line 461 "dir.m"
                            if (!(mercury__dir__succeeded))
#line 462 "dir.m"
                              mercury__dir__succeeded = (mercury__dir__RevDirName1_44 == ((MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0))));
#line 454 "dir.m"
                          }
#line 453 "dir.m"
                        mercury__dir__succeeded = !(mercury__dir__succeeded);
#line 467 "dir.m"
                        if (mercury__dir__succeeded)
#line 466 "dir.m"
                          mercury__dir__RevDirName_46 = mercury__dir__RevDirName1_44;
#line 467 "dir.m"
                        else
#line 468 "dir.m"
                          mercury__dir__RevDirName_46 = mercury__dir__RevDirName0_38;
#line 509 "string.opt"
                        {
#line 509 "string.opt"
                          mercury__string__from_rev_char_list_2_p_0(mercury__dir__RevBaseName_37, mercury__dir__BaseName_6);
                        }
#line 509 "string.opt"
                        {
#line 509 "string.opt"
                          mercury__string__from_rev_char_list_2_p_0(mercury__dir__RevDirName_46, mercury__dir__DirName_5);
                        }
#line 469 "dir.m"
                        mercury__dir__succeeded = MR_TRUE;
#line 469 "dir.m"
                      }
#line 473 "dir.m"
                    else
#line 483 "dir.m"
                      {
#line 483 "dir.m"
                        MR_Word mercury__dir__BaseNameChars_47;
#line 483 "dir.m"
                        MR_Char mercury__dir__BaseNameFirst_48;
#line 483 "dir.m"
                        MR_Word mercury__dir__V_55_55;
#line 483 "dir.m"
                        MR_Char mercury__dir__V_56_56;
#line 483 "dir.m"
                        MR_Word mercury__dir__V_57_57;
#line 483 "dir.m"
                        MR_Word mercury__dir__V_58_58;
#line 483 "dir.m"
                        MR_Char mercury__dir__V_59_59;
#line 483 "dir.m"
                        MR_Word mercury__dir__V_60_60;
#line 483 "dir.m"
                        MR_Char mercury__dir__Drive_61;
#line 483 "dir.m"
                        MR_Char mercury__dir__V_73_73;
#line 478 "dir.m"
                        MR_Word mercury__dir__V_49_49;

#line 825 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__split_name_2_3_p_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 825 "io.opt"

#if defined(MR_WIN32)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 7965 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 825 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 273 "dir.m"
                        if (mercury__dir__succeeded)
#line 273 "dir.m"
                          mercury__dir__V_73_73 = (MR_Char) 92;
#line 273 "dir.m"
                        else
#line 273 "dir.m"
                          mercury__dir__V_73_73 = (MR_Char) 47;
#line 325 "dir.m"
                        mercury__dir__succeeded = (mercury__dir__V_73_73 == (MR_Char) 92);
#line 483 "dir.m"
                        if (mercury__dir__succeeded)
#line 483 "dir.m"
                          {
#line 476 "dir.m"
                            mercury__dir__succeeded = ((MR_tag((MR_Word) mercury__dir__FileNameChars0_4)) == (MR_mktag((MR_Integer) 1)));
#line 476 "dir.m"
                            if (mercury__dir__succeeded)
#line 476 "dir.m"
                              {
#line 476 "dir.m"
                                mercury__dir__Drive_61 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__FileNameChars0_4, (MR_Integer) 0)));
#line 476 "dir.m"
                                mercury__dir__V_55_55 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__FileNameChars0_4, (MR_Integer) 1)));
#line 476 "dir.m"
                                mercury__dir__succeeded = ((MR_tag((MR_Word) mercury__dir__V_55_55)) == (MR_mktag((MR_Integer) 1)));
#line 476 "dir.m"
                                if (mercury__dir__succeeded)
#line 476 "dir.m"
                                  {
#line 476 "dir.m"
                                    mercury__dir__V_56_56 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__V_55_55, (MR_Integer) 0)));
#line 476 "dir.m"
                                    mercury__dir__BaseNameChars_47 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__V_55_55, (MR_Integer) 1)));
#line 476 "dir.m"
                                    mercury__dir__succeeded = (mercury__dir__V_56_56 == (MR_Char) 58);
#line 483 "dir.m"
                                    if (mercury__dir__succeeded)
#line 483 "dir.m"
                                      {
#line 477 "dir.m"
                                        {
#line 477 "dir.m"
                                          mercury__dir__succeeded = mercury__char__is_alpha_1_p_0(mercury__dir__Drive_61);
                                        }
#line 483 "dir.m"
                                        if (mercury__dir__succeeded)
#line 483 "dir.m"
                                          {
#line 478 "dir.m"
                                            mercury__dir__succeeded = ((MR_tag((MR_Word) mercury__dir__BaseNameChars_47)) == (MR_mktag((MR_Integer) 1)));
#line 478 "dir.m"
                                            if (mercury__dir__succeeded)
#line 478 "dir.m"
                                              {
#line 478 "dir.m"
                                                mercury__dir__BaseNameFirst_48 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__BaseNameChars_47, (MR_Integer) 0)));
#line 478 "dir.m"
                                                mercury__dir__V_49_49 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__BaseNameChars_47, (MR_Integer) 1)));
#line 479 "dir.m"
                                                {
#line 479 "dir.m"
                                                  mercury__dir__succeeded = mercury__dir__is_directory_separator_1_p_0(mercury__dir__BaseNameFirst_48);
                                                }
#line 479 "dir.m"
                                                mercury__dir__succeeded = !(mercury__dir__succeeded);
#line 483 "dir.m"
                                                if (mercury__dir__succeeded)
#line 483 "dir.m"
                                                  {
#line 500 "string.opt"
                                                    {
#line 500 "string.opt"
                                                      mercury__string__from_char_list_2_p_0(mercury__dir__BaseNameChars_47, mercury__dir__BaseName_6);
                                                    }
#line 482 "dir.m"
                                                    mercury__dir__V_59_59 = (MR_Char) 58;
#line 482 "dir.m"
                                                    mercury__dir__V_60_60 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 482 "dir.m"
                                                    mercury__dir__V_58_58 = (MR_Word) MR_mkword(MR_mktag(1), &mercury__dir_scalar_common_1[6]);
#line 482 "dir.m"
                                                    {
#line 482 "dir.m"
                                                      mercury__dir__V_57_57 = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL));
#line 482 "dir.m"
                                                      MR_hl_field(MR_mktag(1), mercury__dir__V_57_57, 0) = ((MR_Box) (MR_Word) (mercury__dir__Drive_61));
#line 482 "dir.m"
                                                      MR_hl_field(MR_mktag(1), mercury__dir__V_57_57, 1) = ((MR_Box) (mercury__dir__V_58_58));
#line 482 "dir.m"
                                                    }
#line 500 "string.opt"
                                                    {
#line 500 "string.opt"
                                                      mercury__string__from_char_list_2_p_0(mercury__dir__V_57_57, mercury__dir__DirName_5);
                                                    }
#line 500 "string.opt"
                                                    mercury__dir__succeeded = MR_TRUE;
#line 483 "dir.m"
                                                  }
#line 478 "dir.m"
                                              }
#line 483 "dir.m"
                                          }
#line 483 "dir.m"
                                      }
#line 476 "dir.m"
                                  }
#line 476 "dir.m"
                              }
#line 483 "dir.m"
                          }
#line 483 "dir.m"
                      }
#line 430 "dir.m"
                  }
#line 414 "dir.m"
              }
#line 414 "dir.m"
          }
#line 415 "dir.m"
      }
#line 414 "dir.m"
    return mercury__dir__succeeded;
#line 414 "dir.m"
  }
#line 412 "dir.m"
}

#line 291 "dir.m"
MR_Char MR_CALL 
mercury__dir__alt_directory_separator_0_f_0(void)
#line 291 "dir.m"
{
#line 293 "dir.m"
  {
#line 293 "dir.m"
    MR_bool mercury__dir__succeeded;
#line 293 "dir.m"
    MR_Char mercury__dir__HeadVar__1_1;

#line 797 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__alt_directory_separator_0_f_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 797 "io.opt"

#if defined(MR_CYGWIN)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 8130 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 797 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 293 "dir.m"
    if (mercury__dir__succeeded)
#line 293 "dir.m"
      mercury__dir__HeadVar__1_1 = (MR_Char) 92;
#line 293 "dir.m"
    else
#line 293 "dir.m"
      mercury__dir__HeadVar__1_1 = (MR_Char) 47;
#line 293 "dir.m"
    return mercury__dir__HeadVar__1_1;
#line 293 "dir.m"
  }
#line 291 "dir.m"
}

#line 257 "dir.m"
MR_bool MR_CALL 
mercury__dir__use_windows_paths_0_p_0(void)
#line 257 "dir.m"
{
#line 325 "dir.m"
  {
#line 325 "dir.m"
    MR_bool mercury__dir__succeeded;
#line 325 "dir.m"
    MR_Char mercury__dir__V_1_1;

#line 825 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__use_windows_paths_0_p_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 825 "io.opt"

#if defined(MR_WIN32)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 8181 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 825 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 273 "dir.m"
    if (mercury__dir__succeeded)
#line 273 "dir.m"
      mercury__dir__V_1_1 = (MR_Char) 92;
#line 273 "dir.m"
    else
#line 273 "dir.m"
      mercury__dir__V_1_1 = (MR_Char) 47;
#line 325 "dir.m"
    mercury__dir__succeeded = (mercury__dir__V_1_1 == (MR_Char) 92);
#line 325 "dir.m"
    return mercury__dir__succeeded;
#line 325 "dir.m"
  }
#line 257 "dir.m"
}

#line 244 "dir.m"
MR_Word MR_CALL 
mercury__dir__expand_braces_1_f_0(
#line 244 "dir.m"
  MR_String mercury__dir__ArgStr_3)
#line 244 "dir.m"
{
#line 2023 "dir.m"
  {
#line 2023 "dir.m"
    MR_bool mercury__dir__succeeded;
#line 2023 "dir.m"
    MR_Word mercury__dir__ExpandStrs_4;
#line 2023 "dir.m"
    MR_Word mercury__dir__ArgChar_5;
#line 2023 "dir.m"
    MR_Word mercury__dir__ExpandChars_6;
#line 2023 "dir.m"
    MR_Word mercury__dir__V_15_15;
#line 2023 "dir.m"
    MR_Word mercury__dir__V_16_16;
#line 2023 "dir.m"
    MR_Word mercury__dir__V_17_17;

#line 956 "string.opt"
    {
#line 956 "string.opt"
      mercury__string__to_char_list_2_p_0(mercury__dir__ArgStr_3, &mercury__dir__ArgChar_5);
    }
#line 2030 "dir.m"
    mercury__dir__V_16_16 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 2030 "dir.m"
    mercury__dir__V_17_17 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 2030 "dir.m"
    mercury__dir__V_15_15 = (MR_Word) MR_mkword(MR_mktag(1), &mercury__dir_scalar_common_1[5]);
#line 2030 "dir.m"
    {
#line 2030 "dir.m"
      mercury__dir__ExpandChars_6 = mercury__dir__expand_acc_2_f_0(mercury__dir__ArgChar_5, mercury__dir__V_15_15);
    }
#line 2026 "dir.m"
    {
#line 2026 "dir.m"
      return mercury__dir__ExpandStrs_4 = mercury__dir__map__ho9_2_f_in__list_0(mercury__dir__ExpandChars_6);
    }
#line 2023 "dir.m"
    return mercury__dir__ExpandStrs_4;
#line 2023 "dir.m"
  }
#line 244 "dir.m"
}

#line 219 "dir.m"
void MR_CALL 
mercury__dir__recursive_foldl2_7_p_0(
#line 219 "dir.m"
  MR_Word mercury__dir__TypeInfo_for_T_22,
#line 219 "dir.m"
  MR_Word mercury__dir__P_8,
#line 219 "dir.m"
  MR_String mercury__dir__DirName_9,
#line 219 "dir.m"
  MR_Word mercury__dir__FollowLinks_10,
#line 219 "dir.m"
  MR_Box mercury__dir__T_11,
#line 219 "dir.m"
  MR_Word * mercury__dir__Res_12)
#line 219 "dir.m"
{
#line 1287 "dir.m"
  {
#line 1287 "dir.m"
    MR_bool mercury__dir__succeeded;
#line 1287 "dir.m"
    MR_String mercury__dir__V_18_18;
#line 1287 "dir.m"
    MR_Word mercury__dir__V_19_19;
#line 1288 "dir.m"
    MR_Word mercury__dir__V_14_14;

#line 1288 "dir.m"
    {
#line 1288 "dir.m"
      mercury__dir__V_18_18 = mercury__dir__fixup_dirname_1_f_0(mercury__dir__DirName_9);
    }
#line 1288 "dir.m"
    mercury__dir__V_19_19 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 1288 "dir.m"
    {
#line 1288 "dir.m"
      mercury__dir__foldl2_process_dir_11_p_0(mercury__dir__TypeInfo_for_T_22, (MR_Integer) 0, mercury__dir__P_8, mercury__dir__V_18_18, mercury__dir__V_19_19, (MR_Integer) 1, mercury__dir__FollowLinks_10, &mercury__dir__V_14_14, mercury__dir__T_11, mercury__dir__Res_12);
    }
#line 1287 "dir.m"
  }
#line 219 "dir.m"
}

#line 208 "dir.m"
void MR_CALL 
mercury__dir__foldl2_6_p_0(
#line 208 "dir.m"
  MR_Word mercury__dir__TypeInfo_for_T_21,
#line 208 "dir.m"
  MR_Word mercury__dir__P_7,
#line 208 "dir.m"
  MR_String mercury__dir__DirName_8,
#line 208 "dir.m"
  MR_Box mercury__dir__T_9,
#line 208 "dir.m"
  MR_Word * mercury__dir__Res_10)
#line 208 "dir.m"
{
#line 1283 "dir.m"
  {
#line 1283 "dir.m"
    MR_bool mercury__dir__succeeded;
#line 1283 "dir.m"
    MR_String mercury__dir__V_16_16;
#line 1283 "dir.m"
    MR_Word mercury__dir__V_17_17;
#line 1284 "dir.m"
    MR_Word mercury__dir__V_12_12;

#line 1284 "dir.m"
    {
#line 1284 "dir.m"
      mercury__dir__V_16_16 = mercury__dir__fixup_dirname_1_f_0(mercury__dir__DirName_8);
    }
#line 1284 "dir.m"
    mercury__dir__V_17_17 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 1284 "dir.m"
    {
#line 1284 "dir.m"
      mercury__dir__foldl2_process_dir_11_p_0(mercury__dir__TypeInfo_for_T_21, (MR_Integer) 0, mercury__dir__P_7, mercury__dir__V_16_16, mercury__dir__V_17_17, (MR_Integer) 0, (MR_Integer) 0, &mercury__dir__V_12_12, mercury__dir__T_9, mercury__dir__Res_10);
    }
#line 1283 "dir.m"
  }
#line 208 "dir.m"
}

#line 186 "dir.m"
void MR_CALL 
mercury__dir__make_single_directory_4_p_0(
#line 186 "dir.m"
  MR_String mercury__dir__DirName_5,
#line 186 "dir.m"
  MR_Word * mercury__dir__Result_6)
#line 186 "dir.m"
{
#line 1087 "dir.m"
  {
#line 1087 "dir.m"
    MR_bool mercury__dir__succeeded;

#line 1088 "dir.m"
    {
#line 1088 "dir.m"
      mercury__dir__make_single_directory_2_5_p_0((MR_Integer) 1, mercury__dir__DirName_5, mercury__dir__Result_6);
#line 1088 "dir.m"
      return;
    }
#line 1087 "dir.m"
  }
#line 186 "dir.m"
}

#line 181 "dir.m"
void MR_CALL 
mercury__dir__make_directory_4_p_0(
#line 181 "dir.m"
  MR_String mercury__dir__PathName_5,
#line 181 "dir.m"
  MR_Word * mercury__dir__Result_6)
#line 181 "dir.m"
{
#line 979 "dir.m"
  {
#line 979 "dir.m"
    MR_bool mercury__dir__succeeded;

#line 1057 "dir.m"
{
#define MR_PROC_LABEL mercury__dir__make_directory_4_p_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 1057 "dir.m"

#if defined(MR_WIN32)
    SUCCESS_INDICATOR = MR_TRUE;
#elif defined(MR_HAVE_MKDIR)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 8404 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 1057 "dir.m"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 979 "dir.m"
    if (mercury__dir__succeeded)
#line 951 "dir.m"
      {
#line 951 "dir.m"
        MR_String mercury__dir__DirName_8;

#line 951 "dir.m"
        {
#line 951 "dir.m"
          mercury__dir__DirName_8 = mercury__dir__dirname_1_f_0(mercury__dir__PathName_5);
        }
#line 952 "dir.m"
        mercury__dir__succeeded = (strcmp(mercury__dir__PathName_5, mercury__dir__DirName_8) == 0);
#line 955 "dir.m"
        if (mercury__dir__succeeded)
#line 954 "dir.m"
          {
#line 954 "dir.m"
            {
#line 954 "dir.m"
              mercury__dir__make_single_directory_2_5_p_0((MR_Integer) 0, mercury__dir__PathName_5, mercury__dir__Result_6);
#line 954 "dir.m"
              return;
            }
#line 954 "dir.m"
          }
#line 955 "dir.m"
        else
#line 960 "dir.m"
          {
#line 956 "dir.m"
            mercury__dir__succeeded = (strcmp(mercury__dir__DirName_8, (MR_String) ".") == 0);
#line 960 "dir.m"
            if (mercury__dir__succeeded)
#line 959 "dir.m"
              {
#line 959 "dir.m"
                {
#line 959 "dir.m"
                  mercury__dir__make_single_directory_2_5_p_0((MR_Integer) 0, mercury__dir__PathName_5, mercury__dir__Result_6);
#line 959 "dir.m"
                  return;
                }
#line 959 "dir.m"
              }
#line 960 "dir.m"
            else
#line 962 "dir.m"
              {
#line 962 "dir.m"
                MR_Word mercury__dir__ParentAccessResult_9;
#line 962 "dir.m"
                MR_Word mercury__dir__V_19_19 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));

#line 67 "builtin.opt"
{
#define MR_PROC_LABEL mercury__dir__make_directory_4_p_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 67 "builtin.opt"

    SUCCESS_INDICATOR = MR_FALSE;

#line 8479 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 67 "builtin.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 619 "io.opt"
                if (mercury__dir__succeeded)
#line 618 "io.opt"
                  {
#line 618 "io.opt"
                    mercury__io__check_file_accessibility_dotnet_5_p_0(mercury__dir__DirName_8, mercury__dir__V_19_19, &mercury__dir__ParentAccessResult_9);
                  }
#line 619 "io.opt"
                else
#line 623 "io.opt"
                  {
#line 623 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__make_directory_4_p_0

	MR_String FileName;
	MR_Word AccessTypes;
	MR_Word Result;

	FileName =  mercury__dir__DirName_8 ;
	AccessTypes =  mercury__dir__V_19_19 ;
		{
#line 623 "io.opt"

#if defined(MR_HAVE_ACCESS)
  #ifdef F_OK
    int mode = F_OK;
  #else
    int mode = 0;
  #endif
    int access_result;

  #if !defined(MR_WIN32) || defined(MR_CYGWIN)
    /*
    ** Earlier versions of MSVCRT ignored flags it doesn't support,
    ** later versions return an error (e.g. on Vista).
    */
    if (ML_access_types_includes_execute(AccessTypes)) {
      #ifdef X_OK
        mode |= X_OK;
      #else
        mode |= 1;
      #endif
    }
  #endif
    if (ML_access_types_includes_write(AccessTypes)) {
  #ifdef W_OK
        mode |= W_OK;
  #else
        mode |= 2;
  #endif
    }
    if (ML_access_types_includes_read(AccessTypes)) {
  #ifdef R_OK
        mode |= R_OK;
  #else
        mode |= 4;
  #endif
    }

  #ifdef MR_WIN32
    access_result = _waccess(ML_utf8_to_wide(FileName), mode);
  #else
    access_result = access(FileName, mode);
  #endif

    if (access_result == 0) {
        Result = ML_make_io_res_0_ok();
    } else {
        ML_make_io_res_0_error(errno,
            MR_make_string_const("file not accessible: "), &Result);
    }
#else /* !MR_HAVE_ACCESS */
    Result = ML_make_io_res_0_error_msg(
        "io.check_file_accessibility not supported on this platform");
#endif

#line 8565 "dir.c"

		;}
#undef MR_PROC_LABEL
	 mercury__dir__ParentAccessResult_9  = Result;
#line 623 "io.opt"
}
#line 623 "io.opt"
                  }
#line 966 "dir.m"
                if ((mercury__dir__ParentAccessResult_9 == ((MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0)))))
#line 964 "dir.m"
                  {
#line 965 "dir.m"
                    {
#line 965 "dir.m"
                      mercury__dir__make_single_directory_2_5_p_0((MR_Integer) 0, mercury__dir__PathName_5, mercury__dir__Result_6);
#line 965 "dir.m"
                      return;
                    }
#line 964 "dir.m"
                  }
#line 966 "dir.m"
                else
#line 967 "dir.m"
                  {
#line 967 "dir.m"
                    MR_Word mercury__dir__ParentResult_11;

#line 968 "dir.m"
                    {
#line 968 "dir.m"
                      mercury__dir__make_directory_4_p_0(mercury__dir__DirName_8, &mercury__dir__ParentResult_11);
                    }
#line 972 "dir.m"
                    if ((mercury__dir__ParentResult_11 == ((MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0)))))
#line 970 "dir.m"
                      {
#line 971 "dir.m"
                        {
#line 971 "dir.m"
                          mercury__dir__make_single_directory_2_5_p_0((MR_Integer) 0, mercury__dir__PathName_5, mercury__dir__Result_6);
#line 971 "dir.m"
                          return;
                        }
#line 970 "dir.m"
                      }
#line 972 "dir.m"
                    else
#line 974 "dir.m"
                      *mercury__dir__Result_6 = mercury__dir__ParentResult_11;
#line 967 "dir.m"
                  }
#line 962 "dir.m"
              }
#line 960 "dir.m"
          }
#line 951 "dir.m"
      }
#line 979 "dir.m"
    else
#line 980 "dir.m"
      {
#line 980 "dir.m"
        MR_Word mercury__dir__V_26_26 = (MR_Word) ((MR_Box) ((MR_String) "dir.make_directory not implemented on this platform"));

#line 980 "dir.m"
        *mercury__dir__Result_6 = (MR_Word) MR_mkword(MR_mktag(1), &mercury__dir_scalar_common_5[0]);
#line 980 "dir.m"
      }
#line 979 "dir.m"
  }
#line 181 "dir.m"
}

#line 173 "dir.m"
void MR_CALL 
mercury__dir__current_directory_3_p_0(
#line 173 "dir.m"
  MR_Word * mercury__dir__Res_1)
#line 173 "dir.m"
{
#line 853 "dir.m"
  {
#line 853 "dir.m"
    MR_bool mercury__dir__succeeded;

#line 857 "dir.m"
{
#define MR_PROC_LABEL mercury__dir__current_directory_3_p_0

	MR_Word Res;

		{
#line 857 "dir.m"

    /*
    ** Marked thread_safe because ML_make_io_res_1_error_string will acquire
    ** the global lock.
    */

#ifdef MR_WIN32
    wchar_t     *wbuf;
    MR_String   str;

    wbuf = _wgetcwd(NULL, 1);
    if (wbuf != NULL) {
        str = ML_wide_to_utf8(wbuf, MR_ALLOC_ID);
        Res = ML_make_io_res_1_ok_string(str);
        free(wbuf);
    } else {
        ML_make_io_res_1_error_string(errno,
            MR_make_string_const("dir.current_directory failed: "),
            &Res);
    }
#else
    size_t      size = 256;
    MR_Word     ptr;
    char        *buf;
    MR_String   str;

    while (1) {
        MR_offset_incr_hp_atomic_msg(ptr, 0,
            (size + sizeof(MR_Word) - 1) / sizeof(MR_Word),
            MR_ALLOC_ID, "string.string/0");
        buf = (char *) ptr;
        if (getcwd(buf, size)) {
            MR_make_aligned_string(str, buf);
            Res = ML_make_io_res_1_ok_string(str);
            break;
        }
        if (errno != ERANGE) {
            ML_make_io_res_1_error_string(errno,
                MR_make_string_const("dir.current_directory failed: "),
                &Res);
            break;
        }
        /* Buffer too small.  Resize and try again. */
        size *= 1.5;
    }
#endif

#line 8707 "dir.c"

		;}
#undef MR_PROC_LABEL
	 *mercury__dir__Res_1  = Res;
#line 857 "dir.m"
}
#line 853 "dir.m"
  }
#line 173 "dir.m"
}

#line 166 "dir.m"
MR_String MR_CALL 
mercury__dir__relative_path_name_from_components_1_f_0(
#line 166 "dir.m"
  MR_Word mercury__dir__Components_3)
#line 166 "dir.m"
{
#line 847 "dir.m"
  {
#line 847 "dir.m"
    MR_bool mercury__dir__succeeded;
#line 847 "dir.m"
    MR_String mercury__dir__PathName_4;
#line 847 "dir.m"
    MR_String mercury__dir__Sep_5;
#line 847 "dir.m"
    MR_Char mercury__dir__V_6_6;
#line 847 "dir.m"
    MR_Word mercury__dir__V_5_13;
#line 847 "dir.m"
    MR_Word mercury__dir__V_6_14;

#line 825 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__relative_path_name_from_components_1_f_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 825 "io.opt"

#if defined(MR_WIN32)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 8756 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 825 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 273 "dir.m"
    if (mercury__dir__succeeded)
#line 273 "dir.m"
      mercury__dir__V_6_6 = (MR_Char) 92;
#line 273 "dir.m"
    else
#line 273 "dir.m"
      mercury__dir__V_6_6 = (MR_Char) 47;
#line 216 "string.opt"
    mercury__dir__V_6_14 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 215 "string.opt"
    {
#line 215 "string.opt"
      mercury__dir__V_5_13 = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL));
#line 215 "string.opt"
      MR_hl_field(MR_mktag(1), mercury__dir__V_5_13, 0) = ((MR_Box) (MR_Word) (mercury__dir__V_6_6));
#line 215 "string.opt"
      MR_hl_field(MR_mktag(1), mercury__dir__V_5_13, 1) = ((MR_Box) (mercury__dir__V_6_14));
#line 215 "string.opt"
    }
#line 217 "string.opt"
    {
#line 217 "string.opt"
      mercury__string__to_char_list_2_p_1(&mercury__dir__Sep_5, mercury__dir__V_5_13);
    }
#line 849 "dir.m"
    {
#line 849 "dir.m"
      return mercury__dir__PathName_4 = mercury__string__join_list_2_f_0(mercury__dir__Sep_5, mercury__dir__Components_3);
    }
#line 847 "dir.m"
    return mercury__dir__PathName_4;
#line 847 "dir.m"
  }
#line 166 "dir.m"
}

#line 159 "dir.m"
MR_String MR_CALL 
mercury__dir__make_path_name_2_f_0(
#line 159 "dir.m"
  MR_String mercury__dir__DirName_4,
#line 159 "dir.m"
  MR_String mercury__dir__FileName_5)
#line 159 "dir.m"
{
#line 780 "dir.m"
  {
#line 780 "dir.m"
    MR_bool mercury__dir__succeeded;
#line 780 "dir.m"
    MR_String mercury__dir__HeadVar__3_3;

#line 780 "dir.m"
    {
#line 780 "dir.m"
      return mercury__dir__HeadVar__3_3 = mercury__dir__f_slash_2_f_0(mercury__dir__DirName_4, mercury__dir__FileName_5);
    }
#line 780 "dir.m"
    return mercury__dir__HeadVar__3_3;
#line 780 "dir.m"
  }
#line 159 "dir.m"
}

#line 158 "dir.m"
MR_String MR_CALL 
mercury__dir__f_slash_2_f_0(
#line 158 "dir.m"
  MR_String mercury__dir__DirName0_4,
#line 158 "dir.m"
  MR_String mercury__dir__FileName0_5)
#line 158 "dir.m"
{
#line 787 "dir.m"
  {
#line 787 "dir.m"
    MR_bool mercury__dir__succeeded;
#line 787 "dir.m"
    MR_String mercury__dir__PathName_6;
#line 787 "dir.m"
    MR_String mercury__dir__DirName_7;
#line 787 "dir.m"
    MR_String mercury__dir__FileName_8;
#line 787 "dir.m"
    MR_Word mercury__dir__V_12_12;
#line 787 "dir.m"
    MR_Word mercury__dir__V_13_13;
#line 787 "dir.m"
    MR_Word mercury__dir__V_14_14;
#line 787 "dir.m"
    MR_Word mercury__dir__V_15_15;

#line 956 "string.opt"
    {
#line 956 "string.opt"
      mercury__string__to_char_list_2_p_0(mercury__dir__DirName0_4, &mercury__dir__V_13_13);
    }
#line 788 "dir.m"
    {
#line 788 "dir.m"
      mercury__dir__V_12_12 = mercury__dir__canonicalize_path_chars_1_f_0(mercury__dir__V_13_13);
    }
#line 500 "string.opt"
    {
#line 500 "string.opt"
      mercury__string__from_char_list_2_p_0(mercury__dir__V_12_12, &mercury__dir__DirName_7);
    }
#line 956 "string.opt"
    {
#line 956 "string.opt"
      mercury__string__to_char_list_2_p_0(mercury__dir__FileName0_5, &mercury__dir__V_15_15);
    }
#line 790 "dir.m"
    {
#line 790 "dir.m"
      mercury__dir__V_14_14 = mercury__dir__canonicalize_path_chars_1_f_0(mercury__dir__V_15_15);
    }
#line 500 "string.opt"
    {
#line 500 "string.opt"
      mercury__string__from_char_list_2_p_0(mercury__dir__V_14_14, &mercury__dir__FileName_8);
    }
#line 793 "dir.m"
    {
#line 793 "dir.m"
      mercury__dir__succeeded = mercury__dir__path_name_is_absolute_1_p_0(mercury__dir__FileName_8);
    }
#line 796 "dir.m"
    if (mercury__dir__succeeded)
#line 795 "dir.m"
      {
#line 795 "dir.m"
        {
#line 795 "dir.m"
          mercury__require__error_1_p_0((MR_String) "dir./: second argument is absolute");
        }
#line 795 "dir.m"
      }
#line 796 "dir.m"
    else
#line 814 "dir.m"
      {
#line 799 "dir.m"
        MR_Integer mercury__dir__Length_9;
#line 799 "dir.m"
        MR_Integer mercury__dir__V_17_17;
#line 799 "dir.m"
        MR_Char mercury__dir__V_18_18;
#line 799 "dir.m"
        MR_Integer mercury__dir__V_19_19;
#line 799 "dir.m"
        MR_Char mercury__dir__V_20_20;
#line 799 "dir.m"
        MR_Integer mercury__dir__V_21_21;
#line 799 "dir.m"
        MR_Char mercury__dir__V_45_45;
#line 804 "dir.m"
        MR_Integer mercury__dir__V_22_22;

#line 825 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__f_slash_2_f_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 825 "io.opt"

#if defined(MR_WIN32)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 8940 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 825 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 273 "dir.m"
        if (mercury__dir__succeeded)
#line 273 "dir.m"
          mercury__dir__V_45_45 = (MR_Char) 92;
#line 273 "dir.m"
        else
#line 273 "dir.m"
          mercury__dir__V_45_45 = (MR_Char) 47;
#line 325 "dir.m"
        mercury__dir__succeeded = (mercury__dir__V_45_45 == (MR_Char) 92);
#line 799 "dir.m"
        if (mercury__dir__succeeded)
#line 799 "dir.m"
          {
#line 701 "string.opt"
{
#define MR_PROC_LABEL mercury__dir__f_slash_2_f_0

	MR_String Str;
	MR_Integer Length;

	Str =  mercury__dir__FileName_8 ;
		{
#line 701 "string.opt"

    Length = strlen(Str);

#line 8976 "dir.c"

		;}
#undef MR_PROC_LABEL
	 mercury__dir__Length_9  = Length;
#line 701 "string.opt"
}
#line 801 "dir.m"
            mercury__dir__V_17_17 = (MR_Integer) 2;
#line 801 "dir.m"
            mercury__dir__succeeded = (mercury__dir__Length_9 >= mercury__dir__V_17_17);
#line 799 "dir.m"
            if (mercury__dir__succeeded)
#line 799 "dir.m"
              {
#line 802 "dir.m"
                mercury__dir__V_19_19 = (MR_Integer) 0;
#line 1029 "string.opt"
                {
#line 1029 "string.opt"
                  mercury__string__unsafe_index_3_p_0(mercury__dir__FileName_8, mercury__dir__V_19_19, &mercury__dir__V_18_18);
                }
#line 802 "dir.m"
                {
#line 802 "dir.m"
                  mercury__dir__succeeded = mercury__char__is_alpha_1_p_0(mercury__dir__V_18_18);
                }
#line 799 "dir.m"
                if (mercury__dir__succeeded)
#line 799 "dir.m"
                  {
#line 803 "dir.m"
                    mercury__dir__V_21_21 = (MR_Integer) 1;
#line 1029 "string.opt"
                    {
#line 1029 "string.opt"
                      mercury__string__unsafe_index_3_p_0(mercury__dir__FileName_8, mercury__dir__V_21_21, &mercury__dir__V_20_20);
                    }
#line 803 "dir.m"
                    mercury__dir__succeeded = (mercury__dir__V_20_20 == (MR_Char) 58);
#line 799 "dir.m"
                    if (mercury__dir__succeeded)
#line 799 "dir.m"
                      {
#line 804 "dir.m"
                        mercury__dir__V_22_22 = (MR_Integer) 2;
#line 804 "dir.m"
                        mercury__dir__succeeded = (mercury__dir__Length_9 > mercury__dir__V_22_22);
#line 806 "dir.m"
                        if (mercury__dir__succeeded)
#line 805 "dir.m"
                          {
#line 805 "dir.m"
                            MR_Char mercury__dir__V_23_23;

#line 1029 "string.opt"
                            {
#line 1029 "string.opt"
                              mercury__string__unsafe_index_3_p_0(mercury__dir__FileName_8, (MR_Integer) 2, &mercury__dir__V_23_23);
                            }
#line 805 "dir.m"
                            {
#line 805 "dir.m"
                              mercury__dir__succeeded = mercury__dir__is_directory_separator_1_p_0(mercury__dir__V_23_23);
                            }
#line 805 "dir.m"
                            mercury__dir__succeeded = !(mercury__dir__succeeded);
#line 805 "dir.m"
                          }
#line 806 "dir.m"
                        else
#line 807 "dir.m"
                          mercury__dir__succeeded = MR_TRUE;
#line 799 "dir.m"
                      }
#line 799 "dir.m"
                  }
#line 799 "dir.m"
              }
#line 799 "dir.m"
          }
#line 814 "dir.m"
        if (mercury__dir__succeeded)
#line 813 "dir.m"
          {
#line 813 "dir.m"
            {
#line 813 "dir.m"
              mercury__require__error_1_p_0((MR_String) "dir./: second argument is a current drive relative path");
            }
#line 813 "dir.m"
          }
#line 814 "dir.m"
        else
#line 837 "dir.m"
          {
#line 815 "dir.m"
            MR_Integer mercury__dir__DirNameLength_10;

#line 701 "string.opt"
{
#define MR_PROC_LABEL mercury__dir__f_slash_2_f_0

	MR_String Str;
	MR_Integer Length;

	Str =  mercury__dir__DirName_7 ;
		{
#line 701 "string.opt"

    Length = strlen(Str);

#line 9088 "dir.c"

		;}
#undef MR_PROC_LABEL
	 mercury__dir__DirNameLength_10  = Length;
#line 701 "string.opt"
}
#line 819 "dir.m"
            {
#line 819 "dir.m"
              MR_Char mercury__dir__V_27_27;
#line 819 "dir.m"
              MR_Integer mercury__dir__V_28_28;
#line 819 "dir.m"
              MR_Char mercury__dir__V_29_29;
#line 819 "dir.m"
              MR_Integer mercury__dir__V_30_30;
#line 819 "dir.m"
              MR_Char mercury__dir__V_59_59;

#line 825 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__f_slash_2_f_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 825 "io.opt"

#if defined(MR_WIN32)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 9123 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 825 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 273 "dir.m"
              if (mercury__dir__succeeded)
#line 273 "dir.m"
                mercury__dir__V_59_59 = (MR_Char) 92;
#line 273 "dir.m"
              else
#line 273 "dir.m"
                mercury__dir__V_59_59 = (MR_Char) 47;
#line 325 "dir.m"
              mercury__dir__succeeded = (mercury__dir__V_59_59 == (MR_Char) 92);
#line 819 "dir.m"
              if (mercury__dir__succeeded)
#line 819 "dir.m"
                {
#line 820 "dir.m"
                  mercury__dir__succeeded = (mercury__dir__DirNameLength_10 == (MR_Integer) 2);
#line 819 "dir.m"
                  if (mercury__dir__succeeded)
#line 819 "dir.m"
                    {
#line 821 "dir.m"
                      mercury__dir__V_28_28 = (MR_Integer) 0;
#line 1029 "string.opt"
                      {
#line 1029 "string.opt"
                        mercury__string__unsafe_index_3_p_0(mercury__dir__DirName_7, mercury__dir__V_28_28, &mercury__dir__V_27_27);
                      }
#line 821 "dir.m"
                      {
#line 821 "dir.m"
                        mercury__dir__succeeded = mercury__char__is_alpha_1_p_0(mercury__dir__V_27_27);
                      }
#line 819 "dir.m"
                      if (mercury__dir__succeeded)
#line 819 "dir.m"
                        {
#line 822 "dir.m"
                          mercury__dir__V_30_30 = (MR_Integer) 1;
#line 1029 "string.opt"
                          {
#line 1029 "string.opt"
                            mercury__string__unsafe_index_3_p_0(mercury__dir__DirName_7, mercury__dir__V_30_30, &mercury__dir__V_29_29);
                          }
#line 822 "dir.m"
                          mercury__dir__succeeded = (mercury__dir__V_29_29 == (MR_Char) 58);
#line 819 "dir.m"
                        }
#line 819 "dir.m"
                    }
#line 819 "dir.m"
                }
#line 819 "dir.m"
            }
#line 823 "dir.m"
            if (!(mercury__dir__succeeded))
#line 830 "dir.m"
              {
#line 830 "dir.m"
                MR_Char mercury__dir__Char_69;
#line 1057 "string.opt"
                MR_Integer mercury__dir__V_11_11;

#line 828 "dir.m"
                mercury__dir__succeeded = (mercury__dir__DirNameLength_10 > (MR_Integer) 0);
#line 830 "dir.m"
                if (mercury__dir__succeeded)
#line 830 "dir.m"
                  {
#line 1057 "string.opt"
{
#define MR_PROC_LABEL mercury__dir__f_slash_2_f_0

	MR_String Str;
	MR_Integer Index;
	MR_Integer PrevIndex;
	MR_Char Ch;
	MR_bool SUCCESS_INDICATOR;

	Str =  mercury__dir__DirName_7 ;
	Index =  mercury__dir__DirNameLength_10 ;
		{
#line 1057 "string.opt"

    if (Index > 0) {
        PrevIndex = Index - 1;
        Ch = Str[PrevIndex];
        if (MR_is_ascii(Ch)) {
            SUCCESS_INDICATOR = (Ch != 0);
        } else {
            Ch = MR_utf8_prev_get(Str, &PrevIndex);
            SUCCESS_INDICATOR = (Ch > 0);
        }
    } else {
        SUCCESS_INDICATOR = MR_FALSE;
    }

#line 9228 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
	 mercury__dir__V_11_11  = PrevIndex;
	 mercury__dir__Char_69  = Ch;
#line 1057 "string.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 830 "dir.m"
                    if (mercury__dir__succeeded)
#line 323 "dir.m"
                      {
#line 323 "dir.m"
                        mercury__dir__succeeded = mercury__dir__is_directory_separator_1_p_0(mercury__dir__Char_69);
                      }
#line 830 "dir.m"
                  }
#line 830 "dir.m"
              }
#line 837 "dir.m"
            if (mercury__dir__succeeded)
#line 157 "string.opt"
              {
#line 157 "string.opt"
                mercury__string__append_3_p_2(mercury__dir__DirName_7, mercury__dir__FileName_8, &mercury__dir__PathName_6);
              }
#line 837 "dir.m"
            else
#line 842 "dir.m"
              {
#line 842 "dir.m"
                MR_Word mercury__dir__V_31_31;
#line 842 "dir.m"
                MR_Word mercury__dir__V_32_32;
#line 842 "dir.m"
                MR_String mercury__dir__V_33_33;
#line 842 "dir.m"
                MR_Char mercury__dir__V_34_34;
#line 842 "dir.m"
                MR_Word mercury__dir__V_35_35;
#line 842 "dir.m"
                MR_Word mercury__dir__V_36_36;
#line 842 "dir.m"
                MR_Word mercury__dir__V_5_80;
#line 842 "dir.m"
                MR_Word mercury__dir__V_6_81;

#line 825 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__f_slash_2_f_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 825 "io.opt"

#if defined(MR_WIN32)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 9293 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 825 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 273 "dir.m"
                if (mercury__dir__succeeded)
#line 273 "dir.m"
                  mercury__dir__V_34_34 = (MR_Char) 92;
#line 273 "dir.m"
                else
#line 273 "dir.m"
                  mercury__dir__V_34_34 = (MR_Char) 47;
#line 216 "string.opt"
                mercury__dir__V_6_81 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 215 "string.opt"
                {
#line 215 "string.opt"
                  mercury__dir__V_5_80 = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL));
#line 215 "string.opt"
                  MR_hl_field(MR_mktag(1), mercury__dir__V_5_80, 0) = ((MR_Box) (MR_Word) (mercury__dir__V_34_34));
#line 215 "string.opt"
                  MR_hl_field(MR_mktag(1), mercury__dir__V_5_80, 1) = ((MR_Box) (mercury__dir__V_6_81));
#line 215 "string.opt"
                }
#line 217 "string.opt"
                {
#line 217 "string.opt"
                  mercury__string__to_char_list_2_p_1(&mercury__dir__V_33_33, mercury__dir__V_5_80);
                }
#line 844 "dir.m"
                mercury__dir__V_36_36 = (MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0));
#line 844 "dir.m"
                {
#line 844 "dir.m"
                  mercury__dir__V_35_35 = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL));
#line 844 "dir.m"
                  MR_hl_field(MR_mktag(1), mercury__dir__V_35_35, 0) = ((MR_Box) (mercury__dir__FileName_8));
#line 844 "dir.m"
                  MR_hl_field(MR_mktag(1), mercury__dir__V_35_35, 1) = ((MR_Box) (mercury__dir__V_36_36));
#line 844 "dir.m"
                }
#line 843 "dir.m"
                {
#line 843 "dir.m"
                  mercury__dir__V_32_32 = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL));
#line 843 "dir.m"
                  MR_hl_field(MR_mktag(1), mercury__dir__V_32_32, 0) = ((MR_Box) (mercury__dir__V_33_33));
#line 843 "dir.m"
                  MR_hl_field(MR_mktag(1), mercury__dir__V_32_32, 1) = ((MR_Box) (mercury__dir__V_35_35));
#line 843 "dir.m"
                }
#line 842 "dir.m"
                {
#line 842 "dir.m"
                  mercury__dir__V_31_31 = (MR_Word) MR_mkword(MR_mktag(1), MR_new_object(MR_Word, ((MR_Integer) 2 * sizeof(MR_Word)), NULL, NULL));
#line 842 "dir.m"
                  MR_hl_field(MR_mktag(1), mercury__dir__V_31_31, 0) = ((MR_Box) (mercury__dir__DirName_7));
#line 842 "dir.m"
                  MR_hl_field(MR_mktag(1), mercury__dir__V_31_31, 1) = ((MR_Box) (mercury__dir__V_32_32));
#line 842 "dir.m"
                }
#line 842 "dir.m"
                {
#line 842 "dir.m"
                  return mercury__dir__PathName_6 = mercury__string__append_list_1_f_0(mercury__dir__V_31_31);
                }
#line 842 "dir.m"
              }
#line 837 "dir.m"
          }
#line 814 "dir.m"
      }
#line 787 "dir.m"
    return mercury__dir__PathName_6;
#line 787 "dir.m"
  }
#line 158 "dir.m"
}

#line 142 "dir.m"
MR_bool MR_CALL 
mercury__dir__path_name_is_root_directory_1_p_0(
#line 142 "dir.m"
  MR_String mercury__dir__PathName_2)
#line 142 "dir.m"
{
#line 587 "dir.m"
  {
#line 587 "dir.m"
    MR_bool mercury__dir__succeeded;
#line 587 "dir.m"
    MR_Word mercury__dir__V_3_3;
#line 587 "dir.m"
    MR_Word mercury__dir__V_4_4;

#line 956 "string.opt"
    {
#line 956 "string.opt"
      mercury__string__to_char_list_2_p_0(mercury__dir__PathName_2, &mercury__dir__V_4_4);
    }
#line 588 "dir.m"
    {
#line 588 "dir.m"
      mercury__dir__V_3_3 = mercury__dir__canonicalize_path_chars_1_f_0(mercury__dir__V_4_4);
    }
#line 588 "dir.m"
    {
#line 588 "dir.m"
      return mercury__dir__succeeded = mercury__dir__is_root_directory_1_p_0(mercury__dir__V_3_3);
    }
#line 587 "dir.m"
    return mercury__dir__succeeded;
#line 587 "dir.m"
  }
#line 142 "dir.m"
}

#line 127 "dir.m"
MR_bool MR_CALL 
mercury__dir__path_name_is_absolute_1_p_0(
#line 127 "dir.m"
  MR_String mercury__dir__FileName_2)
#line 127 "dir.m"
{
#line 724 "dir.m"
  {
#line 724 "dir.m"
    MR_bool mercury__dir__succeeded;

#line 67 "builtin.opt"
{
#define MR_PROC_LABEL mercury__dir__path_name_is_absolute_1_p_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 67 "builtin.opt"

    SUCCESS_INDICATOR = MR_FALSE;

#line 9438 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 67 "builtin.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 724 "dir.m"
    if (mercury__dir__succeeded)
#line 738 "dir.m"
      {
#line 764 "dir.m"
        {
#line 764 "dir.m"
          mercury__require__error_1_p_0((MR_String) "dir.dotnet_path_name_is_absolute_2 called for non-.NET CLI backend");
        }
#line 738 "dir.m"
        mercury__dir__succeeded = MR_TRUE;
#line 738 "dir.m"
      }
#line 724 "dir.m"
    else
#line 731 "dir.m"
      {
#line 325 "dir.m"
        {
#line 325 "dir.m"
          MR_Char mercury__dir__V_34_34;

#line 825 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__path_name_is_absolute_1_p_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 825 "io.opt"

#if defined(MR_WIN32)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 9484 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 825 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 273 "dir.m"
          if (mercury__dir__succeeded)
#line 273 "dir.m"
            mercury__dir__V_34_34 = (MR_Char) 92;
#line 273 "dir.m"
          else
#line 273 "dir.m"
            mercury__dir__V_34_34 = (MR_Char) 47;
#line 325 "dir.m"
          mercury__dir__succeeded = (mercury__dir__V_34_34 == (MR_Char) 92);
#line 325 "dir.m"
        }
#line 726 "dir.m"
        if (!(mercury__dir__succeeded))
#line 797 "io.opt"
          {
#line 797 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__path_name_is_absolute_1_p_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 797 "io.opt"

#if defined(MR_CYGWIN)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 9524 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 797 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 797 "io.opt"
          }
#line 731 "dir.m"
        if (mercury__dir__succeeded)
#line 729 "dir.m"
          {
#line 729 "dir.m"
            MR_Word mercury__dir__V_5_5;
#line 729 "dir.m"
            MR_Word mercury__dir__V_6_6;
#line 635 "dir.m"
            MR_Char mercury__dir__Letter_44;
#line 635 "dir.m"
            MR_Char mercury__dir__Sep_45;
#line 635 "dir.m"
            MR_Word mercury__dir__V_48_48;
#line 635 "dir.m"
            MR_Char mercury__dir__V_49_49;
#line 635 "dir.m"
            MR_Word mercury__dir__V_50_50;
#line 634 "dir.m"
            MR_Word mercury__dir__STATE_VARIABLE_FileName_6_40;

#line 956 "string.opt"
            {
#line 956 "string.opt"
              mercury__string__to_char_list_2_p_0(mercury__dir__FileName_2, &mercury__dir__V_6_6);
            }
#line 730 "dir.m"
            {
#line 730 "dir.m"
              mercury__dir__V_5_5 = mercury__dir__canonicalize_path_chars_1_f_0(mercury__dir__V_6_6);
            }
#line 634 "dir.m"
            mercury__dir__succeeded = ((MR_tag((MR_Word) mercury__dir__V_5_5)) == (MR_mktag((MR_Integer) 1)));
#line 634 "dir.m"
            if (mercury__dir__succeeded)
#line 634 "dir.m"
              {
#line 634 "dir.m"
                mercury__dir__Letter_44 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__V_5_5, (MR_Integer) 0)));
#line 634 "dir.m"
                mercury__dir__V_48_48 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__V_5_5, (MR_Integer) 1)));
#line 634 "dir.m"
                mercury__dir__succeeded = ((MR_tag((MR_Word) mercury__dir__V_48_48)) == (MR_mktag((MR_Integer) 1)));
#line 634 "dir.m"
                if (mercury__dir__succeeded)
#line 634 "dir.m"
                  {
#line 634 "dir.m"
                    mercury__dir__V_49_49 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__V_48_48, (MR_Integer) 0)));
#line 634 "dir.m"
                    mercury__dir__V_50_50 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__V_48_48, (MR_Integer) 1)));
#line 634 "dir.m"
                    mercury__dir__succeeded = (mercury__dir__V_49_49 == (MR_Char) 58);
#line 635 "dir.m"
                    if (mercury__dir__succeeded)
#line 635 "dir.m"
                      {
#line 634 "dir.m"
                        mercury__dir__succeeded = ((MR_tag((MR_Word) mercury__dir__V_50_50)) == (MR_mktag((MR_Integer) 1)));
#line 634 "dir.m"
                        if (mercury__dir__succeeded)
#line 634 "dir.m"
                          {
#line 634 "dir.m"
                            mercury__dir__Sep_45 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__V_50_50, (MR_Integer) 0)));
#line 634 "dir.m"
                            mercury__dir__STATE_VARIABLE_FileName_6_40 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__V_50_50, (MR_Integer) 1)));
#line 636 "dir.m"
                            {
#line 636 "dir.m"
                              mercury__dir__succeeded = mercury__char__is_alpha_1_p_0(mercury__dir__Letter_44);
                            }
#line 635 "dir.m"
                            if (mercury__dir__succeeded)
#line 637 "dir.m"
                              {
#line 637 "dir.m"
                                mercury__dir__succeeded = mercury__dir__is_directory_separator_1_p_0(mercury__dir__Sep_45);
                              }
#line 634 "dir.m"
                          }
#line 635 "dir.m"
                      }
#line 634 "dir.m"
                  }
#line 634 "dir.m"
              }
#line 619 "dir.m"
            if (mercury__dir__succeeded)
#line 619 "dir.m"
              mercury__dir__succeeded = MR_TRUE;
#line 619 "dir.m"
            else
#line 621 "dir.m"
              {
#line 659 "dir.m"
                MR_Char mercury__dir__Sep_52;
#line 659 "dir.m"
                MR_Word mercury__dir__Server_54;
#line 659 "dir.m"
                MR_Word mercury__dir__STATE_VARIABLE_FileName_0_62;
#line 659 "dir.m"
                MR_Word mercury__dir__V_63_63;
#line 659 "dir.m"
                MR_Word mercury__dir__STATE_VARIABLE_FileName_17_65;
#line 659 "dir.m"
                MR_Char mercury__dir__V_79_79;
#line 663 "dir.m"
                MR_Char mercury__dir__V_55_55;
#line 663 "dir.m"
                MR_Word mercury__dir__V_56_56;

#line 659 "dir.m"
                mercury__dir__succeeded = ((MR_tag((MR_Word) mercury__dir__V_5_5)) == (MR_mktag((MR_Integer) 1)));
#line 659 "dir.m"
                if (mercury__dir__succeeded)
#line 659 "dir.m"
                  {
#line 659 "dir.m"
                    mercury__dir__Sep_52 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__V_5_5, (MR_Integer) 0)));
#line 659 "dir.m"
                    mercury__dir__V_63_63 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__V_5_5, (MR_Integer) 1)));
#line 659 "dir.m"
                    mercury__dir__succeeded = ((MR_tag((MR_Word) mercury__dir__V_63_63)) == (MR_mktag((MR_Integer) 1)));
#line 659 "dir.m"
                    if (mercury__dir__succeeded)
#line 659 "dir.m"
                      {
#line 659 "dir.m"
                        mercury__dir__V_79_79 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__V_63_63, (MR_Integer) 0)));
#line 659 "dir.m"
                        mercury__dir__STATE_VARIABLE_FileName_0_62 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__V_63_63, (MR_Integer) 1)));
#line 659 "dir.m"
                        mercury__dir__succeeded = (mercury__dir__Sep_52 == mercury__dir__V_79_79);
#line 659 "dir.m"
                        if (mercury__dir__succeeded)
#line 659 "dir.m"
                          {
#line 660 "dir.m"
                            {
#line 660 "dir.m"
                              mercury__dir__succeeded = mercury__dir__is_directory_separator_1_p_0(mercury__dir__Sep_52);
                            }
#line 659 "dir.m"
                            if (mercury__dir__succeeded)
#line 659 "dir.m"
                              {
#line 661 "dir.m"
                                {
#line 661 "dir.m"
                                  mercury__dir__takewhile__ho7_4_p_in__list_0(mercury__dir__STATE_VARIABLE_FileName_0_62, &mercury__dir__Server_54, &mercury__dir__STATE_VARIABLE_FileName_17_65);
                                }
#line 663 "dir.m"
                                mercury__dir__succeeded = ((MR_tag((MR_Word) mercury__dir__Server_54)) == (MR_mktag((MR_Integer) 1)));
#line 663 "dir.m"
                                if (mercury__dir__succeeded)
#line 663 "dir.m"
                                  {
#line 663 "dir.m"
                                    mercury__dir__V_55_55 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__Server_54, (MR_Integer) 0)));
#line 663 "dir.m"
                                    mercury__dir__V_56_56 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__Server_54, (MR_Integer) 1)));
#line 666 "dir.m"
                                    if ((mercury__dir__STATE_VARIABLE_FileName_17_65 == ((MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0)))))
#line 665 "dir.m"
                                      mercury__dir__succeeded = MR_TRUE;
#line 666 "dir.m"
                                    else
#line 667 "dir.m"
                                      {
#line 667 "dir.m"
                                        MR_Word mercury__dir__STATE_VARIABLE_FileName_19_67 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__STATE_VARIABLE_FileName_17_65, (MR_Integer) 1)));
#line 667 "dir.m"
                                        MR_Char mercury__dir__V_80_80 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__STATE_VARIABLE_FileName_17_65, (MR_Integer) 0)));

#line 667 "dir.m"
                                        mercury__dir__succeeded = (mercury__dir__Sep_52 == mercury__dir__V_80_80);
#line 667 "dir.m"
                                        if (mercury__dir__succeeded)
#line 670 "dir.m"
                                          {
#line 670 "dir.m"
                                            if ((mercury__dir__STATE_VARIABLE_FileName_19_67 == ((MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0)))))
#line 669 "dir.m"
                                              mercury__dir__succeeded = MR_TRUE;
#line 670 "dir.m"
                                            else
#line 671 "dir.m"
                                              {
#line 671 "dir.m"
                                                MR_Word mercury__dir__Share_59;
#line 671 "dir.m"
                                                MR_Word mercury__dir__STATE_VARIABLE_FileName_21_69;
#line 674 "dir.m"
                                                MR_Char mercury__dir__V_60_60;
#line 674 "dir.m"
                                                MR_Word mercury__dir__V_61_61;

#line 672 "dir.m"
                                                {
#line 672 "dir.m"
                                                  mercury__dir__takewhile__ho6_4_p_in__list_0(mercury__dir__STATE_VARIABLE_FileName_19_67, &mercury__dir__Share_59, &mercury__dir__STATE_VARIABLE_FileName_21_69);
                                                }
#line 674 "dir.m"
                                                mercury__dir__succeeded = ((MR_tag((MR_Word) mercury__dir__Share_59)) == (MR_mktag((MR_Integer) 1)));
#line 674 "dir.m"
                                                if (mercury__dir__succeeded)
#line 674 "dir.m"
                                                  {
#line 674 "dir.m"
                                                    mercury__dir__V_60_60 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__Share_59, (MR_Integer) 0)));
#line 674 "dir.m"
                                                    mercury__dir__V_61_61 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__Share_59, (MR_Integer) 1)));
#line 676 "dir.m"
                                                    if ((mercury__dir__STATE_VARIABLE_FileName_21_69 == ((MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0)))))
#line 676 "dir.m"
                                                      mercury__dir__succeeded = MR_TRUE;
#line 676 "dir.m"
                                                    else
#line 675 "dir.m"
                                                      {
#line 675 "dir.m"
                                                        MR_Char mercury__dir__V_81_81 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__STATE_VARIABLE_FileName_21_69, (MR_Integer) 0)));
#line 675 "dir.m"
                                                        MR_Word mercury__dir__STATE_VARIABLE_FileName_7_41 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__STATE_VARIABLE_FileName_21_69, (MR_Integer) 1)));

#line 675 "dir.m"
                                                        mercury__dir__succeeded = (mercury__dir__Sep_52 == mercury__dir__V_81_81);
#line 675 "dir.m"
                                                      }
#line 674 "dir.m"
                                                  }
#line 671 "dir.m"
                                              }
#line 670 "dir.m"
                                          }
#line 667 "dir.m"
                                      }
#line 663 "dir.m"
                                  }
#line 659 "dir.m"
                              }
#line 659 "dir.m"
                          }
#line 659 "dir.m"
                      }
#line 659 "dir.m"
                  }
#line 621 "dir.m"
                if (mercury__dir__succeeded)
#line 621 "dir.m"
                  mercury__dir__succeeded = MR_TRUE;
#line 621 "dir.m"
                else
#line 645 "dir.m"
                  {
#line 645 "dir.m"
                    MR_Char mercury__dir__Char1_83;
#line 645 "dir.m"
                    MR_Word mercury__dir__STATE_VARIABLE_FileName_0_86;

#line 644 "dir.m"
                    mercury__dir__succeeded = ((MR_tag((MR_Word) mercury__dir__V_5_5)) == (MR_mktag((MR_Integer) 1)));
#line 644 "dir.m"
                    if (mercury__dir__succeeded)
#line 644 "dir.m"
                      {
#line 644 "dir.m"
                        mercury__dir__Char1_83 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__V_5_5, (MR_Integer) 0)));
#line 644 "dir.m"
                        mercury__dir__STATE_VARIABLE_FileName_0_86 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__V_5_5, (MR_Integer) 1)));
#line 646 "dir.m"
                        {
#line 646 "dir.m"
                          mercury__dir__succeeded = mercury__dir__is_directory_separator_1_p_0(mercury__dir__Char1_83);
                        }
#line 645 "dir.m"
                        if (mercury__dir__succeeded)
#line 649 "dir.m"
                          {
#line 649 "dir.m"
                            if ((mercury__dir__STATE_VARIABLE_FileName_0_86 == ((MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0)))))
#line 648 "dir.m"
                              mercury__dir__succeeded = MR_TRUE;
#line 649 "dir.m"
                            else
#line 650 "dir.m"
                              {
#line 650 "dir.m"
                                MR_Char mercury__dir__Char2_85 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__STATE_VARIABLE_FileName_0_86, (MR_Integer) 0)));
#line 650 "dir.m"
                                MR_Word mercury__dir__V_96_96 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__STATE_VARIABLE_FileName_0_86, (MR_Integer) 1)));

#line 651 "dir.m"
                                {
#line 651 "dir.m"
                                  mercury__dir__succeeded = mercury__dir__is_directory_separator_1_p_0(mercury__dir__Char2_85);
                                }
#line 651 "dir.m"
                                mercury__dir__succeeded = !(mercury__dir__succeeded);
#line 650 "dir.m"
                              }
#line 649 "dir.m"
                          }
#line 644 "dir.m"
                      }
#line 645 "dir.m"
                  }
#line 621 "dir.m"
              }
#line 729 "dir.m"
          }
#line 731 "dir.m"
        else
#line 732 "dir.m"
          {
#line 732 "dir.m"
            MR_Char mercury__dir__FirstChar_4;
#line 732 "dir.m"
            MR_Integer mercury__dir__V_7_91;

#line 701 "string.opt"
{
#define MR_PROC_LABEL mercury__dir__path_name_is_absolute_1_p_0

	MR_String Str;
	MR_Integer Length;

	Str =  mercury__dir__FileName_2 ;
		{
#line 701 "string.opt"

    Length = strlen(Str);

#line 9869 "dir.c"

		;}
#undef MR_PROC_LABEL
	 mercury__dir__V_7_91  = Length;
#line 701 "string.opt"
}
#line 525 "string.opt"
{
#define MR_PROC_LABEL mercury__dir__path_name_is_absolute_1_p_0

	MR_Integer Index;
	MR_Integer Length;
	MR_bool SUCCESS_INDICATOR;

	Index =  (MR_Integer) 0 ;
	Length =  mercury__dir__V_7_91 ;
		{
#line 525 "string.opt"

    /*
    ** We do not test for negative values of Index because (a) MR_Unsigned
    ** is unsigned and hence a negative argument will appear as a very large
    ** positive one after the cast and (b) anybody dealing with the case
    ** where strlen(Str) > MAXINT is clearly barking mad (and one may well get
    ** an integer overflow error in this case).
    */
    SUCCESS_INDICATOR = ((MR_Unsigned) Index < (MR_Unsigned) Length);

#line 9898 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 525 "string.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 732 "dir.m"
            if (mercury__dir__succeeded)
#line 732 "dir.m"
              {
#line 520 "string.opt"
                {
#line 520 "string.opt"
                  mercury__string__unsafe_index_3_p_0(mercury__dir__FileName_2, (MR_Integer) 0, &mercury__dir__FirstChar_4);
                }
#line 733 "dir.m"
                {
#line 733 "dir.m"
                  return mercury__dir__succeeded = mercury__dir__is_directory_separator_1_p_0(mercury__dir__FirstChar_4);
                }
#line 732 "dir.m"
              }
#line 732 "dir.m"
          }
#line 731 "dir.m"
      }
#line 724 "dir.m"
    return mercury__dir__succeeded;
#line 724 "dir.m"
  }
#line 127 "dir.m"
}

#line 117 "dir.m"
void MR_CALL 
mercury__dir__dirname_2_p_0(
#line 117 "dir.m"
  MR_String mercury__dir__S_3,
#line 117 "dir.m"
  MR_String * mercury__dir__HeadVar__2_2)
#line 117 "dir.m"
{
#line 398 "dir.m"
  {
#line 398 "dir.m"
    MR_bool mercury__dir__succeeded;

#line 398 "dir.m"
    {
#line 398 "dir.m"
      *mercury__dir__HeadVar__2_2 = mercury__dir__dirname_1_f_0(mercury__dir__S_3);
    }
#line 398 "dir.m"
  }
#line 117 "dir.m"
}

#line 116 "dir.m"
MR_String MR_CALL 
mercury__dir__dirname_1_f_0(
#line 116 "dir.m"
  MR_String mercury__dir__FileName_3)
#line 116 "dir.m"
{
#line 372 "dir.m"
  {
#line 372 "dir.m"
    MR_bool mercury__dir__succeeded;
#line 372 "dir.m"
    MR_String mercury__dir__DirName_4;
#line 372 "dir.m"
    MR_Word mercury__dir__FileNameChars_5;
#line 372 "dir.m"
    MR_Word mercury__dir__V_9_9;

#line 956 "string.opt"
    {
#line 956 "string.opt"
      mercury__string__to_char_list_2_p_0(mercury__dir__FileName_3, &mercury__dir__V_9_9);
    }
#line 373 "dir.m"
    {
#line 373 "dir.m"
      mercury__dir__FileNameChars_5 = mercury__dir__canonicalize_path_chars_1_f_0(mercury__dir__V_9_9);
    }
#line 375 "dir.m"
    {
#line 375 "dir.m"
      mercury__dir__succeeded = mercury__dir__is_root_directory_1_p_0(mercury__dir__FileNameChars_5);
    }
#line 378 "dir.m"
    if (mercury__dir__succeeded)
#line 500 "string.opt"
      {
#line 500 "string.opt"
        mercury__string__from_char_list_2_p_0(mercury__dir__FileNameChars_5, &mercury__dir__DirName_4);
      }
#line 378 "dir.m"
    else
#line 385 "dir.m"
      {
#line 380 "dir.m"
        MR_Char mercury__dir__Drive_6;
#line 380 "dir.m"
        MR_Word mercury__dir__V_10_10;
#line 380 "dir.m"
        MR_Char mercury__dir__V_11_11;
#line 380 "dir.m"
        MR_Word mercury__dir__V_12_12;
#line 380 "dir.m"
        MR_Char mercury__dir__V_22_22;

#line 825 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__dirname_1_f_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 825 "io.opt"

#if defined(MR_WIN32)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 10028 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 825 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 273 "dir.m"
        if (mercury__dir__succeeded)
#line 273 "dir.m"
          mercury__dir__V_22_22 = (MR_Char) 92;
#line 273 "dir.m"
        else
#line 273 "dir.m"
          mercury__dir__V_22_22 = (MR_Char) 47;
#line 325 "dir.m"
        mercury__dir__succeeded = (mercury__dir__V_22_22 == (MR_Char) 92);
#line 380 "dir.m"
        if (mercury__dir__succeeded)
#line 380 "dir.m"
          {
#line 381 "dir.m"
            mercury__dir__succeeded = ((MR_tag((MR_Word) mercury__dir__FileNameChars_5)) == (MR_mktag((MR_Integer) 1)));
#line 381 "dir.m"
            if (mercury__dir__succeeded)
#line 381 "dir.m"
              {
#line 381 "dir.m"
                mercury__dir__Drive_6 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__FileNameChars_5, (MR_Integer) 0)));
#line 381 "dir.m"
                mercury__dir__V_10_10 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__FileNameChars_5, (MR_Integer) 1)));
#line 381 "dir.m"
                mercury__dir__succeeded = ((MR_tag((MR_Word) mercury__dir__V_10_10)) == (MR_mktag((MR_Integer) 1)));
#line 381 "dir.m"
                if (mercury__dir__succeeded)
#line 381 "dir.m"
                  {
#line 381 "dir.m"
                    mercury__dir__V_11_11 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__V_10_10, (MR_Integer) 0)));
#line 381 "dir.m"
                    mercury__dir__V_12_12 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__V_10_10, (MR_Integer) 1)));
#line 381 "dir.m"
                    mercury__dir__succeeded = (mercury__dir__V_11_11 == (MR_Char) 58);
#line 380 "dir.m"
                    if (mercury__dir__succeeded)
#line 380 "dir.m"
                      {
#line 381 "dir.m"
                        mercury__dir__succeeded = (mercury__dir__V_12_12 == ((MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0))));
#line 380 "dir.m"
                        if (mercury__dir__succeeded)
#line 382 "dir.m"
                          {
#line 382 "dir.m"
                            mercury__dir__succeeded = mercury__char__is_alpha_1_p_0(mercury__dir__Drive_6);
                          }
#line 380 "dir.m"
                      }
#line 381 "dir.m"
                  }
#line 381 "dir.m"
              }
#line 380 "dir.m"
          }
#line 385 "dir.m"
        if (mercury__dir__succeeded)
#line 500 "string.opt"
          {
#line 500 "string.opt"
            mercury__string__from_char_list_2_p_0(mercury__dir__FileNameChars_5, &mercury__dir__DirName_4);
          }
#line 385 "dir.m"
        else
#line 389 "dir.m"
          {
#line 389 "dir.m"
            MR_String mercury__dir__DirName0_7;
#line 386 "dir.m"
            MR_String mercury__dir__V_8_8;

#line 386 "dir.m"
            {
#line 386 "dir.m"
              mercury__dir__succeeded = mercury__dir__split_name_2_3_p_0(mercury__dir__FileNameChars_5, &mercury__dir__DirName0_7, &mercury__dir__V_8_8);
            }
#line 389 "dir.m"
            if (mercury__dir__succeeded)
#line 388 "dir.m"
              mercury__dir__DirName_4 = mercury__dir__DirName0_7;
#line 389 "dir.m"
            else
#line 394 "dir.m"
              {
#line 390 "dir.m"
                MR_Word mercury__dir__TypeInfo_17_17;
#line 390 "dir.m"
                MR_Word mercury__dir__V_13_13;
#line 390 "dir.m"
                MR_Word mercury__dir__V_16_16;
#line 577 "dir.m"
                MR_Word mercury__dir__Chars1_26;
#line 579 "dir.m"
                MR_Word mercury__dir__TypeCtorInfo_6_28 = (MR_Word) &mercury__builtin__builtin__type_ctor_info_character_0;
#line 579 "dir.m"
                MR_Char mercury__dir__Sep_27;
#line 579 "dir.m"
                MR_Box mercury__dir__conv0_Sep_27;

#line 579 "dir.m"
                {
#line 579 "dir.m"
                  mercury__dir__succeeded = mercury__list__split_last_3_p_0(mercury__dir__TypeCtorInfo_6_28, mercury__dir__FileNameChars_5, &mercury__dir__Chars1_26, &mercury__dir__conv0_Sep_27);
                }
#line 579 "dir.m"
                if (mercury__dir__succeeded)
#line 579 "dir.m"
                  {
#line 579 "dir.m"
                    mercury__dir__Sep_27 = ((MR_Char) (MR_Word) mercury__dir__conv0_Sep_27);
#line 579 "dir.m"
                    mercury__dir__succeeded = MR_TRUE;
#line 579 "dir.m"
                  }
#line 579 "dir.m"
                if (mercury__dir__succeeded)
#line 580 "dir.m"
                  {
#line 580 "dir.m"
                    mercury__dir__succeeded = mercury__dir__is_directory_separator_1_p_0(mercury__dir__Sep_27);
                  }
#line 577 "dir.m"
                if (mercury__dir__succeeded)
#line 582 "dir.m"
                  mercury__dir__V_13_13 = mercury__dir__Chars1_26;
#line 577 "dir.m"
                else
#line 584 "dir.m"
                  mercury__dir__V_13_13 = mercury__dir__FileNameChars_5;
#line 956 "string.opt"
                {
#line 956 "string.opt"
                  mercury__string__to_char_list_2_p_0((MR_String) "..", &mercury__dir__V_16_16);
                }
#line 10173 "dir.c"
                mercury__dir__TypeInfo_17_17 = (MR_Word) &mercury__dir_scalar_common_1[0];
#line 391 "dir.m"
                {
#line 391 "dir.m"
                  mercury__dir__succeeded = mercury__builtin__unify_2_p_0(mercury__dir__TypeInfo_17_17, ((MR_Box) (mercury__dir__V_13_13)), ((MR_Box) (mercury__dir__V_16_16)));
                }
#line 394 "dir.m"
                if (mercury__dir__succeeded)
#line 336 "dir.m"
                  mercury__dir__DirName_4 = (MR_String) "..";
#line 394 "dir.m"
                else
#line 332 "dir.m"
                  mercury__dir__DirName_4 = (MR_String) ".";
#line 394 "dir.m"
              }
#line 389 "dir.m"
          }
#line 385 "dir.m"
      }
#line 372 "dir.m"
    return mercury__dir__DirName_4;
#line 372 "dir.m"
  }
#line 116 "dir.m"
}

#line 97 "dir.m"
MR_String MR_CALL 
mercury__dir__det_basename_1_f_0(
#line 97 "dir.m"
  MR_String mercury__dir__FileName_3)
#line 97 "dir.m"
{
#line 342 "dir.m"
  {
#line 342 "dir.m"
    MR_bool mercury__dir__succeeded;
#line 342 "dir.m"
    MR_String mercury__dir__HeadVar__2_2;
#line 342 "dir.m"
    MR_String mercury__dir__BaseName_4;

#line 343 "dir.m"
    {
#line 343 "dir.m"
      mercury__dir__succeeded = mercury__dir__basename_1_f_0(mercury__dir__FileName_3, &mercury__dir__BaseName_4);
    }
#line 342 "dir.m"
    if (mercury__dir__succeeded)
#line 344 "dir.m"
      mercury__dir__HeadVar__2_2 = mercury__dir__BaseName_4;
#line 342 "dir.m"
    else
#line 346 "dir.m"
      {
#line 346 "dir.m"
        MR_Word mercury__dir__TypeCtorInfo_6_6 = (MR_Word) &mercury__builtin__builtin__type_ctor_info_string_0;
#line 346 "dir.m"
        MR_Box mercury__dir__conv0_HeadVar__2_2;

#line 346 "dir.m"
        {
#line 346 "dir.m"
          mercury__dir__conv0_HeadVar__2_2 = mercury__require__func_error_1_f_0(mercury__dir__TypeCtorInfo_6_6, (MR_String) "dir.det_basename: given directory is root directory");
        }
#line 346 "dir.m"
        mercury__dir__HeadVar__2_2 = ((MR_String) mercury__dir__conv0_HeadVar__2_2);
#line 346 "dir.m"
      }
#line 342 "dir.m"
    return mercury__dir__HeadVar__2_2;
#line 342 "dir.m"
  }
#line 97 "dir.m"
}

#line 93 "dir.m"
MR_bool MR_CALL 
mercury__dir__basename_2_p_0(
#line 93 "dir.m"
  MR_String mercury__dir__S_3,
#line 93 "dir.m"
  MR_String * mercury__dir__HeadVar__2_2)
#line 93 "dir.m"
{
#line 368 "dir.m"
  {
#line 368 "dir.m"
    MR_bool mercury__dir__succeeded;

#line 368 "dir.m"
    {
#line 368 "dir.m"
      return mercury__dir__succeeded = mercury__dir__basename_1_f_0(mercury__dir__S_3, mercury__dir__HeadVar__2_2);
    }
#line 368 "dir.m"
    return mercury__dir__succeeded;
#line 368 "dir.m"
  }
#line 93 "dir.m"
}

#line 92 "dir.m"
MR_bool MR_CALL 
mercury__dir__basename_1_f_0(
#line 92 "dir.m"
  MR_String mercury__dir__FileName_3,
#line 92 "dir.m"
  MR_String * mercury__dir__BaseName_4)
#line 92 "dir.m"
{
#line 349 "dir.m"
  {
#line 349 "dir.m"
    MR_bool mercury__dir__succeeded;
#line 349 "dir.m"
    MR_Word mercury__dir__FileNameChars_5;
#line 349 "dir.m"
    MR_Word mercury__dir__FileNameWithoutSlash_7;
#line 349 "dir.m"
    MR_Word mercury__dir__V_10_10;
#line 354 "dir.m"
    MR_Char mercury__dir__Drive_6;
#line 354 "dir.m"
    MR_Word mercury__dir__V_11_11;
#line 354 "dir.m"
    MR_Char mercury__dir__V_12_12;
#line 354 "dir.m"
    MR_Word mercury__dir__V_13_13;
#line 354 "dir.m"
    MR_Char mercury__dir__V_24_24;
#line 577 "dir.m"
    MR_Word mercury__dir__Chars1_26;
#line 579 "dir.m"
    MR_Word mercury__dir__TypeCtorInfo_6_28;
#line 579 "dir.m"
    MR_Char mercury__dir__Sep_27;
#line 579 "dir.m"
    MR_Box mercury__dir__conv0_Sep_27;
#line 360 "dir.m"
    MR_Word mercury__dir__TypeInfo_20_20;
#line 360 "dir.m"
    MR_String mercury__dir__V_14_14;
#line 360 "dir.m"
    MR_Word mercury__dir__V_17_17;
#line 361 "dir.m"
    MR_Word mercury__dir__TypeInfo_21_21;
#line 361 "dir.m"
    MR_String mercury__dir__V_15_15;
#line 361 "dir.m"
    MR_Word mercury__dir__V_19_19;
#line 364 "dir.m"
    MR_String mercury__dir__BaseName0_9;
#line 362 "dir.m"
    MR_String mercury__dir__V_8_8;

#line 956 "string.opt"
    {
#line 956 "string.opt"
      mercury__string__to_char_list_2_p_0(mercury__dir__FileName_3, &mercury__dir__V_10_10);
    }
#line 350 "dir.m"
    {
#line 350 "dir.m"
      mercury__dir__FileNameChars_5 = mercury__dir__canonicalize_path_chars_1_f_0(mercury__dir__V_10_10);
    }
#line 351 "dir.m"
    {
#line 351 "dir.m"
      mercury__dir__succeeded = mercury__dir__is_root_directory_1_p_0(mercury__dir__FileNameChars_5);
    }
#line 351 "dir.m"
    mercury__dir__succeeded = !(mercury__dir__succeeded);
#line 349 "dir.m"
    if (mercury__dir__succeeded)
#line 349 "dir.m"
      {
#line 825 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__basename_1_f_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 825 "io.opt"

#if defined(MR_WIN32)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 10367 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 825 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 273 "dir.m"
        if (mercury__dir__succeeded)
#line 273 "dir.m"
          mercury__dir__V_24_24 = (MR_Char) 92;
#line 273 "dir.m"
        else
#line 273 "dir.m"
          mercury__dir__V_24_24 = (MR_Char) 47;
#line 325 "dir.m"
        mercury__dir__succeeded = (mercury__dir__V_24_24 == (MR_Char) 92);
#line 354 "dir.m"
        if (mercury__dir__succeeded)
#line 354 "dir.m"
          {
#line 355 "dir.m"
            mercury__dir__succeeded = ((MR_tag((MR_Word) mercury__dir__FileNameChars_5)) == (MR_mktag((MR_Integer) 1)));
#line 355 "dir.m"
            if (mercury__dir__succeeded)
#line 355 "dir.m"
              {
#line 355 "dir.m"
                mercury__dir__Drive_6 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__FileNameChars_5, (MR_Integer) 0)));
#line 355 "dir.m"
                mercury__dir__V_11_11 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__FileNameChars_5, (MR_Integer) 1)));
#line 355 "dir.m"
                mercury__dir__succeeded = ((MR_tag((MR_Word) mercury__dir__V_11_11)) == (MR_mktag((MR_Integer) 1)));
#line 355 "dir.m"
                if (mercury__dir__succeeded)
#line 355 "dir.m"
                  {
#line 355 "dir.m"
                    mercury__dir__V_12_12 = ((MR_Char) (MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__V_11_11, (MR_Integer) 0)));
#line 355 "dir.m"
                    mercury__dir__V_13_13 = ((MR_Word) (MR_hl_field(MR_mktag(1), mercury__dir__V_11_11, (MR_Integer) 1)));
#line 355 "dir.m"
                    mercury__dir__succeeded = (mercury__dir__V_12_12 == (MR_Char) 58);
#line 354 "dir.m"
                    if (mercury__dir__succeeded)
#line 354 "dir.m"
                      {
#line 355 "dir.m"
                        mercury__dir__succeeded = (mercury__dir__V_13_13 == ((MR_Word) MR_mkword(MR_mktag(0), MR_mkbody((MR_Integer) 0))));
#line 354 "dir.m"
                        if (mercury__dir__succeeded)
#line 356 "dir.m"
                          {
#line 356 "dir.m"
                            mercury__dir__succeeded = mercury__char__is_alpha_1_p_0(mercury__dir__Drive_6);
                          }
#line 354 "dir.m"
                      }
#line 355 "dir.m"
                  }
#line 355 "dir.m"
              }
#line 354 "dir.m"
          }
#line 352 "dir.m"
        mercury__dir__succeeded = !(mercury__dir__succeeded);
#line 349 "dir.m"
        if (mercury__dir__succeeded)
#line 349 "dir.m"
          {
#line 10439 "dir.c"
            mercury__dir__TypeCtorInfo_6_28 = (MR_Word) &mercury__builtin__builtin__type_ctor_info_character_0;
#line 579 "dir.m"
            {
#line 579 "dir.m"
              mercury__dir__succeeded = mercury__list__split_last_3_p_0(mercury__dir__TypeCtorInfo_6_28, mercury__dir__FileNameChars_5, &mercury__dir__Chars1_26, &mercury__dir__conv0_Sep_27);
            }
#line 579 "dir.m"
            if (mercury__dir__succeeded)
#line 579 "dir.m"
              {
#line 579 "dir.m"
                mercury__dir__Sep_27 = ((MR_Char) (MR_Word) mercury__dir__conv0_Sep_27);
#line 579 "dir.m"
                mercury__dir__succeeded = MR_TRUE;
#line 579 "dir.m"
              }
#line 579 "dir.m"
            if (mercury__dir__succeeded)
#line 580 "dir.m"
              {
#line 580 "dir.m"
                mercury__dir__succeeded = mercury__dir__is_directory_separator_1_p_0(mercury__dir__Sep_27);
              }
#line 577 "dir.m"
            if (mercury__dir__succeeded)
#line 582 "dir.m"
              mercury__dir__FileNameWithoutSlash_7 = mercury__dir__Chars1_26;
#line 577 "dir.m"
            else
#line 584 "dir.m"
              mercury__dir__FileNameWithoutSlash_7 = mercury__dir__FileNameChars_5;
#line 332 "dir.m"
            mercury__dir__V_14_14 = (MR_String) ".";
#line 956 "string.opt"
            {
#line 956 "string.opt"
              mercury__string__to_char_list_2_p_0(mercury__dir__V_14_14, &mercury__dir__V_17_17);
            }
#line 10478 "dir.c"
            mercury__dir__TypeInfo_20_20 = (MR_Word) &mercury__dir_scalar_common_1[0];
#line 360 "dir.m"
            {
#line 360 "dir.m"
              mercury__dir__succeeded = mercury__builtin__unify_2_p_0(mercury__dir__TypeInfo_20_20, ((MR_Box) (mercury__dir__FileNameWithoutSlash_7)), ((MR_Box) (mercury__dir__V_17_17)));
            }
#line 360 "dir.m"
            mercury__dir__succeeded = !(mercury__dir__succeeded);
#line 349 "dir.m"
            if (mercury__dir__succeeded)
#line 349 "dir.m"
              {
#line 336 "dir.m"
                mercury__dir__V_15_15 = (MR_String) "..";
#line 956 "string.opt"
                {
#line 956 "string.opt"
                  mercury__string__to_char_list_2_p_0(mercury__dir__V_15_15, &mercury__dir__V_19_19);
                }
#line 10498 "dir.c"
                mercury__dir__TypeInfo_21_21 = (MR_Word) &mercury__dir_scalar_common_1[0];
#line 361 "dir.m"
                {
#line 361 "dir.m"
                  mercury__dir__succeeded = mercury__builtin__unify_2_p_0(mercury__dir__TypeInfo_21_21, ((MR_Box) (mercury__dir__FileNameWithoutSlash_7)), ((MR_Box) (mercury__dir__V_19_19)));
                }
#line 361 "dir.m"
                mercury__dir__succeeded = !(mercury__dir__succeeded);
#line 349 "dir.m"
                if (mercury__dir__succeeded)
#line 349 "dir.m"
                  {
#line 362 "dir.m"
                    {
#line 362 "dir.m"
                      mercury__dir__succeeded = mercury__dir__split_name_2_3_p_0(mercury__dir__FileNameChars_5, &mercury__dir__V_8_8, &mercury__dir__BaseName0_9);
                    }
#line 364 "dir.m"
                    if (mercury__dir__succeeded)
#line 363 "dir.m"
                      *mercury__dir__BaseName_4 = mercury__dir__BaseName0_9;
#line 364 "dir.m"
                    else
#line 365 "dir.m"
                      *mercury__dir__BaseName_4 = mercury__dir__FileName_3;
#line 364 "dir.m"
                    mercury__dir__succeeded = MR_TRUE;
#line 349 "dir.m"
                  }
#line 349 "dir.m"
              }
#line 349 "dir.m"
          }
#line 349 "dir.m"
      }
#line 349 "dir.m"
    return mercury__dir__succeeded;
#line 349 "dir.m"
  }
#line 92 "dir.m"
}

#line 80 "dir.m"
MR_bool MR_CALL 
mercury__dir__split_name_3_p_0(
#line 80 "dir.m"
  MR_String mercury__dir__FileName_4,
#line 80 "dir.m"
  MR_String * mercury__dir__DirName_5,
#line 80 "dir.m"
  MR_String * mercury__dir__BaseName_6)
#line 80 "dir.m"
{
#line 400 "dir.m"
  {
#line 400 "dir.m"
    MR_bool mercury__dir__succeeded;
#line 400 "dir.m"
    MR_Word mercury__dir__FileNameChars_7;
#line 400 "dir.m"
    MR_Word mercury__dir__V_8_8;

#line 956 "string.opt"
    {
#line 956 "string.opt"
      mercury__string__to_char_list_2_p_0(mercury__dir__FileName_4, &mercury__dir__V_8_8);
    }
#line 401 "dir.m"
    {
#line 401 "dir.m"
      mercury__dir__FileNameChars_7 = mercury__dir__canonicalize_path_chars_1_f_0(mercury__dir__V_8_8);
    }
#line 402 "dir.m"
    {
#line 402 "dir.m"
      mercury__dir__succeeded = mercury__dir__is_root_directory_1_p_0(mercury__dir__FileNameChars_7);
    }
#line 402 "dir.m"
    mercury__dir__succeeded = !(mercury__dir__succeeded);
#line 400 "dir.m"
    if (mercury__dir__succeeded)
#line 403 "dir.m"
      {
#line 403 "dir.m"
        return mercury__dir__succeeded = mercury__dir__split_name_2_3_p_0(mercury__dir__FileNameChars_7, mercury__dir__DirName_5, mercury__dir__BaseName_6);
      }
#line 400 "dir.m"
    return mercury__dir__succeeded;
#line 400 "dir.m"
  }
#line 80 "dir.m"
}

#line 59 "dir.m"
void MR_CALL 
mercury__dir__parent_directory_1_p_0(
#line 59 "dir.m"
  MR_String * mercury__dir__HeadVar__1_1)
#line 59 "dir.m"
{
#line 336 "dir.m"
  {
#line 336 "dir.m"
    MR_bool mercury__dir__succeeded;

#line 336 "dir.m"
    *mercury__dir__HeadVar__1_1 = (MR_String) "..";
#line 336 "dir.m"
  }
#line 59 "dir.m"
}

#line 58 "dir.m"
MR_String MR_CALL 
mercury__dir__parent_directory_0_f_0(void)
#line 58 "dir.m"
{
#line 336 "dir.m"
  {
#line 336 "dir.m"
    MR_bool mercury__dir__succeeded;

#line 336 "dir.m"
    return (MR_String) "..";
#line 336 "dir.m"
  }
#line 58 "dir.m"
}

#line 54 "dir.m"
void MR_CALL 
mercury__dir__this_directory_1_p_0(
#line 54 "dir.m"
  MR_String * mercury__dir__HeadVar__1_1)
#line 54 "dir.m"
{
#line 332 "dir.m"
  {
#line 332 "dir.m"
    MR_bool mercury__dir__succeeded;

#line 332 "dir.m"
    *mercury__dir__HeadVar__1_1 = (MR_String) ".";
#line 332 "dir.m"
  }
#line 54 "dir.m"
}

#line 53 "dir.m"
MR_String MR_CALL 
mercury__dir__this_directory_0_f_0(void)
#line 53 "dir.m"
{
#line 332 "dir.m"
  {
#line 332 "dir.m"
    MR_bool mercury__dir__succeeded;

#line 332 "dir.m"
    return (MR_String) ".";
#line 332 "dir.m"
  }
#line 53 "dir.m"
}

#line 49 "dir.m"
void MR_CALL 
mercury__dir__is_directory_separator_1_p_1(
#line 49 "dir.m"
  MR_Char * mercury__dir__Char_2,
#line 49 "dir.m"
  MR_Cont mercury__dir__cont,
#line 49 "dir.m"
  void * mercury__dir__cont_env_ptr)
#line 49 "dir.m"
{
#line 304 "dir.m"
  {
#line 304 "dir.m"
    MR_bool mercury__dir__succeeded;

#line 304 "dir.m"
    {
#line 305 "dir.m"
      MR_Char mercury__dir__V_3_3;

#line 825 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__is_directory_separator_1_p_1

	MR_bool SUCCESS_INDICATOR;

		{
#line 825 "io.opt"

#if defined(MR_WIN32)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 10700 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 825 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 273 "dir.m"
      if (mercury__dir__succeeded)
#line 273 "dir.m"
        *mercury__dir__Char_2 = (MR_Char) 92;
#line 273 "dir.m"
      else
#line 273 "dir.m"
        *mercury__dir__Char_2 = (MR_Char) 47;
#line 797 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__is_directory_separator_1_p_1

	MR_bool SUCCESS_INDICATOR;

		{
#line 797 "io.opt"

#if defined(MR_CYGWIN)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 10732 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 797 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 293 "dir.m"
      if (mercury__dir__succeeded)
#line 293 "dir.m"
        mercury__dir__V_3_3 = (MR_Char) 92;
#line 293 "dir.m"
      else
#line 293 "dir.m"
        mercury__dir__V_3_3 = (MR_Char) 47;
#line 305 "dir.m"
      mercury__dir__succeeded = (*mercury__dir__Char_2 == mercury__dir__V_3_3);
#line 305 "dir.m"
      mercury__dir__succeeded = !(mercury__dir__succeeded);
#line 304 "dir.m"
      if (mercury__dir__succeeded)
#line 304 "dir.m"
        {
#line 304 "dir.m"
          mercury__dir__cont(mercury__dir__cont_env_ptr);
        }
#line 304 "dir.m"
    }
#line 797 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__is_directory_separator_1_p_1

	MR_bool SUCCESS_INDICATOR;

		{
#line 797 "io.opt"

#if defined(MR_CYGWIN)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 10777 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 797 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 293 "dir.m"
    if (mercury__dir__succeeded)
#line 293 "dir.m"
      *mercury__dir__Char_2 = (MR_Char) 92;
#line 293 "dir.m"
    else
#line 293 "dir.m"
      *mercury__dir__Char_2 = (MR_Char) 47;
#line 293 "dir.m"
    {
#line 293 "dir.m"
      mercury__dir__cont(mercury__dir__cont_env_ptr);
#line 293 "dir.m"
      return;
    }
#line 304 "dir.m"
  }
#line 49 "dir.m"
}

#line 48 "dir.m"
MR_bool MR_CALL 
mercury__dir__is_directory_separator_1_p_0(
#line 48 "dir.m"
  MR_Char mercury__dir__Char_2)
#line 48 "dir.m"
{
#line 304 "dir.m"
  {
#line 304 "dir.m"
    MR_bool mercury__dir__succeeded;

#line 304 "dir.m"
    {
#line 304 "dir.m"
      MR_Char mercury__dir__V_3_3;
#line 305 "dir.m"
      MR_Char mercury__dir__V_4_4;

#line 825 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__is_directory_separator_1_p_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 825 "io.opt"

#if defined(MR_WIN32)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 10840 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 825 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 273 "dir.m"
      if (mercury__dir__succeeded)
#line 273 "dir.m"
        mercury__dir__V_3_3 = (MR_Char) 92;
#line 273 "dir.m"
      else
#line 273 "dir.m"
        mercury__dir__V_3_3 = (MR_Char) 47;
#line 304 "dir.m"
      mercury__dir__succeeded = (mercury__dir__Char_2 == mercury__dir__V_3_3);
#line 304 "dir.m"
      if (mercury__dir__succeeded)
#line 304 "dir.m"
        {
#line 797 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__is_directory_separator_1_p_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 797 "io.opt"

#if defined(MR_CYGWIN)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 10878 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 797 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 293 "dir.m"
          if (mercury__dir__succeeded)
#line 293 "dir.m"
            mercury__dir__V_4_4 = (MR_Char) 92;
#line 293 "dir.m"
          else
#line 293 "dir.m"
            mercury__dir__V_4_4 = (MR_Char) 47;
#line 305 "dir.m"
          mercury__dir__succeeded = (mercury__dir__Char_2 == mercury__dir__V_4_4);
#line 305 "dir.m"
          mercury__dir__succeeded = !(mercury__dir__succeeded);
#line 304 "dir.m"
        }
#line 304 "dir.m"
    }
#line 304 "dir.m"
    if (!(mercury__dir__succeeded))
#line 307 "dir.m"
      {
#line 307 "dir.m"
        MR_Char mercury__dir__V_5_5;

#line 797 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__is_directory_separator_1_p_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 797 "io.opt"

#if defined(MR_CYGWIN)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 10925 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 797 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 293 "dir.m"
        if (mercury__dir__succeeded)
#line 293 "dir.m"
          mercury__dir__V_5_5 = (MR_Char) 92;
#line 293 "dir.m"
        else
#line 293 "dir.m"
          mercury__dir__V_5_5 = (MR_Char) 47;
#line 307 "dir.m"
        mercury__dir__succeeded = (mercury__dir__Char_2 == mercury__dir__V_5_5);
#line 307 "dir.m"
      }
#line 304 "dir.m"
    return mercury__dir__succeeded;
#line 304 "dir.m"
  }
#line 48 "dir.m"
}

#line 41 "dir.m"
void MR_CALL 
mercury__dir__directory_separator_1_p_0(
#line 41 "dir.m"
  MR_Char * mercury__dir__HeadVar__1_1)
#line 41 "dir.m"
{
#line 273 "dir.m"
  {
#line 273 "dir.m"
    MR_bool mercury__dir__succeeded;

#line 825 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__directory_separator_1_p_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 825 "io.opt"

#if defined(MR_WIN32)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 10980 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 825 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 273 "dir.m"
    if (mercury__dir__succeeded)
#line 273 "dir.m"
      *mercury__dir__HeadVar__1_1 = (MR_Char) 92;
#line 273 "dir.m"
    else
#line 273 "dir.m"
      *mercury__dir__HeadVar__1_1 = (MR_Char) 47;
#line 273 "dir.m"
  }
#line 41 "dir.m"
}

#line 40 "dir.m"
MR_Char MR_CALL 
mercury__dir__directory_separator_0_f_0(void)
#line 40 "dir.m"
{
#line 273 "dir.m"
  {
#line 273 "dir.m"
    MR_bool mercury__dir__succeeded;
#line 273 "dir.m"
    MR_Char mercury__dir__HeadVar__1_1;

#line 825 "io.opt"
{
#define MR_PROC_LABEL mercury__dir__directory_separator_0_f_0

	MR_bool SUCCESS_INDICATOR;

		{
#line 825 "io.opt"

#if defined(MR_WIN32)
    SUCCESS_INDICATOR = MR_TRUE;
#else
    SUCCESS_INDICATOR = MR_FALSE;
#endif

#line 11029 "dir.c"

		;}
#undef MR_PROC_LABEL
	if (SUCCESS_INDICATOR) {
#line 825 "io.opt"
	}
mercury__dir__succeeded  = SUCCESS_INDICATOR;
}
#line 273 "dir.m"
    if (mercury__dir__succeeded)
#line 273 "dir.m"
      mercury__dir__HeadVar__1_1 = (MR_Char) 92;
#line 273 "dir.m"
    else
#line 273 "dir.m"
      mercury__dir__HeadVar__1_1 = (MR_Char) 47;
#line 273 "dir.m"
    return mercury__dir__HeadVar__1_1;
#line 273 "dir.m"
  }
#line 40 "dir.m"
}

void mercury__dir__init(void)
{
}

void mercury__dir__init_type_tables(void)
{
	static MR_bool initialised = MR_FALSE;
	if (initialised) return;
	initialised = MR_TRUE;

	MR_register_type_ctor_info(&mercury__dir__dir__type_ctor_info_foldl_pred_1);
	MR_register_type_ctor_info(&mercury__dir__dir__type_ctor_info_stream_0);
}

void mercury__dir__init_debugger(void)
{
	MR_fatal_error("debugger initialization in MLDS grade");
}

/* ensure everything is compiled with the same grade */
static const void *const MR_grade = &MR_GRADE_VAR;

/* :- end_module dir. */
