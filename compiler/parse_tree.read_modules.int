:- module (parse_tree.read_modules).
:- interface.
:- import_module io.
:- import_module list.
:- import_module map.
:- import_module maybe.
:- import_module pair.
:- import_module (libs.file_util).
:- import_module (libs.timestamp).
:- import_module (mdbcomp.prim_data).
:- import_module (parse_tree.file_names).
:- import_module (parse_tree.module_imports).
:- import_module (parse_tree.prog_io).
:- import_module (parse_tree.prog_item).
:- type read_module
	--->	read_module(((parse_tree.module_imports).module_timestamp), (list.list(((parse_tree.prog_item).item))), ((parse_tree.prog_io).module_error), ((libs.file_util).file_name)).
:- type read_modules == (map.map((pair.pair(((mdbcomp.prim_data).module_name), string)), ((parse_tree.read_modules).read_module))).
:- pred find_read_module(((parse_tree.read_modules).read_modules), ((mdbcomp.prim_data).module_name), string, ((parse_tree.prog_io).maybe_return_timestamp), (list.list(((parse_tree.prog_item).item))), (maybe.maybe(((libs.timestamp).timestamp))), ((parse_tree.prog_io).module_error), ((libs.file_util).file_name)).
:- mode find_read_module((builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.out), (builtin.out), (builtin.out), (builtin.out)) is semidet.
:- pred maybe_read_module(((parse_tree.read_modules).read_modules), ((mdbcomp.prim_data).module_name), string, string, ((parse_tree.file_names).maybe_search), ((parse_tree.prog_io).maybe_return_timestamp), (list.list(((parse_tree.prog_item).item))), ((parse_tree.prog_io).module_error), ((libs.file_util).file_name), (maybe.maybe(((libs.timestamp).timestamp))), (io.io), (io.io)).
:- mode maybe_read_module((builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.out), (builtin.out), (builtin.out), (builtin.out), (builtin.di), (builtin.uo)) is det.
:- pred read_module(((mdbcomp.prim_data).module_name), string, string, ((parse_tree.file_names).maybe_search), ((parse_tree.prog_io).maybe_return_timestamp), (list.list(((parse_tree.prog_item).item))), ((parse_tree.prog_io).module_error), ((libs.file_util).file_name), (maybe.maybe(((libs.timestamp).timestamp))), (io.io), (io.io)).
:- mode read_module((builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.out), (builtin.out), (builtin.out), (builtin.out), (builtin.di), (builtin.uo)) is det.
:- pred read_module_from_file(((libs.file_util).file_name), string, string, ((parse_tree.file_names).maybe_search), ((parse_tree.prog_io).maybe_return_timestamp), (list.list(((parse_tree.prog_item).item))), ((parse_tree.prog_io).module_error), ((mdbcomp.prim_data).module_name), (maybe.maybe(((libs.timestamp).timestamp))), (io.io), (io.io)).
:- mode read_module_from_file((builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.out), (builtin.out), (builtin.out), (builtin.out), (builtin.di), (builtin.uo)) is det.
:- pred read_module_if_changed(((mdbcomp.prim_data).module_name), string, string, ((parse_tree.file_names).maybe_search), ((libs.timestamp).timestamp), (list.list(((parse_tree.prog_item).item))), ((parse_tree.prog_io).module_error), ((libs.file_util).file_name), (maybe.maybe(((libs.timestamp).timestamp))), (io.io), (io.io)).
:- mode read_module_if_changed((builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.out), (builtin.out), (builtin.out), (builtin.out), (builtin.di), (builtin.uo)) is det.
:- pred read_module_ignore_errors(((mdbcomp.prim_data).module_name), string, string, ((parse_tree.file_names).maybe_search), ((parse_tree.prog_io).maybe_return_timestamp), (list.list(((parse_tree.prog_item).item))), ((parse_tree.prog_io).module_error), ((libs.file_util).file_name), (maybe.maybe(((libs.timestamp).timestamp))), (io.io), (io.io)).
:- mode read_module_ignore_errors((builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.out), (builtin.out), (builtin.out), (builtin.out), (builtin.di), (builtin.uo)) is det.
