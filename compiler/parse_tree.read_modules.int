:- module (parse_tree.read_modules).
:- interface.
:- import_module io.
:- import_module list.
:- import_module map.
:- import_module maybe.
:- import_module pair.
:- import_module (libs.file_util).
:- import_module (libs.globals).
:- import_module (libs.timestamp).
:- import_module (mdbcomp.sym_name).
:- import_module (parse_tree.error_util).
:- import_module (parse_tree.file_names).
:- import_module (parse_tree.module_imports).
:- import_module (parse_tree.prog_io_error).
:- import_module (parse_tree.prog_item).
:- type have_read_module
	--->	have_read_module(parse_tree.module_imports.module_timestamp, list.list(parse_tree.prog_item.item), list.list(parse_tree.error_util.error_spec), parse_tree.prog_io_error.read_module_errors, libs.file_util.file_name).
:- type have_read_module_map == map.map(pair.pair(mdbcomp.sym_name.module_name, string), parse_tree.read_modules.have_read_module).
:- pred find_read_module(parse_tree.read_modules.have_read_module_map, mdbcomp.sym_name.module_name, string, libs.timestamp.maybe_return_timestamp, list.list(parse_tree.prog_item.item), list.list(parse_tree.error_util.error_spec), parse_tree.prog_io_error.read_module_errors, libs.file_util.file_name, maybe.maybe(libs.timestamp.timestamp)).
:- mode find_read_module((builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.out), (builtin.out), (builtin.out), (builtin.out), (builtin.out)) is semidet.
:- pred maybe_read_module(libs.globals.globals, parse_tree.read_modules.have_read_module_map, mdbcomp.sym_name.module_name, string, string, parse_tree.file_names.maybe_search, libs.timestamp.maybe_return_timestamp, list.list(parse_tree.prog_item.item), list.list(parse_tree.error_util.error_spec), parse_tree.prog_io_error.read_module_errors, libs.file_util.file_name, maybe.maybe(libs.timestamp.timestamp), io.io, io.io).
:- mode maybe_read_module((builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.out), (builtin.out), (builtin.out), (builtin.out), (builtin.out), (builtin.di), (builtin.uo)) is det.
:- pred read_module(libs.globals.globals, mdbcomp.sym_name.module_name, string, string, parse_tree.file_names.maybe_search, libs.timestamp.maybe_return_timestamp, list.list(parse_tree.prog_item.item), list.list(parse_tree.error_util.error_spec), parse_tree.prog_io_error.read_module_errors, libs.file_util.file_name, maybe.maybe(libs.timestamp.timestamp), io.io, io.io).
:- mode read_module((builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.out), (builtin.out), (builtin.out), (builtin.out), (builtin.out), (builtin.di), (builtin.uo)) is det.
:- pred read_module_from_file(libs.globals.globals, libs.file_util.file_name, string, string, parse_tree.file_names.maybe_search, libs.timestamp.maybe_return_timestamp, list.list(parse_tree.prog_item.item), list.list(parse_tree.error_util.error_spec), parse_tree.prog_io_error.read_module_errors, mdbcomp.sym_name.module_name, maybe.maybe(libs.timestamp.timestamp), io.io, io.io).
:- mode read_module_from_file((builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.out), (builtin.out), (builtin.out), (builtin.out), (builtin.out), (builtin.di), (builtin.uo)) is det.
:- pred read_module_if_changed(libs.globals.globals, mdbcomp.sym_name.module_name, string, string, parse_tree.file_names.maybe_search, libs.timestamp.timestamp, list.list(parse_tree.prog_item.item), list.list(parse_tree.error_util.error_spec), parse_tree.prog_io_error.read_module_errors, libs.file_util.file_name, maybe.maybe(libs.timestamp.timestamp), io.io, io.io).
:- mode read_module_if_changed((builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.out), (builtin.out), (builtin.out), (builtin.out), (builtin.out), (builtin.di), (builtin.uo)) is det.
:- pred read_module_ignore_errors(libs.globals.globals, mdbcomp.sym_name.module_name, string, string, parse_tree.file_names.maybe_search, libs.timestamp.maybe_return_timestamp, list.list(parse_tree.prog_item.item), parse_tree.prog_io_error.read_module_errors, libs.file_util.file_name, maybe.maybe(libs.timestamp.timestamp), io.io, io.io).
:- mode read_module_ignore_errors((builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.out), (builtin.out), (builtin.out), (builtin.out), (builtin.di), (builtin.uo)) is det.
