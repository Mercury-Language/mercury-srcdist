:- module (erl_backend.elds).
:- interface.
:- import_module backend_libs.
:- import_module bool.
:- import_module char.
:- import_module hlds.
:- import_module list.
:- import_module maybe.
:- import_module mdbcomp.
:- import_module parse_tree.
:- import_module set.
:- import_module (backend_libs.rtti).
:- import_module (hlds.hlds_pred).
:- import_module (mdbcomp.sym_name).
:- import_module (parse_tree.prog_data).
:- import_module (parse_tree.prog_foreign).
:- type elds
    --->    elds(((erl_backend.elds).elds_name) :: mdbcomp.sym_name.module_name, ((erl_backend.elds).elds_imports) :: set.set(mdbcomp.sym_name.module_name), ((erl_backend.elds).elds_foreign_decls) :: list.list(parse_tree.prog_foreign.foreign_decl_code), ((erl_backend.elds).elds_foreign_bodies) :: list.list(parse_tree.prog_foreign.foreign_body_code), ((erl_backend.elds).elds_funcs) :: list.list(erl_backend.elds.elds_defn), ((erl_backend.elds).elds_fe_funcs) :: list.list(erl_backend.elds.elds_foreign_export_defn), ((erl_backend.elds).elds_rtti_funcs) :: list.list(erl_backend.elds.elds_rtti_defn), ((erl_backend.elds).elds_init_preds) :: list.list(hlds.hlds_pred.pred_proc_id), ((erl_backend.elds).elds_final_preds) :: list.list(hlds.hlds_pred.pred_proc_id)).
:- type elds_binop
    --->    mul 
    ;       float_div 
    ;       int_div 
    ;       (rem) 
    ;       band 
    ;       add 
    ;       sub 
    ;       bor 
    ;       bxor 
    ;       bsl 
    ;       bsr 
    ;       (=<) 
    ;       (<) 
    ;       (>=) 
    ;       (>) 
    ;       (=:=) 
    ;       =/= 
    ;       andalso 
    ;       orelse .
:- type elds_body
    --->    body_defined_here(erl_backend.elds.elds_clause)
    ;       body_external(parse_tree.prog_data.arity).
:- type elds_call_target
    --->    elds_call_plain(hlds.hlds_pred.pred_proc_id)
    ;       elds_call_ho(erl_backend.elds.elds_expr)
    ;       elds_call_builtin(string).
:- type elds_case
    --->    elds_case(erl_backend.elds.elds_term, erl_backend.elds.elds_expr).
:- type elds_catch
    --->    elds_catch(erl_backend.elds.elds_term, erl_backend.elds.elds_term, erl_backend.elds.elds_expr).
:- type elds_clause
    --->    elds_clause(((erl_backend.elds).clause_pattern) :: list.list(erl_backend.elds.elds_term), ((erl_backend.elds).clause_expr) :: erl_backend.elds.elds_expr).
:- type elds_defn
    --->    elds_defn(((erl_backend.elds).defn_proc_id) :: hlds.hlds_pred.pred_proc_id, ((erl_backend.elds).defn_varset) :: parse_tree.prog_data.prog_varset, ((erl_backend.elds).defn_body) :: erl_backend.elds.elds_body, ((erl_backend.elds).defn_env_vars) :: set.set(string)).
:- type elds_expr
    --->    elds_block(list.list(erl_backend.elds.elds_expr))
    ;       elds_term(erl_backend.elds.elds_term)
    ;       elds_eq(erl_backend.elds.elds_expr, erl_backend.elds.elds_expr)
    ;       elds_unop(erl_backend.elds.elds_unop, erl_backend.elds.elds_expr)
    ;       elds_binop(erl_backend.elds.elds_binop, erl_backend.elds.elds_expr, erl_backend.elds.elds_expr)
    ;       elds_call(erl_backend.elds.elds_call_target, list.list(erl_backend.elds.elds_expr))
    ;       elds_rtti_ref(erl_backend.elds.elds_rtti_id)
    ;       elds_fun(erl_backend.elds.elds_clause)
    ;       elds_case_expr(erl_backend.elds.elds_expr, list.list(erl_backend.elds.elds_case))
    ;       elds_try(((erl_backend.elds).try_expr) :: erl_backend.elds.elds_expr, ((erl_backend.elds).try_cases) :: list.list(erl_backend.elds.elds_case), ((erl_backend.elds).try_catch) :: maybe.maybe(erl_backend.elds.elds_catch), ((erl_backend.elds).try_after) :: maybe.maybe(erl_backend.elds.elds_expr))
    ;       elds_throw(erl_backend.elds.elds_expr)
    ;       elds_foreign_code(string, parse_tree.prog_data.prog_context)
    ;       elds_send(erl_backend.elds.elds_expr, erl_backend.elds.elds_expr)
    ;       elds_receive(list.list(erl_backend.elds.elds_case)).
:- type elds_foreign_export_defn
    --->    elds_foreign_export_defn(((erl_backend.elds).fe_defn_name) :: string, ((erl_backend.elds).fe_defn_varset) :: parse_tree.prog_data.prog_varset, ((erl_backend.elds).fe_defn_clause) :: erl_backend.elds.elds_clause).
:- type elds_rtti_defn
    --->    elds_rtti_defn(((erl_backend.elds).rtti_defn_id) :: erl_backend.elds.elds_rtti_id, ((erl_backend.elds).rtti_defn_exported) :: bool.bool, ((erl_backend.elds).rtti_defn_varset) :: parse_tree.prog_data.prog_varset, ((erl_backend.elds).rtti_defn_clause) :: erl_backend.elds.elds_clause).
:- type elds_rtti_id
    --->    elds_rtti_type_ctor_id(backend_libs.rtti.rtti_type_ctor)
    ;       elds_rtti_type_info_id(backend_libs.rtti.rtti_type_info)
    ;       elds_rtti_pseudo_type_info_id(backend_libs.rtti.rtti_pseudo_type_info)
    ;       elds_rtti_base_typeclass_id(backend_libs.rtti.tc_name, mdbcomp.sym_name.module_name, string).
:- type elds_term
    --->    elds_char(char.char)
    ;       elds_int(int)
    ;       elds_uint(uint)
    ;       elds_int8(int)
    ;       elds_uint8(int)
    ;       elds_int16(int)
    ;       elds_uint16(int)
    ;       elds_int32(int)
    ;       elds_uint32(int)
    ;       elds_float(float)
    ;       elds_binary(string)
    ;       elds_list_of_ints(string)
    ;       elds_atom_raw(string)
    ;       elds_atom(mdbcomp.sym_name.sym_name)
    ;       elds_tuple(list.list(erl_backend.elds.elds_expr))
    ;       elds_var(parse_tree.prog_data.prog_var)
    ;       elds_anon_var 
    ;       elds_fixed_name_var(string).
:- type elds_unop
    --->    plus 
    ;       minus 
    ;       bnot 
    ;       logical_not .
