:- module (check_hlds.build_mode_constraints).
:- interface.
:- use_module bimap.
:- use_module hlds.
:- use_module list.
:- use_module mdbcomp.
:- use_module parse_tree.
:- use_module (check_hlds.abstract_mode_constraints).
:- use_module (hlds.hlds_goal).
:- use_module (hlds.hlds_module).
:- use_module (hlds.hlds_pred).
:- use_module (mdbcomp.goal_path).
:- use_module (parse_tree.prog_data).
:- use_module (parse_tree.set_of_var).
:- type args == list.list(parse_tree.prog_data.prog_var).
:- type mc_prog_var
    --->    in(parse_tree.prog_data.prog_var, hlds.hlds_pred.pred_id).
:- type mc_rep_var
    --->    at(check_hlds.build_mode_constraints.mc_prog_var, mdbcomp.goal_path.goal_id).
:- type mc_var_info
    --->    mc_var_info(((check_hlds.build_mode_constraints).mc_varset) :: check_hlds.abstract_mode_constraints.mc_varset, ((check_hlds.build_mode_constraints).rep_var_map) :: check_hlds.build_mode_constraints.mc_var_map).
:- type mc_var_map == bimap.bimap(check_hlds.build_mode_constraints.mc_rep_var, check_hlds.abstract_mode_constraints.mc_var).
:- type mode_constraints == check_hlds.abstract_mode_constraints.pred_p_c_constraints.
:- type nonlocals == parse_tree.set_of_var.set_of_progvar.
:- pred add_clauses_constraints(hlds.hlds_module.module_info, hlds.hlds_pred.pred_id, hlds.hlds_pred.pred_info, check_hlds.build_mode_constraints.mc_var_info, check_hlds.build_mode_constraints.mc_var_info, check_hlds.build_mode_constraints.mode_constraints, check_hlds.build_mode_constraints.mode_constraints).
:- mode add_clauses_constraints((builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.out), (builtin.in), (builtin.out)) is det.
:- pred add_mc_vars_for_goal(hlds.hlds_pred.pred_id, parse_tree.prog_data.prog_varset, hlds.hlds_goal.hlds_goal, check_hlds.build_mode_constraints.mc_var_info, check_hlds.build_mode_constraints.mc_var_info).
:- mode add_mc_vars_for_goal((builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.out)) is det.
:- pred add_mc_vars_for_scc_heads(hlds.hlds_module.module_info, list.list(hlds.hlds_pred.pred_id), check_hlds.build_mode_constraints.mc_var_info, check_hlds.build_mode_constraints.mc_var_info).
:- mode add_mc_vars_for_scc_heads((builtin.in), (builtin.in), (builtin.in), (builtin.out)) is det.
:- pred add_mode_decl_constraints(hlds.hlds_module.module_info, hlds.hlds_pred.pred_id, hlds.hlds_pred.proc_id, list.list(parse_tree.prog_data.mer_mode), check_hlds.build_mode_constraints.args, check_hlds.build_mode_constraints.mc_var_info, check_hlds.build_mode_constraints.mc_var_info, check_hlds.build_mode_constraints.mode_constraints, check_hlds.build_mode_constraints.mode_constraints).
:- mode add_mode_decl_constraints((builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.out), (builtin.in), (builtin.out)) is det.
:- pred mode_decls_constraints(hlds.hlds_module.module_info, check_hlds.build_mode_constraints.mc_var_map, hlds.hlds_pred.pred_id, list.list(list.list(parse_tree.prog_data.mer_mode)), list.list(check_hlds.build_mode_constraints.args), list.list(check_hlds.abstract_mode_constraints.mc_constraint)).
:- mode mode_decls_constraints((builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.out)) is det.
:- func rep_var_to_string(parse_tree.prog_data.prog_varset, check_hlds.build_mode_constraints.mc_rep_var) = string.
:- func var_info_init = check_hlds.build_mode_constraints.mc_var_info.
