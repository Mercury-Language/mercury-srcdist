:- module (((transform_hlds.ctgc).structure_reuse).domain).
:- interface.
:- import_module bool.
:- import_module io.
:- import_module list.
:- import_module map.
:- import_module set.
:- import_module (hlds.goal_util).
:- import_module (hlds.hlds_module).
:- import_module (hlds.hlds_pred).
:- import_module (parse_tree.prog_data).
:- import_module ((transform_hlds.ctgc).livedata).
:- import_module (((transform_hlds.ctgc).structure_sharing).domain).
:- type reuse_as.
:- type reuse_as_table == (map.map(((hlds.hlds_pred).pred_proc_id), ((((transform_hlds.ctgc).structure_reuse).domain).reuse_as))).
:- type reuse_condition.
:- type reuse_conditions == (list.list(((((transform_hlds.ctgc).structure_reuse).domain).reuse_condition))).
:- func from_structure_reuse_domain(((parse_tree.prog_data).structure_reuse_domain)) = ((((transform_hlds.ctgc).structure_reuse).domain).reuse_as).
:- func load_structure_reuse_table(((hlds.hlds_module).module_info)) = ((((transform_hlds.ctgc).structure_reuse).domain).reuse_as_table).
:- pred reuse_as_add_condition(((hlds.hlds_module).module_info), ((hlds.hlds_pred).proc_info), ((((transform_hlds.ctgc).structure_reuse).domain).reuse_condition), ((((transform_hlds.ctgc).structure_reuse).domain).reuse_as), ((((transform_hlds.ctgc).structure_reuse).domain).reuse_as)).
:- mode reuse_as_add_condition((builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.out)) is det.
:- pred reuse_as_add_unconditional(((((transform_hlds.ctgc).structure_reuse).domain).reuse_as), ((((transform_hlds.ctgc).structure_reuse).domain).reuse_as)).
:- mode reuse_as_add_unconditional((builtin.in), (builtin.out)) is det.
:- pred reuse_as_all_unconditional_reuses(((((transform_hlds.ctgc).structure_reuse).domain).reuse_as)).
:- mode reuse_as_all_unconditional_reuses((builtin.in)) is semidet.
:- pred reuse_as_conditional_reuses(((((transform_hlds.ctgc).structure_reuse).domain).reuse_as)).
:- mode reuse_as_conditional_reuses((builtin.in)) is semidet.
:- func reuse_as_from_called_procedure_to_local_reuse_as(((hlds.hlds_module).module_info), ((hlds.hlds_pred).proc_info), ((parse_tree.prog_data).prog_vars), ((parse_tree.prog_data).live_datastructs), ((((transform_hlds.ctgc).structure_sharing).domain).sharing_as), ((((transform_hlds.ctgc).structure_reuse).domain).reuse_as)) = ((((transform_hlds.ctgc).structure_reuse).domain).reuse_as).
:- func reuse_as_init = ((((transform_hlds.ctgc).structure_reuse).domain).reuse_as).
:- func reuse_as_init_with_one_condition(((((transform_hlds.ctgc).structure_reuse).domain).reuse_condition)) = ((((transform_hlds.ctgc).structure_reuse).domain).reuse_as).
:- pred reuse_as_least_upper_bound(((hlds.hlds_module).module_info), ((hlds.hlds_pred).proc_info), ((((transform_hlds.ctgc).structure_reuse).domain).reuse_as), ((((transform_hlds.ctgc).structure_reuse).domain).reuse_as), ((((transform_hlds.ctgc).structure_reuse).domain).reuse_as)).
:- mode reuse_as_least_upper_bound((builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.out)) is det.
:- func reuse_as_least_upper_bound(((hlds.hlds_module).module_info), ((hlds.hlds_pred).proc_info), ((((transform_hlds.ctgc).structure_reuse).domain).reuse_as), ((((transform_hlds.ctgc).structure_reuse).domain).reuse_as)) = ((((transform_hlds.ctgc).structure_reuse).domain).reuse_as).
:- pred reuse_as_no_reuses(((((transform_hlds.ctgc).structure_reuse).domain).reuse_as)).
:- mode reuse_as_no_reuses((builtin.in)) is semidet.
:- pred reuse_as_rename(((hlds.goal_util).prog_var_renaming), ((parse_tree.prog_data).tsubst), ((((transform_hlds.ctgc).structure_reuse).domain).reuse_as), ((((transform_hlds.ctgc).structure_reuse).domain).reuse_as)).
:- mode reuse_as_rename((builtin.in), (builtin.in), (builtin.in), (builtin.out)) is det.
:- pred reuse_as_rename_using_module_info(((hlds.hlds_module).module_info), ((hlds.hlds_pred).pred_proc_id), ((parse_tree.prog_data).prog_vars), (list.list(((parse_tree.prog_data).mer_type))), ((parse_tree.prog_data).tvarset), ((((transform_hlds.ctgc).structure_reuse).domain).reuse_as), ((((transform_hlds.ctgc).structure_reuse).domain).reuse_as)).
:- mode reuse_as_rename_using_module_info((builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.out)) is det.
:- pred reuse_as_satisfied(((hlds.hlds_module).module_info), ((hlds.hlds_pred).proc_info), (((transform_hlds.ctgc).livedata).livedata), ((((transform_hlds.ctgc).structure_sharing).domain).sharing_as), ((parse_tree.prog_data).prog_vars), ((((transform_hlds.ctgc).structure_reuse).domain).reuse_as)).
:- mode reuse_as_satisfied((builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.in)) is semidet.
:- func reuse_as_short_description(((((transform_hlds.ctgc).structure_reuse).domain).reuse_as)) = string.
:- pred reuse_as_subsumed_by(((hlds.hlds_module).module_info), ((hlds.hlds_pred).proc_info), ((((transform_hlds.ctgc).structure_reuse).domain).reuse_as), ((((transform_hlds.ctgc).structure_reuse).domain).reuse_as)).
:- mode reuse_as_subsumed_by((builtin.in), (builtin.in), (builtin.in), (builtin.in)) is semidet.
:- func reuse_as_table_init = ((((transform_hlds.ctgc).structure_reuse).domain).reuse_as_table).
:- pred reuse_as_table_maybe_dump((bool.bool), ((((transform_hlds.ctgc).structure_reuse).domain).reuse_as_table), (io.io), (io.io)).
:- mode reuse_as_table_maybe_dump((builtin.in), (builtin.in), (builtin.di), (builtin.uo)) is det.
:- func reuse_as_table_search(((hlds.hlds_pred).pred_proc_id), ((((transform_hlds.ctgc).structure_reuse).domain).reuse_as_table)) = ((((transform_hlds.ctgc).structure_reuse).domain).reuse_as) is semidet.
:- pred reuse_as_table_set(((hlds.hlds_pred).pred_proc_id), ((((transform_hlds.ctgc).structure_reuse).domain).reuse_as), ((((transform_hlds.ctgc).structure_reuse).domain).reuse_as_table), ((((transform_hlds.ctgc).structure_reuse).domain).reuse_as_table)).
:- mode reuse_as_table_set((builtin.in), (builtin.in), (builtin.in), (builtin.out)) is det.
:- func reuse_condition_init(((hlds.hlds_module).module_info), ((hlds.hlds_pred).proc_info), ((parse_tree.prog_data).dead_var), (set.set(((parse_tree.prog_data).live_var))), (set.set(((parse_tree.prog_data).live_var))), ((((transform_hlds.ctgc).structure_sharing).domain).sharing_as)) = ((((transform_hlds.ctgc).structure_reuse).domain).reuse_condition).
:- pred reuse_condition_is_conditional(((((transform_hlds.ctgc).structure_reuse).domain).reuse_condition)).
:- mode reuse_condition_is_conditional((builtin.in)) is semidet.
:- pred reuse_condition_rename(((hlds.goal_util).prog_var_renaming), ((parse_tree.prog_data).tsubst), ((((transform_hlds.ctgc).structure_reuse).domain).reuse_condition), ((((transform_hlds.ctgc).structure_reuse).domain).reuse_condition)).
:- mode reuse_condition_rename((builtin.in), (builtin.in), (builtin.in), (builtin.out)) is det.
:- pred reuse_condition_subsumed_by(((hlds.hlds_module).module_info), ((hlds.hlds_pred).proc_info), ((((transform_hlds.ctgc).structure_reuse).domain).reuse_condition), ((((transform_hlds.ctgc).structure_reuse).domain).reuse_condition)).
:- mode reuse_condition_subsumed_by((builtin.in), (builtin.in), (builtin.in), (builtin.in)) is semidet.
:- func to_structure_reuse_domain(((((transform_hlds.ctgc).structure_reuse).domain).reuse_as)) = ((parse_tree.prog_data).structure_reuse_domain).
