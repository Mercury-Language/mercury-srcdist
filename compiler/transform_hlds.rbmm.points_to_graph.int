:- module ((transform_hlds.rbmm).points_to_graph).
:- interface.
:- import_module hlds.
:- import_module int.
:- import_module list.
:- import_module map.
:- import_module parse_tree.
:- import_module set.
:- import_module string.
:- import_module (hlds.hlds_module).
:- import_module (hlds.hlds_pred).
:- import_module (parse_tree.prog_data).
:- type rpt_graph.
:- type rptg_arc
	--->	rptg_arc(int).
:- type rptg_arc_content
	--->	rptg_arc_content((((transform_hlds.rbmm).points_to_graph).rptg_ac_label) :: ((parse_tree.prog_data).selector)).
:- type rptg_arc_info
	--->	rptg_arc_info((((transform_hlds.rbmm).points_to_graph).rptg_ai_from_node) :: (((transform_hlds.rbmm).points_to_graph).rptg_node), (((transform_hlds.rbmm).points_to_graph).rptg_ai_to_node) :: (((transform_hlds.rbmm).points_to_graph).rptg_node), (((transform_hlds.rbmm).points_to_graph).rptg_ai_label) :: (((transform_hlds.rbmm).points_to_graph).rptg_arc_content)).
:- type rptg_node
	--->	rptg_node(int).
:- type rptg_node_content
	--->	rptg_node_content((((transform_hlds.rbmm).points_to_graph).rptg_nc_vars) :: (set.set(((parse_tree.prog_data).prog_var))), (((transform_hlds.rbmm).points_to_graph).rptg_nc_reg_var_name) :: string, (((transform_hlds.rbmm).points_to_graph).rptg_nc_merged_from) :: (set.set((((transform_hlds.rbmm).points_to_graph).rptg_node))), (((transform_hlds.rbmm).points_to_graph).rptg_nc_node_type) :: ((parse_tree.prog_data).mer_type)).
:- pred edge_in_graph((((transform_hlds.rbmm).points_to_graph).rptg_node), (((transform_hlds.rbmm).points_to_graph).rptg_arc_content), (((transform_hlds.rbmm).points_to_graph).rptg_node), (((transform_hlds.rbmm).points_to_graph).rpt_graph)).
:- mode edge_in_graph((builtin.in), (builtin.in), (builtin.in), (builtin.in)) is semidet.
:- pred edge_operator((((transform_hlds.rbmm).points_to_graph).rptg_node), (((transform_hlds.rbmm).points_to_graph).rptg_node), (((transform_hlds.rbmm).points_to_graph).rptg_arc_content), (((transform_hlds.rbmm).points_to_graph).rpt_graph), (((transform_hlds.rbmm).points_to_graph).rpt_graph)).
:- mode edge_operator((builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.out)) is det.
:- pred find_arc_from_node_with_same_label((((transform_hlds.rbmm).points_to_graph).rptg_node), (((transform_hlds.rbmm).points_to_graph).rptg_arc_content), (((transform_hlds.rbmm).points_to_graph).rpt_graph), (((transform_hlds.rbmm).points_to_graph).rptg_node)).
:- mode find_arc_from_node_with_same_label((builtin.in), (builtin.in), (builtin.in), (builtin.out)) is semidet.
:- pred get_node_by_node((((transform_hlds.rbmm).points_to_graph).rpt_graph), (((transform_hlds.rbmm).points_to_graph).rptg_node), (((transform_hlds.rbmm).points_to_graph).rptg_node)).
:- mode get_node_by_node((builtin.in), (builtin.in), (builtin.out)) is det.
:- pred get_node_by_region_name((((transform_hlds.rbmm).points_to_graph).rpt_graph), string, (((transform_hlds.rbmm).points_to_graph).rptg_node)).
:- mode get_node_by_region_name((builtin.in), (builtin.in), (builtin.out)) is det.
:- pred get_node_by_variable((((transform_hlds.rbmm).points_to_graph).rpt_graph), ((parse_tree.prog_data).prog_var), (((transform_hlds.rbmm).points_to_graph).rptg_node)).
:- mode get_node_by_variable((builtin.in), (builtin.in), (builtin.out)) is det.
:- pred get_node_by_vars((((transform_hlds.rbmm).points_to_graph).rpt_graph), (set.set(((parse_tree.prog_data).prog_var))), (((transform_hlds.rbmm).points_to_graph).rptg_node)).
:- mode get_node_by_vars((builtin.in), (builtin.in), (builtin.out)) is det.
:- pred reach_from_a_variable((((transform_hlds.rbmm).points_to_graph).rpt_graph), ((hlds.hlds_module).module_info), ((hlds.hlds_pred).proc_info), ((parse_tree.prog_data).prog_var), (set.set((((transform_hlds.rbmm).points_to_graph).rptg_node))), (set.set((((transform_hlds.rbmm).points_to_graph).rptg_node)))).
:- mode reach_from_a_variable((builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.out)) is det.
:- pred reachable_and_having_type((((transform_hlds.rbmm).points_to_graph).rpt_graph), (((transform_hlds.rbmm).points_to_graph).rptg_node), ((parse_tree.prog_data).mer_type), (((transform_hlds.rbmm).points_to_graph).rptg_node)).
:- mode reachable_and_having_type((builtin.in), (builtin.in), (builtin.in), (builtin.out)) is semidet.
:- func rpt_graph_init = (((transform_hlds.rbmm).points_to_graph).rpt_graph).
:- func rptg_arc_content_get_label((((transform_hlds.rbmm).points_to_graph).rptg_arc_content)) = ((parse_tree.prog_data).selector).
:- pred rptg_arc_content_set_label(((parse_tree.prog_data).selector), (((transform_hlds.rbmm).points_to_graph).rptg_arc_content), (((transform_hlds.rbmm).points_to_graph).rptg_arc_content)).
:- mode rptg_arc_content_set_label((builtin.in), (builtin.in), (builtin.out)) is det.
:- pred rptg_arc_contents((((transform_hlds.rbmm).points_to_graph).rpt_graph), (((transform_hlds.rbmm).points_to_graph).rptg_arc), (((transform_hlds.rbmm).points_to_graph).rptg_node), (((transform_hlds.rbmm).points_to_graph).rptg_node), (((transform_hlds.rbmm).points_to_graph).rptg_arc_content)).
:- mode rptg_arc_contents((builtin.in), (builtin.in), (builtin.out), (builtin.out), (builtin.out)) is det.
:- pred rptg_equal((((transform_hlds.rbmm).points_to_graph).rpt_graph), (((transform_hlds.rbmm).points_to_graph).rpt_graph)).
:- mode rptg_equal((builtin.in), (builtin.in)) is semidet.
:- func rptg_get_arcmap((((transform_hlds.rbmm).points_to_graph).rpt_graph)) = (map.map((((transform_hlds.rbmm).points_to_graph).rptg_arc), (((transform_hlds.rbmm).points_to_graph).rptg_arc_info))).
:- func rptg_get_edgemap((((transform_hlds.rbmm).points_to_graph).rpt_graph)) = (map.map((((transform_hlds.rbmm).points_to_graph).rptg_node), (map.map((((transform_hlds.rbmm).points_to_graph).rptg_arc), (((transform_hlds.rbmm).points_to_graph).rptg_node))))).
:- func rptg_get_next_node_number((((transform_hlds.rbmm).points_to_graph).rpt_graph)) = int.
:- func rptg_get_nodemap((((transform_hlds.rbmm).points_to_graph).rpt_graph)) = (map.map((((transform_hlds.rbmm).points_to_graph).rptg_node), (((transform_hlds.rbmm).points_to_graph).rptg_node_content))).
:- func rptg_get_nodes((((transform_hlds.rbmm).points_to_graph).rpt_graph)) = (list.list((((transform_hlds.rbmm).points_to_graph).rptg_node))).
:- func rptg_lookup_node_type((((transform_hlds.rbmm).points_to_graph).rpt_graph), (((transform_hlds.rbmm).points_to_graph).rptg_node)) = ((parse_tree.prog_data).mer_type).
:- func rptg_lookup_region_name((((transform_hlds.rbmm).points_to_graph).rpt_graph), (((transform_hlds.rbmm).points_to_graph).rptg_node)) = string.
:- func rptg_node_content_get_merged_from((((transform_hlds.rbmm).points_to_graph).rptg_node_content)) = (set.set((((transform_hlds.rbmm).points_to_graph).rptg_node))).
:- func rptg_node_content_get_node_type((((transform_hlds.rbmm).points_to_graph).rptg_node_content)) = ((parse_tree.prog_data).mer_type).
:- func rptg_node_content_get_region_name((((transform_hlds.rbmm).points_to_graph).rptg_node_content)) = string.
:- func rptg_node_content_get_vars((((transform_hlds.rbmm).points_to_graph).rptg_node_content)) = (set.set(((parse_tree.prog_data).prog_var))).
:- pred rptg_node_content_set_merged_from((set.set((((transform_hlds.rbmm).points_to_graph).rptg_node))), (((transform_hlds.rbmm).points_to_graph).rptg_node_content), (((transform_hlds.rbmm).points_to_graph).rptg_node_content)).
:- mode rptg_node_content_set_merged_from((builtin.in), (builtin.in), (builtin.out)) is det.
:- pred rptg_node_content_set_node_type(((parse_tree.prog_data).mer_type), (((transform_hlds.rbmm).points_to_graph).rptg_node_content), (((transform_hlds.rbmm).points_to_graph).rptg_node_content)).
:- mode rptg_node_content_set_node_type((builtin.in), (builtin.in), (builtin.out)) is det.
:- pred rptg_node_content_set_region_name(string, (((transform_hlds.rbmm).points_to_graph).rptg_node_content), (((transform_hlds.rbmm).points_to_graph).rptg_node_content)).
:- mode rptg_node_content_set_region_name((builtin.in), (builtin.in), (builtin.out)) is det.
:- pred rptg_node_content_set_vars((set.set(((parse_tree.prog_data).prog_var))), (((transform_hlds.rbmm).points_to_graph).rptg_node_content), (((transform_hlds.rbmm).points_to_graph).rptg_node_content)).
:- mode rptg_node_content_set_vars((builtin.in), (builtin.in), (builtin.out)) is det.
:- func rptg_node_contents((((transform_hlds.rbmm).points_to_graph).rpt_graph), (((transform_hlds.rbmm).points_to_graph).rptg_node)) = (((transform_hlds.rbmm).points_to_graph).rptg_node_content).
:- pred rptg_path((((transform_hlds.rbmm).points_to_graph).rpt_graph), (((transform_hlds.rbmm).points_to_graph).rptg_node), (((transform_hlds.rbmm).points_to_graph).rptg_node), (list.list((((transform_hlds.rbmm).points_to_graph).rptg_arc)))).
:- mode rptg_path((builtin.in), (builtin.in), (builtin.in), (builtin.out)) is nondet.
:- mode rptg_path((builtin.in), (builtin.in), (builtin.out), (builtin.out)) is nondet.
:- pred rptg_set_arcmap((map.map((((transform_hlds.rbmm).points_to_graph).rptg_arc), (((transform_hlds.rbmm).points_to_graph).rptg_arc_info))), (((transform_hlds.rbmm).points_to_graph).rpt_graph), (((transform_hlds.rbmm).points_to_graph).rpt_graph)).
:- mode rptg_set_arcmap((builtin.in), (builtin.in), (builtin.out)) is det.
:- pred rptg_set_edge((((transform_hlds.rbmm).points_to_graph).rptg_node), (((transform_hlds.rbmm).points_to_graph).rptg_node), (((transform_hlds.rbmm).points_to_graph).rptg_arc_content), (((transform_hlds.rbmm).points_to_graph).rptg_arc), (((transform_hlds.rbmm).points_to_graph).rpt_graph), (((transform_hlds.rbmm).points_to_graph).rpt_graph)).
:- mode rptg_set_edge((builtin.in), (builtin.in), (builtin.in), (builtin.out), (builtin.in), (builtin.out)) is det.
:- pred rptg_set_edgemap((map.map((((transform_hlds.rbmm).points_to_graph).rptg_node), (map.map((((transform_hlds.rbmm).points_to_graph).rptg_arc), (((transform_hlds.rbmm).points_to_graph).rptg_node))))), (((transform_hlds.rbmm).points_to_graph).rpt_graph), (((transform_hlds.rbmm).points_to_graph).rpt_graph)).
:- mode rptg_set_edgemap((builtin.in), (builtin.in), (builtin.out)) is det.
:- pred rptg_set_node((((transform_hlds.rbmm).points_to_graph).rptg_node_content), (((transform_hlds.rbmm).points_to_graph).rptg_node), (((transform_hlds.rbmm).points_to_graph).rpt_graph), (((transform_hlds.rbmm).points_to_graph).rpt_graph)).
:- mode rptg_set_node((builtin.in), (builtin.out), (builtin.in), (builtin.out)) is det.
:- pred rptg_set_nodemap((map.map((((transform_hlds.rbmm).points_to_graph).rptg_node), (((transform_hlds.rbmm).points_to_graph).rptg_node_content))), (((transform_hlds.rbmm).points_to_graph).rpt_graph), (((transform_hlds.rbmm).points_to_graph).rpt_graph)).
:- mode rptg_set_nodemap((builtin.in), (builtin.in), (builtin.out)) is det.
:- func rptg_successors((((transform_hlds.rbmm).points_to_graph).rpt_graph), (((transform_hlds.rbmm).points_to_graph).rptg_node)) = (set.set((((transform_hlds.rbmm).points_to_graph).rptg_node))).
:- pred unify_operator((((transform_hlds.rbmm).points_to_graph).rptg_node), (((transform_hlds.rbmm).points_to_graph).rptg_node), (((transform_hlds.rbmm).points_to_graph).rpt_graph), (((transform_hlds.rbmm).points_to_graph).rpt_graph)).
:- mode unify_operator((builtin.in), (builtin.in), (builtin.in), (builtin.out)) is det.
