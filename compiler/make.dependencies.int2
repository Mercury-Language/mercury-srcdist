:- module (make.dependencies).
:- interface.
:- use_module io.
:- use_module set.
:- use_module (libs.globals).
:- use_module (libs.maybe_succeeded).
:- type cached_direct_imports.
:- type cached_foreign_imports.
:- type cached_transitive_dependencies.
:- type dependencies_result
    --->    deps_up_to_date 
    ;       deps_out_of_date 
    ;       deps_error .
:- type dependency_file
    --->    dep_target(make.target_file)
    ;       dep_file(libs.file_util.file_name).
:- type find_module_deps(T) == pred(libs.globals.globals, make.deps_set.module_index, libs.maybe_succeeded.maybe_succeeded, make.deps_set.deps_set(T), make.make_info, make.make_info, io.io, io.io).
:- type find_module_deps_plain_set(T) == pred(libs.globals.globals, make.deps_set.module_index, libs.maybe_succeeded.maybe_succeeded, set.set(T), make.make_info, make.make_info, io.io, io.io).
:- inst (find_module_deps) == (pred((builtin.in), (builtin.in), (builtin.out), (builtin.out), (builtin.in), (builtin.out), (builtin.di), (builtin.uo)) is det).
:- inst (find_module_deps_plain_set) == (pred((builtin.in), (builtin.in), (builtin.out), (builtin.out), (builtin.in), (builtin.out), (builtin.di), (builtin.uo)) is det).
:- implementation.
:- type cached_direct_imports == map.map(make.deps_set.module_index, make.dependencies.module_deps_result).
:- type cached_foreign_imports == map.map(make.deps_set.module_index, make.dependencies.module_deps_result).
:- type cached_transitive_dependencies == map.map(make.dependencies.transitive_dependencies_root, make.dependencies.deps_result(make.deps_set.module_index)).
:- type deps_result(T).
:- type module_deps_result == make.dependencies.deps_result(make.deps_set.module_index).
:- type transitive_dependencies_root.
