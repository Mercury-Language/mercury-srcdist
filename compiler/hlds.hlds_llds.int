:- module (hlds.hlds_llds).
:- interface.
:- import_module bool.
:- import_module map.
:- import_module maybe.
:- import_module set.
:- import_module (hlds.hlds_goal).
:- import_module (parse_tree.prog_data).
:- type abs_follow_vars
	--->	abs_follow_vars(((hlds.hlds_llds).abs_follow_vars_map), int).
:- type abs_follow_vars_map == (map.map(((parse_tree.prog_data).prog_var), ((hlds.hlds_llds).abs_locn))).
:- type abs_locn
	--->	any_reg 
	;	abs_reg(int)
	;	abs_stackvar(int)
	;	abs_parent_stackvar(int)
	;	abs_framevar(int).
:- type abs_store_map == (map.map(((parse_tree.prog_data).prog_var), ((hlds.hlds_llds).abs_locn))).
:- type llds_code_gen_details.
:- type need_across_call
	--->	need_across_call(((hlds.hlds_llds).call_forward_vars) :: (set.set(((parse_tree.prog_data).prog_var))), ((hlds.hlds_llds).call_resume_vars) :: (set.set(((parse_tree.prog_data).prog_var))), ((hlds.hlds_llds).call_nondet_vars) :: (set.set(((parse_tree.prog_data).prog_var)))).
:- type need_in_par_conj
	--->	need_in_par_conj(((hlds.hlds_llds).par_conj_engine_vars) :: (set.set(((parse_tree.prog_data).prog_var)))).
:- type need_in_resume
	--->	need_in_resume(((hlds.hlds_llds).resume_vars_on_stack) :: (bool.bool), ((hlds.hlds_llds).resume_resume_vars) :: (set.set(((parse_tree.prog_data).prog_var))), ((hlds.hlds_llds).resume_nondet_vars) :: (set.set(((parse_tree.prog_data).prog_var)))).
:- type resume_locs
	--->	resume_locs_orig_only 
	;	resume_locs_stack_only 
	;	resume_locs_orig_and_stack 
	;	resume_locs_stack_and_orig .
:- type resume_point
	--->	resume_point((set.set(((parse_tree.prog_data).prog_var))), ((hlds.hlds_llds).resume_locs))
	;	no_resume_point .
:- type stack_slot
	--->	det_slot(int)
	;	parent_det_slot(int)
	;	nondet_slot(int).
:- type stack_slots == (map.map(((parse_tree.prog_data).prog_var), ((hlds.hlds_llds).stack_slot))).
:- func abs_locn_to_string(((hlds.hlds_llds).abs_locn)) = string.
:- pred goal_info_get_follow_vars(((hlds.hlds_goal).hlds_goal_info), (maybe.maybe(((hlds.hlds_llds).abs_follow_vars)))).
:- mode goal_info_get_follow_vars((builtin.in), (builtin.out)) is det.
:- pred goal_info_get_maybe_need_across_call(((hlds.hlds_goal).hlds_goal_info), (maybe.maybe(((hlds.hlds_llds).need_across_call)))).
:- mode goal_info_get_maybe_need_across_call((builtin.in), (builtin.out)) is det.
:- pred goal_info_get_maybe_need_in_par_conj(((hlds.hlds_goal).hlds_goal_info), (maybe.maybe(((hlds.hlds_llds).need_in_par_conj)))).
:- mode goal_info_get_maybe_need_in_par_conj((builtin.in), (builtin.out)) is det.
:- pred goal_info_get_maybe_need_in_resume(((hlds.hlds_goal).hlds_goal_info), (maybe.maybe(((hlds.hlds_llds).need_in_resume)))).
:- mode goal_info_get_maybe_need_in_resume((builtin.in), (builtin.out)) is det.
:- pred goal_info_get_post_births(((hlds.hlds_goal).hlds_goal_info), (set.set(((parse_tree.prog_data).prog_var)))).
:- mode goal_info_get_post_births((builtin.in), (builtin.out)) is det.
:- pred goal_info_get_post_deaths(((hlds.hlds_goal).hlds_goal_info), (set.set(((parse_tree.prog_data).prog_var)))).
:- mode goal_info_get_post_deaths((builtin.in), (builtin.out)) is det.
:- pred goal_info_get_pre_births(((hlds.hlds_goal).hlds_goal_info), (set.set(((parse_tree.prog_data).prog_var)))).
:- mode goal_info_get_pre_births((builtin.in), (builtin.out)) is det.
:- pred goal_info_get_pre_deaths(((hlds.hlds_goal).hlds_goal_info), (set.set(((parse_tree.prog_data).prog_var)))).
:- mode goal_info_get_pre_deaths((builtin.in), (builtin.out)) is det.
:- pred goal_info_get_resume_point(((hlds.hlds_goal).hlds_goal_info), ((hlds.hlds_llds).resume_point)).
:- mode goal_info_get_resume_point((builtin.in), (builtin.out)) is det.
:- pred goal_info_get_store_map(((hlds.hlds_goal).hlds_goal_info), ((hlds.hlds_llds).abs_store_map)).
:- mode goal_info_get_store_map((builtin.in), (builtin.out)) is det.
:- pred goal_info_initialize_liveness_info((set.set(((parse_tree.prog_data).prog_var))), (set.set(((parse_tree.prog_data).prog_var))), (set.set(((parse_tree.prog_data).prog_var))), (set.set(((parse_tree.prog_data).prog_var))), ((hlds.hlds_llds).resume_point), ((hlds.hlds_goal).hlds_goal_info), ((hlds.hlds_goal).hlds_goal_info)).
:- mode goal_info_initialize_liveness_info((builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.in), (builtin.out)) is det.
:- pred goal_info_maybe_get_follow_vars(((hlds.hlds_goal).hlds_goal_info), (maybe.maybe(((hlds.hlds_llds).abs_follow_vars)))).
:- mode goal_info_maybe_get_follow_vars((builtin.in), (builtin.out)) is semidet.
:- pred goal_info_maybe_get_maybe_need_across_call(((hlds.hlds_goal).hlds_goal_info), (maybe.maybe(((hlds.hlds_llds).need_across_call)))).
:- mode goal_info_maybe_get_maybe_need_across_call((builtin.in), (builtin.out)) is semidet.
:- pred goal_info_maybe_get_maybe_need_in_par_conj(((hlds.hlds_goal).hlds_goal_info), (maybe.maybe(((hlds.hlds_llds).need_in_par_conj)))).
:- mode goal_info_maybe_get_maybe_need_in_par_conj((builtin.in), (builtin.out)) is semidet.
:- pred goal_info_maybe_get_maybe_need_in_resume(((hlds.hlds_goal).hlds_goal_info), (maybe.maybe(((hlds.hlds_llds).need_in_resume)))).
:- mode goal_info_maybe_get_maybe_need_in_resume((builtin.in), (builtin.out)) is semidet.
:- pred goal_info_maybe_get_post_births(((hlds.hlds_goal).hlds_goal_info), (set.set(((parse_tree.prog_data).prog_var)))).
:- mode goal_info_maybe_get_post_births((builtin.in), (builtin.out)) is semidet.
:- pred goal_info_maybe_get_post_deaths(((hlds.hlds_goal).hlds_goal_info), (set.set(((parse_tree.prog_data).prog_var)))).
:- mode goal_info_maybe_get_post_deaths((builtin.in), (builtin.out)) is semidet.
:- pred goal_info_maybe_get_pre_births(((hlds.hlds_goal).hlds_goal_info), (set.set(((parse_tree.prog_data).prog_var)))).
:- mode goal_info_maybe_get_pre_births((builtin.in), (builtin.out)) is semidet.
:- pred goal_info_maybe_get_pre_deaths(((hlds.hlds_goal).hlds_goal_info), (set.set(((parse_tree.prog_data).prog_var)))).
:- mode goal_info_maybe_get_pre_deaths((builtin.in), (builtin.out)) is semidet.
:- pred goal_info_maybe_get_resume_point(((hlds.hlds_goal).hlds_goal_info), ((hlds.hlds_llds).resume_point)).
:- mode goal_info_maybe_get_resume_point((builtin.in), (builtin.out)) is semidet.
:- pred goal_info_maybe_get_store_map(((hlds.hlds_goal).hlds_goal_info), ((hlds.hlds_llds).abs_store_map)).
:- mode goal_info_maybe_get_store_map((builtin.in), (builtin.out)) is semidet.
:- pred goal_info_resume_vars_and_loc(((hlds.hlds_llds).resume_point), (set.set(((parse_tree.prog_data).prog_var))), ((hlds.hlds_llds).resume_locs)).
:- mode goal_info_resume_vars_and_loc((builtin.in), (builtin.out), (builtin.out)) is det.
:- pred goal_info_set_follow_vars((maybe.maybe(((hlds.hlds_llds).abs_follow_vars))), ((hlds.hlds_goal).hlds_goal_info), ((hlds.hlds_goal).hlds_goal_info)).
:- mode goal_info_set_follow_vars((builtin.in), (builtin.in), (builtin.out)) is det.
:- pred goal_info_set_need_across_call(((hlds.hlds_llds).need_across_call), ((hlds.hlds_goal).hlds_goal_info), ((hlds.hlds_goal).hlds_goal_info)).
:- mode goal_info_set_need_across_call((builtin.in), (builtin.in), (builtin.out)) is det.
:- pred goal_info_set_need_in_par_conj(((hlds.hlds_llds).need_in_par_conj), ((hlds.hlds_goal).hlds_goal_info), ((hlds.hlds_goal).hlds_goal_info)).
:- mode goal_info_set_need_in_par_conj((builtin.in), (builtin.in), (builtin.out)) is det.
:- pred goal_info_set_need_in_resume(((hlds.hlds_llds).need_in_resume), ((hlds.hlds_goal).hlds_goal_info), ((hlds.hlds_goal).hlds_goal_info)).
:- mode goal_info_set_need_in_resume((builtin.in), (builtin.in), (builtin.out)) is det.
:- pred goal_info_set_post_births((set.set(((parse_tree.prog_data).prog_var))), ((hlds.hlds_goal).hlds_goal_info), ((hlds.hlds_goal).hlds_goal_info)).
:- mode goal_info_set_post_births((builtin.in), (builtin.in), (builtin.out)) is det.
:- pred goal_info_set_post_deaths((set.set(((parse_tree.prog_data).prog_var))), ((hlds.hlds_goal).hlds_goal_info), ((hlds.hlds_goal).hlds_goal_info)).
:- mode goal_info_set_post_deaths((builtin.in), (builtin.in), (builtin.out)) is det.
:- pred goal_info_set_pre_births((set.set(((parse_tree.prog_data).prog_var))), ((hlds.hlds_goal).hlds_goal_info), ((hlds.hlds_goal).hlds_goal_info)).
:- mode goal_info_set_pre_births((builtin.in), (builtin.in), (builtin.out)) is det.
:- pred goal_info_set_pre_deaths((set.set(((parse_tree.prog_data).prog_var))), ((hlds.hlds_goal).hlds_goal_info), ((hlds.hlds_goal).hlds_goal_info)).
:- mode goal_info_set_pre_deaths((builtin.in), (builtin.in), (builtin.out)) is det.
:- pred goal_info_set_resume_point(((hlds.hlds_llds).resume_point), ((hlds.hlds_goal).hlds_goal_info), ((hlds.hlds_goal).hlds_goal_info)).
:- mode goal_info_set_resume_point((builtin.in), (builtin.in), (builtin.out)) is det.
:- pred goal_info_set_store_map(((hlds.hlds_llds).abs_store_map), ((hlds.hlds_goal).hlds_goal_info), ((hlds.hlds_goal).hlds_goal_info)).
:- mode goal_info_set_store_map((builtin.in), (builtin.in), (builtin.out)) is det.
:- pred goal_set_follow_vars((maybe.maybe(((hlds.hlds_llds).abs_follow_vars))), ((hlds.hlds_goal).hlds_goal), ((hlds.hlds_goal).hlds_goal)).
:- mode goal_set_follow_vars((builtin.in), (builtin.in), (builtin.out)) is det.
:- pred goal_set_resume_point(((hlds.hlds_llds).resume_point), ((hlds.hlds_goal).hlds_goal), ((hlds.hlds_goal).hlds_goal)).
:- mode goal_set_resume_point((builtin.in), (builtin.in), (builtin.out)) is det.
:- func key_stack_slot_to_abs_locn(V_1, ((hlds.hlds_llds).stack_slot)) = ((hlds.hlds_llds).abs_locn).
:- pred rename_vars_in_llds_code_gen_info(((parse_tree.prog_data).must_rename), (map.map(((parse_tree.prog_data).prog_var), ((parse_tree.prog_data).prog_var))), ((hlds.hlds_llds).llds_code_gen_details), ((hlds.hlds_llds).llds_code_gen_details)).
:- mode rename_vars_in_llds_code_gen_info((builtin.in), (builtin.in), (builtin.in), (builtin.out)) is det.
:- func stack_slot_num(((hlds.hlds_llds).stack_slot)) = int.
:- func stack_slot_to_abs_locn(((hlds.hlds_llds).stack_slot)) = ((hlds.hlds_llds).abs_locn).
